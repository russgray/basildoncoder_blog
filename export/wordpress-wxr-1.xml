<?xml version="1.0" encoding="UTF-8"?><rss version="version" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:wp="http://wordpress.org/export/1.0/">
  <channel>
    <title>Basildon Coder</title>
    <link>http://blog.basildoncoder.com/</link>
    <pubDate>Thu, 10 Jul 2014 21:08:13 +0100</pubDate>
    <generator>http://blogger2wordpress.appspot.com</generator>
    <language>en</language>
    <wp:wxr_version>1.0</wp:wxr_version>
    <wp:base_site_url>http://wordpress.com</wp:base_site_url>
    <wp:base_blog_url>http://blog.basildoncoder.com/</wp:base_blog_url>
    <item>
      <title>Disabling Voice Control on iOS 7.1</title>
      <link>http://blog.basildoncoder.com/2014/07/disabling-voice-control-on-ios-71.html</link>
      <pubDate>Thu, 10 Jul 2014 21:08:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>1</wp:post_id>
      <wp:post_date>2014-07-10 21:08:00</wp:post_date>
      <wp:post_date_gmt>2014-07-10 21:08:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Disabling-Voice-Control-on-iOS-7.1</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I'm one of those people who feels irredeemably stupid if I try to talk to any piece of technology, so I duly turn off Siri on any iOS device I own.<br /><br />I recently discovered - via my 15-month-old son and his love of all things gadgety that he's not supposed to play with - that disabling Siri in iOS 7.1 (and probably older versions too) automatically enables Voice Control, which can be accessed from the Lock Screen by holding down the Home button. When I say 'discovered', what I actually mean is I found my son holding my phone with a faintly confused friend on the line trying to figure out why he was being gurgled at. It seems that 'da' uttered by an infant is recognised as 'Dan'. Who knew?<br /><br />Annoyingly, Voice Control <a href="https://discussions.apple.com/message/25145289" target="_blank">cannot be disabled in iOS 7.1</a> - I ask you, what is the point of implementing fingerprint scanners and remote wipe technology and all that jazz if you are going to force-enable features that a toddler can use to bypass everything and call my mates at 6am?<br /><br />Anyway, the workaround I've discovered is to re-enable the thrice-damned Siri, then go back to <span style="font-family: Courier New, Courier, monospace;">Settings/Touch ID & Passcode</span> and disallow access to Siri when locked. This is enough to make the Lock Screen a sufficient barrier for a small child. I can disable most of Siri's features to keep her quiet - she only shows up if I hold down the Home button after unlocking, which is at least significantly less likely than inquisitive little hands finding my phone on the couch and holding down the inviting button that makes the screen light up on the magic box for a couple of seconds.<br /><br />Technology is great, no?]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2014/07/disabling-voice-control-on-ios-71.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Git command to open branch in Bitbucket</title>
      <link>http://blog.basildoncoder.com/2014/01/git-command-to-open-branch-in-bitbucket.html</link>
      <pubDate>Thu, 23 Jan 2014 17:39:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>2</wp:post_id>
      <wp:post_date>2014-01-23 17:39:00</wp:post_date>
      <wp:post_date_gmt>2014-01-23 17:39:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Git-command-to-open-branch-in-Bitbucket</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[George Brocklehurst has a <a href="http://georgebrock.com/blog/useful-git-aliases">useful little script</a> for opening GitHub at a particular commit, right from the command line. I've found this handy enough in the past that I've created an equivalent for Bitbucket, which is what I use at work.<br /><br /><pre language="bash" name="code">#!/bin/bash<br /><br />bitbucket_remote=$(git remote -v | /c/Bin/grep -Eo 'bitbucket.org[:/][^.]+' | head -1)<br />if [ -z $bitbucket_remote ]<br />then<br />    echo "No bitbucket remote"<br />    exit<br />fi<br /><br />bitbucket_url="https://${bitbucket_remote/://}/"<br />if [ ! -z $1 ]<br />then<br />    sha=$(git rev-parse $1)<br />    bitbucket_url="${bitbucket_url}commits/$sha"<br />fi<br /><br />start $bitbucket_url<br /></pre>Installation instructions are the same as George's - name the script git-bb and drop it on your PATH, then invoke it as a subcommand:  <br /><pre language="bash" name="code">$ git bb <commit><br /></commit></pre><br />]]></content:encoded>
      <category domain="tag">git</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2014/01/git-command-to-open-branch-in-bitbucket.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>ConcurrentDictionary: GetOrAdd vs GetOrAdd - One Of These Things Is Not Like The Other</title>
      <link>http://blog.basildoncoder.com/2014/01/concurrentdictionary-getoradd-vs.html</link>
      <pubDate>Mon, 13 Jan 2014 18:00:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>3</wp:post_id>
      <wp:post_date>2014-01-13 18:00:00</wp:post_date>
      <wp:post_date_gmt>2014-01-13 18:00:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>ConcurrentDictionary:-GetOrAdd-vs-GetOrAdd---One-Of-These-Things-Is-Not-Like-The-Other</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Some recent performance profiling of a server application under load turned up an interesting gotcha in .Net's ConcurrentDictionary that I think is well-worth knowing about.<br /><br />As you probably know, ConcurrentDictionary strives for performance in concurrent environments by using more sophisticated locking strategies than simply <span style="font-family: Courier New, Courier, monospace;">lock(this)</span>. Briefly, it has a lock per bucket, which means that parallel writes are possible where the updates are in different buckets. A few operations acquire all locks, which obviously is a source of contention, but typically these are operations like Count and IsEmpty that shouldn't be called frequently. Finally, and of most relevance to this post, it supports lock-free reads which are the holy grail for high-concurrency. Except when it doesn't.<br /><br />ConcurrentDictionary has two overloads of the GetOrAdd method, an atomic operation to get a value if it exists, or add it if not. In the case where the value does not exist, you can either provide the new value directly, or pass a factory delegate that ConcurrentDictionary will call if it needs the value. The Remarks section in the <a href="http://msdn.microsoft.com/en-us/library/dd287191(v=vs.110).aspx">MSDN docs</a> warns that the factory delegate will be called outside the lock, but otherwise the two overloads appear identical functionally - in particular that "read operations on the dictionary are performed in a lock-free manner".<br /><br />This is not true, however, at least as of .Net 4.5. The factory delegate overload will call the lockless TryGetValue and only attempt to do an Add (thus acquiring a lock) if the read fails - this is sane and how I would expect it to be implemented. The non-delegate overload of GetOrAdd, however, does not call TryGetValue and will obtain the bucket lock <i>before</i> it attempts to read the key, meaning that it is no longer a lockless read!<br /><br />If you have lots of threads attempting to read from a ConcurrentDictionary with a small number of keys, you'll get massive lock contention with this method. Frankly I think this should be considered a bug since in a highly-concurrent environment this is a fundamental difference in behaviour for two methods which should be near-identical.<br /><br />I won't post any code here because I don't want to get into any licencing issues, but if you have Resharper or dotPeek you can easily decompile the framework and verify this behaviour yourself.]]></content:encoded>
      <category domain="tag">Data Structures</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2014/01/concurrentdictionary-getoradd-vs.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>MySQL 'Table not found' Error When Referring To A New Table In A Trigger</title>
      <link>http://blog.basildoncoder.com/2012/12/mysql-table-not-found-error-when.html</link>
      <pubDate>Tue, 18 Dec 2012 11:31:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>4</wp:post_id>
      <wp:post_date>2012-12-18 11:31:00</wp:post_date>
      <wp:post_date_gmt>2012-12-18 11:31:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>MySQL-'Table-not-found'-Error-When-Referring-To-A-New-Table-In-A-Trigger</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<p>Note to self - the following bullet point from the MySQL docs applies to new tables as well as modified tables.</p> <blockquote> <p>The trigger cache does not detect when metadata of the underlying objects has changed. If a trigger uses a table and the table has changed since the trigger was loaded into the cache, the trigger operates using the outdated metadata. <a href="http://dev.mysql.com/doc/refman/5.6/en/stored-program-restrictions.html" target="_blank">Reference</a></p></blockquote> <p>Do not hot-deploy a new table and a trigger update to refer to it, bad things will happen.</p> ]]></content:encoded>
      <category domain="tag">MySQL</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2012/12/mysql-table-not-found-error-when.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Hackish Monitoring With Python and wevtutil</title>
      <link>http://blog.basildoncoder.com/2012/09/hackish-monitoring-with-python-and.html</link>
      <pubDate>Thu, 27 Sep 2012 11:06:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>5</wp:post_id>
      <wp:post_date>2012-09-27 11:06:00</wp:post_date>
      <wp:post_date_gmt>2012-09-27 11:06:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Hackish-Monitoring-With-Python-and-wevtutil</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I recently started at a new role and was asked, as a way to get a handle on part of the codebase, to add some logging and monitoring to a key service that didn't really tell the world too much about what it was doing - and when it did speak up, no-one was listening.<br /><br /><em>Oh, and could you come up with something by tomorrow please? That would be great.</em><br /><em><br /></em>Naturally it takes longer than a day to instrument an entire app, but since exceptions were being written to the event log I figured we could at least get some useful stuff from there. So the short-term challenge became finding a way to collect the event logs from 12 production servers, process them to figure out what's been happening, and then do it frequently enough that pretty graphs can be generated.<br /><br />This of course rules out doing anything with the MMC snap-in, as manually connecting to 12 boxes every few minutes would be a full-time job in itself. Powershell seemingly provides a number of possibilities, but I couldn't get <a href="http://ss64.com/ps/get-wmiobject.html">Get-WmiObject</a> <a href="http://www.autmon.com/learn/powershell/powershell-quicktips/learn-powershell-event-log/">queries</a> to work, <a href="http://ss64.com/ps/get-eventlog.html">Get-EventLog</a> wouldn't allow me to provide authentication credentials for the remote machine, and <a href="http://ss64.com/ps/get-winevent.html">Get-WinEvent</a> almost worked but failed to return the actual log message, even if I <a href="http://stackoverflow.com/questions/10534982/powershell-get-winevent-has-no-messsage-data">fiddled with the locale</a>. I want to like Powershell, I really do, but every time I want to use it I hit bugs or OS compatibility issues.<br /><br />Recent Windows versions come with a handy tool called <a href="http://technet.microsoft.com/en-us/library/cc732848(v=ws.10).aspx">wevtutil</a>, however, which is just what I needed. The following command does exactly what I want:<br /><br /><pre>wevtutil qe Application /c:50 /q:"*[System[Provider[@Name='APP_NAME'] and (Level=1 or Level=2) and TimeCreated[timediff(@SystemTime)<300000]]]" /e:Events /r:REMOTE_IP /u:SECURE\\Administrator /f:xml</pre><br />That gets me a maximum of 50 log entries from the last 5 minutes (300000ms) in the Application log with the specified log provider, on the specified machine, in XML format. Phew!<br /><br />From here, it's fairly simple to write some python to invoke that command, parse the XML response (so that errors can be categorised, e.g. database.timeout or network.connectivity), and fire some numbers off to the wonderful <a href="https://github.com/etsy/statsd">statsd</a>. Then schedule the script to run every 5 minutes, and we have some very ghetto error monitoring in almost no time!<br /><br />Now begins the larger task of adding more detailed diagnostics to the app for more effective monitoring.<br /><br />Thanks to <a href="http://blogs.msdn.com/b/ericfitz/archive/2008/07/16/wevtutil-scripting.aspx">http://blogs.msdn.com/b/ericfitz/archive/2008/07/16/wevtutil-scripting.aspx</a> and <a href="http://chentiangemalc.wordpress.com/2011/01/25/script-to-collect-all-event-logs-off-a-remote-windows-7-server-2008-machine/">http://chentiangemalc.wordpress.com/2011/01/25/script-to-collect-all-event-logs-off-a-remote-windows-7-server-2008-machine/</a> for ideas on scripting wevtutil.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2012/09/hackish-monitoring-with-python-and.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Marshalling a Variable-Length Array From Unmanaged Code In C#</title>
      <link>http://blog.basildoncoder.com/2009/03/marshalling-variable-length-array-from.html</link>
      <pubDate>Tue, 31 Mar 2009 20:03:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>6</wp:post_id>
      <wp:post_date>2009-03-31 20:03:00</wp:post_date>
      <wp:post_date_gmt>2009-03-31 20:03:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Marshalling-a-Variable-Length-Array-From-Unmanaged-Code-In-C#</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I recently spent time working on some C# code to interact with a simple <a href="http://files.dns-sd.org/draft-cheshire-dnsext-dns-sd.txt">DNS-SD</a> system. This requires using <a href="http://en.wikipedia.org/wiki/List_of_DNS_record_types">DNS TXT records</a>, which are not supported in the <a href="http://msdn.microsoft.com/en-us/library/system.net.dns.aspx">System.Net.Dns</a> class. After a few google searches failed to turn up a pure .Net client library that met my needs, I settled on an approach based around p/invoking the Win32 <a href="http://msdn.microsoft.com/en-us/library/ms682016(VS.85).aspx">DnsQuery</a> function.<br /><br />And quickly ran into problems.<br /><br />For DNS TXT records, DnsQuery returns a <a href="http://msdn.microsoft.com/en-us/library/ms682109(VS.85).aspx">DNS_TXT_DATA</a> structure in the Data field of the <a href="http://msdn.microsoft.com/en-us/library/ms682082(VS.85).aspx">DNS_RECORD</a> structure. DNS_TXT_DATA is declared like this:<br /><pre name="code" language="C">typedef struct {<br />    DWORD dwStringCount;<br />    PWSTR pStringArray[1];<br />} DNS_TXT_DATA,<br />    *PDNS_TXT_DATA;</pre><br />Using the very handy <a href="http://clrinterop.codeplex.com/">P/Invoke Interop Assistant</a>, we see that this struct can be represented like this in managed code:<br /><pre name="code" language="csharp">[StructLayout(LayoutKind.Sequential)]<br />public struct DNS_TXT_DATA {<br /><br />    /// DWORD->unsigned int<br />    public uint dwStringCount;<br /><br />    /// PWSTR[1]<br />    [MarshalAs(UnmanagedType.ByValArray,<br />            SizeConst=1,<br />            ArraySubType=UnmanagedType.SysUInt)]<br />    public IntPtr[] pStringArray;<br />}</pre><br />There is a problem with pStringArray, unfortunately. The <a href="http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx">System.Runtime.InteropServices.Marshal</a> class cannot marshal a variable length array, as it needs to know in advance how big the array is in order to allocate memory. That's why the managed structure needs SizeConst specified in the MarshalAs attribute.<br /><br />However, if the DNS TXT record data contains multiple quoted strings separated by whitespace, DnsQuery will return a structure with a variable number of elements in pStringArray. Since SizeConst is set at compile-time, when we marshal this into the managed struct defined above, we only get the first element in our single-element array. Rats.<br /><br />More googling turned up very little info on dealing with this, though I found indications that others had run into the same problem without finding a satisfactory conclusion. DnsQuery is not the only Win32 function that returns variable-length arrays, and p/invoking any of the others has the same issue.<br /><br />Simply declaring SizeConst to be bigger than we need - "hey, I know I'll never get more than 10 or so strings back, so why not declare SizeConst to be 128?" - is inelegant (hardcoded upper limits, ugh) and doesn't work properly anyway. Since the struct layout is sequential the marshaller will copy over (e.g.) 128*sizeof(IntPtr) sequential bytes (a total of 512 bytes, in this case). That much memory was never allocated on the unmanaged side, so we end up with a load of junk in the tail of pStringArray, and more often than not the marshaller chokes on this junk and throws an AccessViolationException. Fun.<br /><br />There IS a way to get round the problem, though. I'm not sure it's the best way, but it works and seems stable, so I thought I'd throw it out there in case anyone else can use it (or maybe explain to me why it's an unsafe stupid thing to do...)<br /><br />Basically, since we're dealing with sequential memory, we can use Marshal.PtrToStructure to marshal the DNS_TXT_DATA structure as defined above, then use pointer arithmetic to gain access to any further data that needs marshalling.<br /><br />Pointer arithmetic? Oh yes, even in the safe and secure world of managed code it's sometimes still necessary to get our hands dirty, and situations like this illustrate that it will always be valuable to have some hard-earned Assembly/C/C++ war wounds.<br /><br />So, assuming we have valid p/invoke declarations and data structures (I've included a complete source program below), DnsQuery is called like so:<br /><pre name="code" language="csharp">var pServers = IntPtr.Zero;<br />var ppQueryResultsSet = IntPtr.Zero;<br />var ret = DnsQuery(domain,<br />        DnsRecordType.TEXT,<br />        DnsQueryType.STANDARD,<br />        pServers,<br />        ref ppQueryResultsSet,<br />        IntPtr.Zero);<br />if (ret != 0)<br />    throw new ApplicationException("DnsQuery failed: " + ret);</pre><br />If we examine the memory location of ppQueryResultsSet (Ctrl-Alt-M,1 or Debug->Windows->Memory->Memory1 in Visual Studio) we'll see something like the following (actual address locations may vary - just copy the int value of ppQueryResultsSet to the Address bar of the memory window):<br /><pre>0x049E0878&nbsp; 00 00 00 00&nbsp; ....<br />0x049E087C&nbsp; b8 09 9e 04&nbsp; ¸.ž.<br />0x049E0880&nbsp; 10 00 20 00&nbsp; .. .<br />0x049E0884&nbsp; 19 30 00 00&nbsp; .0..<br />0x049E0888&nbsp; 00 00 00 00&nbsp; ....<br />0x049E088C&nbsp; 00 00 00 00&nbsp; ....<br />0x049E0890&nbsp; 06 00 00 00&nbsp; ....<br />0x049E0894&nbsp; b8 08 9e 04&nbsp; ¸.ž.<br />0x049E0898&nbsp; d8 08 9e 04&nbsp; Ø.ž.<br />0x049E089C&nbsp; f8 08 9e 04&nbsp; ø.ž.<br />0x049E08A0&nbsp; 28 09 9e 04&nbsp; (.ž.<br />0x049E08A4&nbsp; 68 09 9e 04&nbsp; h.ž.<br />0x049E08A8&nbsp; 88 09 9e 04&nbsp; ˆ.ž.</pre><br />I've set the column size to 4 here, as most of the values we are dealing with are 4 bytes in size. This effectively shows one value per line.<br /><br />The first 6 rows (24 bytes) correspond to the DNS_RECORD structure up until (but not including) the DNS_TXT_DATA structure in DNS_RECORD's Data union. We can marshal this first structure without problem:<br /><pre name="code" language="csharp">var dnsRecord = (DnsRecord) Marshal.PtrToStructure(<br />        ppQueryResultsSet, typeof (DnsRecord));</pre><br />The DNS_TXT_DATA structure starts at address 0x049E0890 in my example. Having already marshalled the DNS_RECORD structure, now I want a pointer to the DNS_TXT_DATA structure. I can do this by creating a new pointer at the address of ppQueryResultsSet plus 24 bytes, and marshalling again:<br /><pre name="code" language="csharp">var ptr = new IntPtr(<br />        ppQueryResultsSet.ToInt32() + Marshal.SizeOf(dnsRecord));<br />var txtData = (DNS_TXT_DATA) Marshal.PtrToStructure(<br />        ptr, typeof (DNS_TXT_DATA));</pre><br />Because of the definition of DNS_TXT_DATA, this only marshals 8 bytes - 4 bytes for dwStringCount, and 4 bytes for the single element in pStringArray (an IntPtr). Since we know the memory is sequential, however, this gives us everything we need - we now know how many strings have been received (6 in this case, as indicated at 0x049E0890), and the location of the pointer to the first string (0x049E0894).<br /><br />With this info, we can marshal all the pointers into an array with a length of dwStringCount:<br /><pre name="code" language="csharp">ptr = new IntPtr(ptr.ToInt32() + sizeof (uint)); // move to first<br />var ptrs = new IntPtr[txtData.dwStringCount]; // dest array<br />Marshal.Copy(ptr, ptrs, 0, ptrs.Length);</pre><br />And finally we iterate through those pointers, marshalling the string pointed at by each:<br /><pre name="code" language="csharp">var strings = new List<string>();<br />for (var i = 0; i < ptrs.Length; ++i)<br />{<br />    strings.Add(Marshal.PtrToStringAnsi(ptrs[i]));<br />}</string></pre><br />While the example I've presented here is specific to DnsQuery, the general approach should be applicable to any situation where you need to marshal a data structure containing a variable-length array.<br /><br /><a href="http://basildoncoder.com/marshal-variable-length-array.cs">Source code</a>]]></content:encoded>
      <category domain="tag">Data Structures</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2009/03/marshalling-variable-length-array-from.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>195</wp:comment_id>
        <wp:comment_author>emergency cell phone chargers</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-04-29 02:27:05</wp:comment_date>
        <wp:comment_date_gmt>2009-04-29 02:27:05</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Interesting and useful info - thanks for informing all of us. Nate]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>207</wp:comment_id>
        <wp:comment_author>flashy</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://zizini.org/bookmarks.php/Lester393</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-12-03 15:15:11</wp:comment_date>
        <wp:comment_date_gmt>2009-12-03 15:15:11</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Any information on your sources though?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>208</wp:comment_id>
        <wp:comment_author>Tratcher</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-12-22 22:48:42</wp:comment_date>
        <wp:comment_date_gmt>2009-12-22 22:48:42</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Very Helpfull, thanks.<br /><br />I will note that this:<br />ptr = new IntPtr(ptr.ToInt32() + sizeof (uint)); // move to first<br />should be:<br />ptr = new IntPtr(ptr.ToInt32() + IntPtr.Size); // move to first<br /><br />And PtrToStringAnsi should be PtrToStringAuto.<br /><br />This handles padding issues on 64bit OS&#39;s.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>210</wp:comment_id>
        <wp:comment_author>Roman</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-02-07 13:25:11</wp:comment_date>
        <wp:comment_date_gmt>2010-02-07 13:25:11</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Thank you for the information, it is exactly what I was looking for.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>232</wp:comment_id>
        <wp:comment_author>Softwerx</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-12-14 07:24:51</wp:comment_date>
        <wp:comment_date_gmt>2010-12-14 07:24:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Thank you! Was just what I was looking for to solve a marshaling issue with my embedded XulRunner component.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>258</wp:comment_id>
        <wp:comment_author>elizabethhux</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/13516563532129406430</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-11-28 13:17:37</wp:comment_date>
        <wp:comment_date_gmt>2011-11-28 13:17:37</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Indeed, it&#39;s the best way you ever did. This is what I&#39;m looking for around the web because looking for a solution too.<br /><br />Elizabeth<br />Webmaster ~&quot;<a href="http://www.howtohousetrainpuppy.com/how-to-potty-train-a-dog/" rel="nofollow">How to potty train a dog</a>&quot;~]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Project Euler Problem 8</title>
      <link>http://blog.basildoncoder.com/2009/02/project-euler-problem-8.html</link>
      <pubDate>Mon, 09 Feb 2009 19:30:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>7</wp:post_id>
      <wp:post_date>2009-02-09 19:30:00</wp:post_date>
      <wp:post_date_gmt>2009-02-09 19:30:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-8</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<a href="http://projecteuler.net/index.php?section=problems&amp;id=8"><em><strong>Problem 8</strong></em></a><br /><blockquote>"Find the greatest product of five consecutive digits in the 1000-digit number.<br /><br />73167176531330624919225119674426574742355349194934<br />96983520312774506326239578318016984801869478851843<br />85861560789112949495459501737958331952853208805511<br />12540698747158523863050715693290963295227443043557<br />66896648950445244523161731856403098711121722383113<br />62229893423380308135336276614282806444486645238749<br />30358907296290491560440772390713810515859307960866<br />70172427121883998797908792274921901699720888093776<br />65727333001053367881220235421809751254540594752243<br />52584907711670556013604839586446706324415722155397<br />53697817977846174064955149290862569321978468622482<br />83972241375657056057490261407972968652414535100474<br />82166370484403199890008895243450658541227588666881<br />16427171479924442928230863465674813919123162824586<br />17866458359124566529476545682848912883142607690042<br />24219022671055626321111109370544217506941658960408<br />07198403850962455444362981230987879927244284909188<br />84580156166097919133875499200524063689912560717606<br />05886116467109405077541002256983155200055935729725<br />71636269561882670428252483600823257530420752963450"</blockquote><br />The first step here is to find a representation for that fairly humungous number. Obviously it's not going to fit into a paltry 32-bit int...but then we don't need it to. The problem description requires us to think in terms of smaller (5-digit) numbers, not one giant 1000-digit number.<br /><br />So, it is sufficient for us to consider the number as an enumerable stream of single digits, which we can conveniently represent as IEnumerable<int>. I could use a macro to convert the number into a collection initialiser, but it's much easier to treat the string as an IEnumerable<char></char><char> and let LINQ do the heavy lifting.</char></int><br /><pre name="code" language="csharp"><br />var nums = Enumerable.AsEnumerable(<br />        "73167176531330624919225119674426574742355349194934" +<br />        "96983520312774506326239578318016984801869478851843" +<br /><br />        // ..... etc etc ......<br /><br />        "05886116467109405077541002256983155200055935729725" +<br />        "71636269561882670428252483600823257530420752963450"<br />        ).Select(x => Convert.ToInt32(x.ToString()));</pre><br />This gives us an IEnumerable<int></int><int> containing every digit in the 1000-digit number. Now, the 'obvious' way to solve the problem is to iterate through the collection, and at each index multiply the value against the next four indexes. A simple loop should deal with it:</int><br /><pre name="code" language="csharp"><br />private static int SimpleSolver(int[] ints)<br />{<br />    int max = 0;<br />    for (int i = 0; i < ints.Length - 4; i++)<br />    {<br />        int tmp = ints[i] * ints[i + 1] * ints[i + 2]<br />            * ints[i + 3] * ints[i + 4];<br />        max = Math.Max(max, tmp);<br />    }<br /><br />    return max;<br />}</pre><br />As ever, though, that's pretty ugly - the loop condition and product calculation is tied to the sequence size of 5, and messing with an index variable is tedious.<br /><br />An alternative approach is to take advantage of LINQ's Skip and Take methods to split the problem domain into overlapping 'slices'. Similar to the for loop above, the core of the approach is to iterate through the digits, and at each digit grab a number of subsequent digits and calculate the product.<br /><br />Lets look at the 5-digit slices available from the first 10 digits:<br /><pre><br />  7   3   1   6   7   1   7   6   5   3<br />|       73167       |<br />    |       31671       |<br />        |       16717       |<br />            |       67176       |<br />                |       71765       |<br />                    |       17653       |</pre><br />We can use Skip to progressively move the starting index forward, and Take to grab the 5 digits we need. So, starting with i=0, each successive slice can be sliced from the whole with:<br /><pre name="code" language="csharp"><br />var slice = ints.Skip(i++).Take(5);</pre><br />To calculate the product of the digits in the slice, we can use the Aggregate operation:<br /><pre name="code" language="csharp"><br />slice.Aggregate(1, (curr, next) => curr*next);</pre><br />We've met Aggregate before - it's basically a fold, which collapses a sequence to a single item by repeatedly applying an operation to an accumulating result.<br /><br />This can all be wrapped up as an iterator block, like so:<br /><pre name="code" language="csharp"><br />private static IEnumerable<int> EnumerateSlices(<br />        IEnumerable</int><int> ints, int sliceSize)<br />{<br />    int i = 0;<br />    while (true)<br />    {<br />        var slice = ints.Skip(i++).Take(sliceSize);<br /><br />        if (slice.Count() < sliceSize)<br />            yield break; // end<br /><br />        yield return slice.Aggregate(1,<br />                (curr, next) => curr*next);<br />    }<br />}</int></pre><br />Note the termination condition - when we have enumerated every slice, our next slice will contain only 4 elements (3, 4, 5, and 0 from the end of the sequence) - that's our cue to exit the loop.<br /><br />Also note that this approach makes the algorithm trivial to parameterize - it will work just as well with slice sizes other than 5.<br /><br />This iterator will produce an IEnumerable<int> containing the products of all slices, so the final step is to select the largest:</int><br /><pre name="code" language="csharp"><br />var result = EnumerateSlices(nums, 5).Max();</pre>]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2009/02/project-euler-problem-8.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>189</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-02-10 04:04:38</wp:comment_date>
        <wp:comment_date_gmt>2009-02-10 04:04:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Blast, that didn&#39;t go well, posting-wise....]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>190</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-02-10 19:27:59</wp:comment_date>
        <wp:comment_date_gmt>2009-02-10 19:27:59</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[<a href="http://use.perl.org/~colomon/journal/38449" rel="nofollow">Can I link to a properly formatted version?</a>]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>230</wp:comment_id>
        <wp:comment_author>Solution for Problem 8 of Project Euler in C# | Geekfun</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://geekfun.groenstue.dk/2010/solution-to-problem-8-of-project-euler/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-11-07 08:05:01</wp:comment_date>
        <wp:comment_date_gmt>2010-11-07 08:05:01</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] at Basildon Coder he has chosen to represent the input as an list of integers, that means he will not have to convert [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>241</wp:comment_id>
        <wp:comment_author>Solution for Problem 8 of Project Euler in C# | Mathblog</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.mathblog.dk/2010/solution-to-problem-8-of-project-euler/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-03-05 10:17:25</wp:comment_date>
        <wp:comment_date_gmt>2011-03-05 10:17:25</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] I have chose to represent the input number as a string, and then converting them on the fly.Over at Basildon Coder he has chosen to represent the input as an list of integers, that means he will not have to convert [...]]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Killing and Reviving an Aspire One</title>
      <link>http://blog.basildoncoder.com/2009/02/killing-and-reviving-aspire-one.html</link>
      <pubDate>Sun, 08 Feb 2009 21:01:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>8</wp:post_id>
      <wp:post_date>2009-02-08 21:01:00</wp:post_date>
      <wp:post_date_gmt>2009-02-08 21:01:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Killing-and-Reviving-an-Aspire-One</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I just spent 2 hours reviving my Aspire One netbook after inadvertently killing it whilst fiddling about configuring <a href="http://www.getdropbox.com">dropbox</a>. I found the whole process unnecessarily fiddly and information on the interwebs to be a bit scarcer than I would have liked, so I'm documenting it here in case I need it in the future. Hopefully it'll be useful to someone else too.<br /><br />So, the cause of death was a typo when trying to set up the dropboxd daemon to start automatically on boot. I'm not running nautilus so couldn't use one of the prepackaged releases, and it's completely my fault that I made a mess of installing the vanilla x86 build.<br /><br />After making the fatal change and rebooting, the system would only boot up to a blank black screen with a default X mouse cursor. This is because the system was trying to run my broken command, failing, and therefore never getting to the main desktop.<br /><br />In the world of normal linux, there's all sorts of ways of dealing with this, but despite plenty of googling I couldn't find a way to use run-level 2 or 3 on an Aspire One, and the Ctrl+Alt+F1-F6 key combos for switching away from X to a terminal don't work either. There seems to be no way of preventing the system following the same doomed process over and again if you break X.<br /><br />Frustrated, I thought about using the restore disk, but that's a nuclear option - it re-paves the whole machine, so bye-bye data. That seemed a bit drastic when all I needed to do was edit a single text file to fix the system.<br /><br />Ironically, this was happening as a result of me trying to install a file sync system as a simple backup. Grr.<br /><br />Still, like countless thousands before me, I was saved by a live linux distro - in this case, a USB bootable one (since the Aspire One has no optical drive). Following the <a href="http://www.pendrivelinux.com/feather-linux-on-usb/">instructions</a><sup>[1]</sup> at <a href="http://www.pendrivelinux.com/">pendrivelinux</a> I created a bootable Feather Linux USB drive, and booted the netbook from it by hitting F12 on the post screen and selecting to boot from the USB stick.<br /><br />At the boot prompt, I used 'knoppix 3' to boot the system up to a command line, mounted /dev/hdc1 as an ext2 filesystem, and fixed my typo. Reboot, and tada! Everything was working again (well, after hitting Fn-F7 to reenable the touchpad, which I had accidentally disabled whilst mashing the keyboard in frustration at the sight of a blank screen about an hour earlier, heh).<br /><br /><sup>[1]</sup> Note that I had to use a newer version of syslinux than the one referenced on pendrivelinux. <a href="http://www.kernel.org/pub/linux/utils/boot/syslinux/Old/syslinux-3.36.zip">This one </a>worked for me.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2009/02/killing-and-reviving-aspire-one.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Macros: You Oughta Know</title>
      <link>http://blog.basildoncoder.com/2009/02/macros-you-oughta-know.html</link>
      <pubDate>Fri, 06 Feb 2009 15:03:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>9</wp:post_id>
      <wp:post_date>2009-02-06 15:03:00</wp:post_date>
      <wp:post_date_gmt>2009-02-06 15:03:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Macros:-You-Oughta-Know</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[One of the most useful tools available in any decent text editor is the macro recorder, but it's criminally underused. It seems most people either don't know the functionality exists, or simply ignore it. This is a shame, since it's a great timesaver.<br /><br />I don't know why macros are so underused. It might be a mindset thing - it can take a little while to develop the ability to spot repetitive editing tasks quickly (i.e. not when you're 75% of the way through thinking <em>dang, I have to do this again?</em>), so maybe many people never quite make the leap.<br /><br />It's worth it though, because once you get your eye in you see chances to use macros everywhere.<br /><br />I had a useful example just yesterday, in which I needed to make a change to a colossal switch statement (220 branches! Run the cyclomatic-complexity doohickey on THAT!) and had no unit tests to fall back on.<br /><br />If I had to modify (and hopefully refactor) such a huge construct I wanted to be able to compare before-and-after test results, but I didn't much fancy hand-cranking a few hundred unit tests.<br /><br />By recording a temporary macro, however, it took just a couple of minutes to cover every branch. I've decided to post a detailed walkthrough of the process here in the hopes that a fairly simple example will be illustrative for those that don't already lean heavily on macros.<br /><br />Note that <em>this is not an advanced tutorial</em>. Please refrain from leaving snarky comments about how macros are so much more powerful than this - I'm just doing some introductory material here :-)<br /><br />Here is a representative snippet of the C# source. It's part of a legacy permissioning system that, under certain circumstances, needs to check for the existence of a permission represented by an enum against a permission table containing a string-based hierarchy (application/role/permission). The code I was modifying did the appropriate conversion:<br /><pre name="code" language="csharp"><br />    case PermissionKey.SecurityParameterManagementAdd:<br />    {<br />        return new string[] {"Security", "ParameterManagement", "Add"};<br />    }<br />    case PermissionKey.SecurityRoleManagementAdd:<br />    {<br />        return new string[] {"Security", "RoleManagement", "Add"};<br />    }<br />    case PermissionKey.SecurityRoleManagementModify:<br />    {<br />        return new string[] {"Security", "RoleManagement", "Modify"};<br />    }<br />    case PermissionKey.SecurityUserManagementDelete:<br />    {<br />        return new string[] {"Security", "UserManagement", "Delete"};<br />    }<br />    case PermissionKey.SecurityPermissionManagementAdd:<br />    {<br />        return new string[] {"Security", "PermissionManagement", "Add"};<br />    }</pre><br />I needed to add a couple of branches to this, but I also wanted to tidy up the code by removing the superfluous braces, as a precursor to converting it into something a bit more robust and maintainable. I wanted unit test coverage to give me confidence that I hadn't mucked up some logic and inadvertantly granted admin access to the helpdesk trainee role or something.<br /><br />So, I copied the entire switch body into Notepad++ (well, vim really, but I'll pretend it's Notepad++ for the sake of making this post a bit more accessible) and set to work<sup>[1]</sup>.<br /><br />Before recording my macro, I needed to do a bit of preprocessing to trim the code down to just the data I wanted to work with. The following steps show the 'find' regexes I used (in each case, the value of the replace field was empty, so these are effectively deletes), and the effect on the first switch branch from the list above:<br /><br />1) Remove opening and closing braces from every switch branch:<br /><pre>^\s+[\{\}]$</pre><br /><pre name="code" language="csharp"><br />    case PermissionKey.SecurityParameterManagementAdd:<br /><br />        return new string[] {"Security", "ParameterManagement", "Add"};</pre><br />2) Remove blanks - TextFX/Edit/Delete Blank Lines<br /><pre name="code" language="csharp"><br />    case PermissionKey.SecurityParameterManagementAdd:<br />        return new string[] {"Security", "ParameterManagement", "Add"};</pre><br />3) Remove case statements and leading whitespace:<br /><pre>^\s+case\s+</pre><br /><pre name="code" language="csharp">PermissionKey.SecurityParameterManagementAdd:<br />PermissionKey.SecurityParameterManagementAdd:<br />        return new string[] {"Security", "ParameterManagement", "Add"};</pre><br />4) Remove colon from end of case statement:<br /><pre>:$</pre><br />5) Remove return statement and leading whitespace:<br /><pre>^\s+return new string\[\]\s*</pre><br />I ended up with a sequence of couplets looking similar to this one:<br /><pre name="code" language="csharp"><br />PermissionKey.SecurityParameterManagementAdd<br />{"Security", "ParameterManagement", "Add"};</pre><br />Now the fun starts - lets walk through the process.<br /><br />We want to convert the first couplet into a simple unit test fixture, and record the process. This will be our macro - the instructions for converting one couplet into one unit test. We can then play the macro multiple times to convert all the others effortlessly.<br /><br />Start by moving the cursor to the start of the line, before the 'P' of PermissionKey. This is the start point of the macro, so for the macro to be repeatable we must make sure that we finish recording the macro in perfect position to run it again, i.e. before the 'P' of PermissionKey for the next couplet (column 0 line 3). Hit Ctrl-Shift-R to start recording.<br /><br />It is important not to use the mouse when editing - stick to the keyboard. It's also important not to record keystrokes that are too specific to one bit of code. For instance, don't use the arrow keys to move left and right character-by-character, because it won't work on longer or shorter lines.<br /><br />Instead, use the Home and End keys to jump to the start or end of the line, and hold Ctrl whilst arrowing left or right to move a word at a time instead of a character at a time (this is one of the areas where vim's movement commands really differentiate it from wannabes like Notepad++...but I digress). See the 'Detailed Instructions' section below for more information.<br /><br />Assume the original switch body is in a method called 'LookupEnumPermission'. The couplet should be edited to look like this (without the linewrap...):<br /><pre name="code" language="csharp"><br />[Test]<br />public void TestSecurityParameterManagementAdd()<br />{<br />    string[] result = LookupEnumPermission(<br />            PermissionKey.SecurityParameterManagementAdd);<br />    Assert.AreEqual("Security", result[0]);<br />    Assert.AreEqual("ParameterManagement", result[1]);<br />    Assert.AreEqual("Add", result[2]);<br />}</pre><br />Make sure you finish by moving the cursor into position for the next couplet, and hit Ctrl-Shift-R again to stop recording.<br /><br />Now, hit Ctrl-Shift-P to play back the macro. If you've done everything right, the next couplet should magically format itself into a unit test. Hit Ctrl-Shift-P again, and the next couplet will change too. Under the Macro menu, select 'Run a macro multiple times...' and you can enter a fixed number of iterations, or just apply the macro over and over again until the end of the file is reached.<br /><br />Finally, you can copy the unit tests into a new or existing test fixture, and you're done! In much less time (hopefully) and with fewer errors than if the tests had been written one-by-one.<br /><br /><em><strong>Detailed Instructions:</strong></em><br /><br />These are ley-by-key instructions in Notepad++, in case something in the description above is unclear. Visual Studio should be similar. Vim will be faster once you've learned how, but I'll assume if you use vim you're already au fait with this sort of editing :-)<br /><ol><br /><li>Type [Test], and hit enter to start a new line.</li><br /><li> Type 'public void Test' and hit Enter.</li><br /><li> Type '{' and hit Enter, then Tab.</li><br /><li> Hold Ctrl and tap the right arrow twice to jump over a couple of words and place the cursor at the start of the word SecurityParameterManagementAdd, then hold Ctrl-Shift and right arrow again to select the word. Ctrl-C to copy, then arrow up two lines and paste it after the word 'Test' to create the full function name TestSecurityParameterManagementAdd. Type () for the empty parameter list.</li><br /><li> Arrow down two lines and hit Home to jump to the start of the line. Type 'string[] result = LookupEnumPermission(', then hit End to jump to the end of the line and type ');'.</li><br /><li> Arrow down one line, hit Home, then Tab. Type 'Assert.Equals(' then hit Delete to remove the '{'. Hold Ctrl and move right three times (to move the cursor just past the comma) and type 'result[0]);' and hit Enter.</li><br /><li> Repeat variations of step 7 a couple of times to convert the next two lines. Remember to use the correct indexes (result[1] and result[2]). Hit Enter after the last line and type '}' to close the function body.</li><br /><li> Arrow down one line and hit Home to place the cursor at the correct start position for the next couplet, and end the macro by hitting Ctrl-Shift-R again.</li></ol><br /><sup>[1]</sup>I could have just done this in a new file in Visual Studio, but for some reason I find VS intolerably slow at running macros once recorded. So slow, in fact, that you can watch the cursor laboriously complete each step - I wind up thinking it would have been quicker to do it manually. That might just be something odd about my VS installation though, as no-one else seems to think it's slow.]]></content:encoded>
      <category domain="tag">Refactoring</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2009/02/macros-you-oughta-know.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>OOD - The Second Coming</title>
      <link>http://blog.basildoncoder.com/2009/01/ood-second-coming.html</link>
      <pubDate>Fri, 16 Jan 2009 16:00:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>10</wp:post_id>
      <wp:post_date>2009-01-16 16:00:00</wp:post_date>
      <wp:post_date_gmt>2009-01-16 16:00:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>OOD---The-Second-Coming</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Over the last couple of months I've been burning up my free time on a pet project (hence the scarcity of posting here). This particular project is a web application, and since I've always been a desktop or middle-tier dude in my day job, it's a bit of a step out of my normal environment to grapple with browser compatibility and suchlike.<br /><br />Still, I wanted it to be a decent learning experience, so after a brief dalliance with Rails I scrapped the idea of using any <a href="http://basildoncoder.com/blog/2007/12/09/coding-by-convention/">framework sorcery</a> and decided to write everything in plain ol' <a href="http://php.net/">PHP</a>, and lean heavily on <a href="http://developer.yahoo.com/yui/">YUI</a> and <a href="http://jquery.com/">jQuery</a> to sort out the browser stuff.<br /><br />This probably isn't an approach I'd use in future projects, but I bet I'll appreciate those frameworks a lot more once I've encountered and understood the problems they attempt to solve.<br /><br />So, having strayed from the comfort of <a href="http://rubyonrails.org/">Rails</a> and its clones, I had to think about lots of things like security, validation, data access, and how to organise my code. Just because I'd abandoned the training wheels I had no intention of falling over all the time - I still wanted a nice, maintainable app with sensible  abstractions, properly decoupled, and resilient to failure. Time to start reading articles and the odd open source project, obviously.<br /><br />It's at this point I noticed something interesting. Since I regularly read plenty of development websites it could scarcely have escaped my notice that the trendy framework players (e.g. Rails, Django, Cake, ASP.NET MVC) strongly advocate the <a href="http://en.wikipedia.org/wiki/Model-view-controller">MVC</a> pattern and <a href="http://en.wikipedia.org/wiki/Class-based_programming">class-based object-oriented design</a>. What I hadn't really realised until now is how endemic that viewpoint had become.<br /><br />In fact, beyond a few admirably out-there frameworks like <a href="http://www.seaside.st/">Seaside</a>, it's almost universal. OOD = good, EVERYTHING ELSE = bad. MVC = good, EVERYTHING ELSE = bad. No shades of grey, no room for dissenting opinion.<br /><br />Go anywhere where best-practices are discussed and mention you're writing some procedural code, and watch the fireworks. It doesn't matter if your application has fewer lines of code than a newly-created Rails app has source files - if you haven't structured it with models, views, and controllers you may as well have written it in Visual Basic for all the bile you're going to have thrown at you.<br /><br />If you say you're writing functional code, you might get away with it, since functional programming is still widely misunderstood and you'll likely be classified as some weird LISPer or Schemer doing something arcane and thus ignored.<br /><br />Ironically, of course, if you grab a random Rails/Django/Cake app from <a href="http://github.com/">github</a> or <a href="http://code.google.com/hosting/">Google Code</a>, there's a pretty fair chance that what you'll find isn't particularly object-oriented anyway. Hint - usage of the 'class' keyword does not an object-oriented design make. And sweet zombie Jesus, I've never seen such abuse of the singleton pattern. That's a sure sign someone doesn't 'get' OO - the <a href="http://c2.com/cgi/wiki?SingletonsAreEvil">singleton pattern is evil</a> and basically a way to <a href="http://steve.yegge.googlepages.com/singleton-considered-stupid">shoehorn globals into an application</a> without admitting it to your friends.<br /><br />So, we have massive fanatical advocacy of a technique that will allegedly solve all your problems, coupled with large-scale real-world misunderstandings and misapplication. Does this remind anyone of anything? Say, for example, the last time OOD swept the world, panacea to all programming woes, about 20 or so years ago?<br /><br />Don't get me wrong, I'm not arguing that class-based OO itself is just a fad - it deserves its place as a paradigm alongside procedural, functional, parallel, and numerous others. It's the heralding of OO as the one true way that seems faddish.<br /><br />So, in the very best "bah, humbug" traditions I've written my app in unashamedly procedural PHP code. I don't mix my presentation and content. My data layer is decoupled and unit tested. Every bit of SQL is a parameterised query, to guard against injection. I don't have a single echo() statement containing any html tags. All my errors are exception based, and I don't have a single die() call anywhere. My average function size is about 10 lines, and my longest is about 20. I've no doubt that there's a legion of 15-year-old self-appointed geniuses ready to accuse me of inflicting yet more spaghetti code junk on the world just because "find . -iname '*php' | xargs grep class" comes up empty, but hey I'm OK with that.<br /><br />I'm writing my next app in <a href="http://en.wikipedia.org/wiki/Brainfuck">brainf*ck</a> using ed.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2009/01/ood-second-coming.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>183</wp:comment_id>
        <wp:comment_author>rgeyer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.nslms.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-01-17 18:16:29</wp:comment_date>
        <wp:comment_date_gmt>2009-01-17 18:16:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I&#39;ve recently tossed up a quick community site.  And while it&#39;s not a &quot;web app&quot; in the truest sense, I am working on adding some unique functionality.<br /><br />I chose to use the Drupal CMS, and there ain&#39;t a shred of OO PHP in it at all, and I think it&#39;s a very well build and thought out framework.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>184</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-01-19 18:47:28</wp:comment_date>
        <wp:comment_date_gmt>2009-01-19 18:47:28</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Considering that both Java and C# force you to use &quot;OOD&quot;, can it be any surprise that many of the current frameworks trend that way?  We&#39;re working on creating an entire generation of programmers who have only worked in languages that force you to wrap everything in a class, no matter how inappropriate that approach is to the problem at hand....]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>185</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-01-20 14:21:22</wp:comment_date>
        <wp:comment_date_gmt>2009-01-20 14:21:22</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Sol,<br /><br />I&#39;d agree with you if all these frameworks were written in java or C#. My degree required passes in courses using C++, 68000 assembly, Haskell (and, yes, java), and I think it&#39;s a shame that so many degrees these days are so narrow.<br /><br />However, some of the worst culprits of the framework/OO lovefest are those using python and ruby, both of which have reasonable functional constructs and don&#39;t require you to use classes (well, not explicitly anyway). Yet still the tunnel-vision remains. <br /><br />It&#39;s particularly baffling given that Seaside&#39;s continuation-passing style is a genuine improvement in handling complex multi-page interactions over mucking around shuttling stuff to and from the model in typical MVC. Yet, as someone on reddit pointed out recently, Seaside will probably be obsoleted soon by increasingly powerful client-side javascript tools that solve the same problems less elegantly but more fashionably. Shame.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>188</wp:comment_id>
        <wp:comment_author>dudeguy</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.google.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-02-01 09:01:58</wp:comment_date>
        <wp:comment_date_gmt>2009-02-01 09:01:58</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[It&#39;s ok to have a comment.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>198</wp:comment_id>
        <wp:comment_author>eti</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.erata.net</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-08-03 16:26:07</wp:comment_date>
        <wp:comment_date_gmt>2009-08-03 16:26:07</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Russ,<br /><br />Great post. I guess in the end it all comes down to &quot;Use the best tool for the job&quot;. And don&#39;t be afraid to mix things if it makes sense. It&#39;s also true that OOP has it&#39;s merits and there are cases where OOP makes expressing your code easier. Usually this is more visible on more complex cases than on simple ones.<br /><br />And finally about ASP.NET MVC ... i love it, even if a big part of it is using extension methods witch are just syntax sugar for free functions. They make perfect sense in the context. <br /><br />Again, great post and great blog.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Project Euler Problem 7</title>
      <link>http://blog.basildoncoder.com/2008/10/project-euler-problem-7.html</link>
      <pubDate>Sun, 26 Oct 2008 21:58:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>11</wp:post_id>
      <wp:post_date>2008-10-26 21:58:00</wp:post_date>
      <wp:post_date_gmt>2008-10-26 21:58:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-7</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<em><strong><a href="http://projecteuler.net/index.php?section=problems&amp;id=7">Problem 7</a></strong></em><br /><blockquote>By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13, we can see that the 6<sup>th</sup> prime is 13.<br /><br />What is the 10001<sup>st</sup> prime number?</blockquote><br />Ah, what a nice, straightforward, unambiguous spec! If only business software specifications were so precise.<br /><br /><a href="http://basildoncoder.com/blog/2008/04/07/project-euler-problem-3/">Way back in problem 3</a>, I took a bit of a wander off-topic and built a prime generator in .Net using the <a href="http://en.wikipedia.org/wiki/Sieve_of_eratosthenes">Sieve of Eratosthenes</a>. Armed with this, problem 7 should be easy, right? The sieve implementation generates an IEnumerable<long>, which is non-indexable (i.e. I can't just say Primes()[10001]), but I can take the first 10,001 and then ask for the last element, which will be the answer to the problem.</long><br /><br />There's a problem with this, however. The sieve requires an upper bound during initialisation. This means it's great for solving problems like "generate all the primes less than 10,001", but not so great at answering questions like "what is the 10,001st prime number?", since it requires foreknowledge of the upper bound.<br /><br />To illustrate the problem, I'll take a wild guess at the upper bound. I'm going to guess that the 10,001st prime number is less than 99,999. What happens?<br /><pre name="code" language="csharp"><br />var sieve = new SieveOfEratosthenes(99999);<br />var result = sieve.Primes().Take(10001).Last();</pre><br />This generates an answer of 99,991. If I enter this into the Project Euler website, however, it tells me the answer is wrong. Gah! What went wrong? A simple test reveals the problem:<br /><pre name="code" language="csharp"><br />var sieve = new SieveOfEratosthenes(99999);<br />var primes = sieve.Primes().Take(10001);<br />var count = primes.Count();</pre><br />There's only 9,592 primes generated! As the <a href="http://msdn.microsoft.com/en-us/library/bb503062.aspx">docs for Take()</a> state (emphasis mine):<br /><blockquote>Take<tsource></tsource><tsource> enumerates source and yields elements until count elements have been yielded <em>or source contains no more elements</em>.</tsource></blockquote><br />Damn. So, looks like my 99,999 guess was too small - with that as an upper bound, the sieve only finds 9,592 primes, and I need the 10,001st. OK, I'll bump it up by an order of magnitude:<br /><pre name="code" language="csharp"><br />var sieve = new SieveOfEratosthenes(999999);<br />var result = sieve.Primes().Take(10001).Last();</pre><br />This gives me the correct answer. Not exactly a wonderful solution though; the idea of having to guess the upper bound is pretty horrendous, and if this was real code it wouldn't be particularly maintainable - what if the requirements changed and we had to find the <em>n</em>th prime, which happened to be >99,999? We'd have to guess again. Ugh.<br /><br />Worse, the sieve algorithm precomputes all the primes up to the specified upper bound, meaning that in the above approach I've asked the sieve to generate primes up to 999,999 (all 78,498 of them!) despite only needing 10,001. Not very efficient.<br /><br />Fortunately, the upper bound can be calculated separately. <a aiotarget="false" aiotitle="Where n &gt;8601, as in this case, we can use the following equation">8601, as in this case, we can use the following equation" href="http://primes.utm.edu/howmany.shtml">Where <em aiotitle="n">n</em>>8601, as in this case, we can use the following equation</a>:<br /><pre>p(<em>n</em>) <u><</u> <em>n</em> (log<sub>e</sub> <em>n</em> + log<sub>e</sub> log<sub>e</sub> <em>n</em> - 0.9427)</pre><br />where p(<em>n</em>) is the <em>n</em>th prime number.<br /><br />Alternatively, for flexibility in handling <em>n</em><8601, we can use the less accurate<br /><pre>p(<em>n</em>) < <em>n</em> log<sub>e</sub> log<sub>e</sub> <em>n</em></pre><br /><a href="http://en.wikipedia.org/wiki/Prime_number_theorem#Approximations_for_the_nth_prime_number">which works for <em>n</em>>5</a>. We can easily precompute the answers for <em>n</em><=5, or simply calculate on demand.<br /><br />The formula can be implemented on the sieve class, with a factory method to help when we want to use it:<br /><pre name="code" language="csharp"><br />public static SieveOfEratosthenes<br />    CreateSieveWithAtLeastNPrimes(int n)<br />{<br />    return new SieveOfEratosthenes((long)<br />            Math.Ceiling(UpperBoundEstimate(n)));<br />}<br /><br />private static double UpperBoundEstimate(int n)<br />{<br />    return n * Ln(n) + n * (Ln(Ln(n)));<br />}<br /><br />private static double Ln(double n)<br />{<br />    return Math.Log(n, Math.E);<br />}</pre><br />This leaves us with an overall solution like so:<br /><pre name="code" language="csharp"><br />var sieve = SieveOfEratosthenes.CreateSieveWithAtLeastNPrimes(10001);<br />var result = sieve.Primes().Take(10001).Last();</pre><br />This generates a total 10,018 primes, cutting the wasted effort from almost 70,000 superfluous primes to just 17, and takes around 20ms to execute on my machine. Plenty fast enough, I think.]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/10/project-euler-problem-7.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Look Before You Look Before You Leap</title>
      <link>http://blog.basildoncoder.com/2008/10/look-before-you-look-before-you-leap.html</link>
      <pubDate>Fri, 24 Oct 2008 15:32:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>12</wp:post_id>
      <wp:post_date>2008-10-24 15:32:00</wp:post_date>
      <wp:post_date_gmt>2008-10-24 15:32:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Look-Before-You-Look-Before-You-Leap</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Generally, I try to avoid turning this blog into some sort of <a href="http://www.google.co.uk/search?q=define%3Asnark">snark</a>-fest about other programmers or blogs. I've disagreed with Jeff Atwood <a href="http://basildoncoder.com/blog/2008/02/22/code-can-be-beautiful/">once</a> or <a href="http://basildoncoder.com/blog/2008/01/29/freedom-zero-the-all-or-nothing-fallacy/">twice</a> though, and so by posting this I'm probably straying a little close to the edge...but what the hell.<br /><br />A couple of days ago Coding Horror carried a <a href="http://www.codinghorror.com/blog/archives/001177.html">fluff piece</a> about how all developers should be marketers too. Predictably, the article soon got posted to <a href="http://www.reddit.com/r/programming/">proggit</a> where it was <a href="http://www.reddit.com/r/programming/comments/78vq3/jeff_atwood_finally_jumps_the_shark/">ripped on by reddit's resident Jeff-haters</a>, and even more predictably the comments were a mix of interesting insight and barely-concealed hate.<br /><br />Apparently some of them got up Jeff's nose a bit, and today he <a href="http://www.codinghorror.com/blog/archives/001178.html">responded</a>. The core of his rebuttal seems to be that you shouldn't trust what you read on blogs, and should verify everything yourself. True enough, I guess, if perhaps a bit impractical given the sheer amount of information out there.<br /><br />Then, however, Jeff goes on to give an example by referencing a <a href="http://blog.madskristensen.dk/post/Compression-and-performance-GZip-vs-Deflate.aspx">compression benchmark</a> he'd read on a blog and providing counter-analysis to show that the benchmark was wrong in claiming Deflate is faster than gzip. In doing so, much knowledge was gained.<br /><br />Or so we are told.<br /><br />The comment thread quickly becomes a goldmine of humour. Bugs in Jeff's benchmarking code (not resetting the stopwatch) meant that the durations were cumulative, not independent, with inevitable distortion of the results. Another commenter pointed out that <a href="http://en.wikipedia.org/wiki/Gzip">gzip</a> cannot possibly be faster than Deflate, since the gzip algorithm IS the Deflate algorithm plus some additional computation.<br /><blockquote>“gzip” is often also used to refer to the gzip file format, which is:<br /><ul><br /><li>a 10-byte header, containing a magic number, a version number and a timestamp</li><br /><li>optional extra headers, such as the original file name,</li><br /><li>a body, containing a DEFLATE-compressed payload</li><br /><li>an 8-byte footer, containing a CRC-32 checksum and the length of the original uncompressed data</li></ul><br /><div align="right"><a href="http://en.wikipedia.org/wiki/Gzip">http://en.wikipedia.org/wiki/Gzip</a></div><br /></blockquote><br />With the benchmarking code fixed, we see that Deflate is indeed slightly faster than gzip.<br /><br />All of which leads to repeated quotations from Jeff about the community being smarter than him, and some drastic toning down of language in post-publication edits to the article. I read a cached version of the RSS feed, which is markedly different to the article currently live on codinghorror.com - "on my box, GZip is twice as fast as Deflate" becomes "on my box, GZip is just as fast as Deflate", "Deflate is way slower. It's not even close" becomes "Deflate is nowhere near 40% faster", etc.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-SiXZJ_ezG08/UtQTU20iKoI/AAAAAAAACzc/zjhVQ1fq03M/s1600/codinghorror01.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://4.bp.blogspot.com/-SiXZJ_ezG08/UtQTU20iKoI/AAAAAAAACzc/zjhVQ1fq03M/s320/codinghorror01.png" width="318" /></a></div><br /><br />Anyone who's tackled a major performance problem will likely agree that profiling is a tremendously valuable technique that should always be applied before attempting to optimise (i.e. look before you leap). I think this little episode has highlighted a couple of important things to bear in mind, however:<br /><ol><br /><li>Profiling isn't a magic wand - if you use buggy profiling code, you are leading yourself up the garden path.</li><br /><li>Profiling is less useful when you can reason (in the mathematical sense) about the code. That involves <em>understanding the algorithms you are dealing with</em>. Gzip is Deflate plus a bit more processing - so unless that extra processing has a negative duration gzip must necessarily take longer. You don't need a profiler to work that out. Look <em>before </em>you look before you leap.</li></ol><br />Anyway, enough hatcheting from me, normal service will be resumed shortly.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/10/look-before-you-look-before-you-leap.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Project Euler Problem 6</title>
      <link>http://blog.basildoncoder.com/2008/08/project-euler-problem-6.html</link>
      <pubDate>Thu, 14 Aug 2008 01:00:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>13</wp:post_id>
      <wp:post_date>2008-08-14 01:00:00</wp:post_date>
      <wp:post_date_gmt>2008-08-14 01:00:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-6</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<div class="problem_content">Onwards to...</div><br /><em><strong><a href="http://projecteuler.net/index.php?section=problems&amp;id=6">Problem 6</a></strong></em><br /><blockquote>The sum of the squares of the first ten natural numbers is,<br /><div style="text-align: center;">1<sup>2</sup> + 2<sup>2</sup> + ... + 10<sup>2</sup> = 385</div><br />The square of the sum of the first ten natural numbers is,<br /><div style="text-align: center;">(1 + 2 + ... + 10)<sup>2</sup> = 55<sup>2</sup> = 3025</div><br />Hence the difference between the sum of the squares of the first ten natural numbers and the square of the sum is 3025 -&nbsp;385 = 2640.<br /><br />Find the difference between the sum of the squares of the first one hundred natural numbers and the square of the sum.</blockquote><br />Bit of a disappointment, problem 6; it's too easy. <a href="http://projecteuler.net/index.php?section=problems&amp;sort=difficulty">It's rated as the third-easiest</a>, i.e. easier than problems <a href="http://basildoncoder.com/blog/2008/04/07/project-euler-problem-3/">3</a>, <a href="http://basildoncoder.com/blog/2008/04/21/project-euler-problem-4/">4</a>, and <a href="http://basildoncoder.com/blog/2008/06/10/project-euler-problem-5/">5</a> which I've already covered. In fact, for my money it's easier than problem <a href="http://basildoncoder.com/blog/2008/03/22/project-euler-problems-1-and-2/">2</a> as well. Ah well, the difficulty ramps up soon enough, trust me.&nbsp; Here's the very simple python solution:<br /><pre language="python" name="code">sum_sq = sum([ x*x for x in xrange(1, 101)])<br />sq_sum = sum(xrange(1, 101)) ** 2<br /><br />print sq_sum - sum_sq</pre><br />As you can see, it's pretty intuitive. You sum the squares, square the sum, and calculate the difference. The answer is basically in the description, you just have to scale up a little.<br /><br />There's not much else to say about this one. Even if I abandon the functional approach and write a straightforward imperative solution it's still very straightforward. In (deliberately non-idiomatic, so don't whine at me) ruby:<br /><pre language="ruby" name="code">sum_of_squares = 0<br />sum = 0<br /><br />1.upto 100 do |x|<br />    sum_of_squares += x * x<br />    sum += x<br />end<br /><br />p (sum * sum) - sum_of_squares</pre>]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/08/project-euler-problem-6.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>169</wp:comment_id>
        <wp:comment_author>ASk</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-14 19:32:18</wp:comment_date>
        <wp:comment_date_gmt>2008-08-14 19:32:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[This is actually not a really good general solution.<br />Rephrase the question to say &quot;first 10^200 natural numbers&quot;. Solve it using your method.<br /><br />On the other hand, there are short formulas for the sum and the sum of squares, with number of terms that does not depend on n.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>173</wp:comment_id>
        <wp:comment_author>wrf3</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-30 16:07:30</wp:comment_date>
        <wp:comment_date_gmt>2008-08-30 16:07:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[To continue with ASk&#39;s line of thought: <br /><br />The sum of the first n numbers is:<br /><br />  1 + 2 + 3 + ... + n = n^2/2 + n/2<br /><br />The sum of the squares of the first n numbers is:<br /><br />  1^2 + 2^ + 3^2 + ... + n^2 = n^3/3 + n^2/2 + n/6<br /><br />So another solution to the problem is:<br /><br />   (n^2/2 + n/2)^2 - (n^3/3 + n^2/2 + n/6)<br /><br />or, simplified,<br /><br />  n^4/4 + n^3/6 - n^2/4 - n/6]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>182</wp:comment_id>
        <wp:comment_author>Eugene</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-10-22 23:52:48</wp:comment_date>
        <wp:comment_date_gmt>2008-10-22 23:52:48</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[looking forward for more information about this. thanks for sharing. Eugene]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>236</wp:comment_id>
        <wp:comment_author>10 one-line solutions for project euler | united-coders.com</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://united-coders.com/christian-harms/10-one-line-solutions-for-project-euler</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-12-29 10:46:12</wp:comment_date>
        <wp:comment_date_gmt>2010-12-29 10:46:12</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] found a groovy one-liner on jared.cacurak.com and the correct O(1) comment solution on basildoncoder.com and [...]]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Magic Numbers and Other Numerical Nightmares</title>
      <link>http://blog.basildoncoder.com/2008/08/magic-numbers-and-other-numerical.html</link>
      <pubDate>Wed, 13 Aug 2008 13:48:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>14</wp:post_id>
      <wp:post_date>2008-08-13 13:48:00</wp:post_date>
      <wp:post_date_gmt>2008-08-13 13:48:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Magic-Numbers-and-Other-Numerical-Nightmares</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[There are many coding practices that are near-universally regarded as 'bad', yet somehow keep cropping up over and over again. Conditional-branch abuse (including, yes, gotos). Deep nesting. Cryptic variable names. Global variables. Tight coupling. Entangled business/presentation logic. I could go on.<br /><br />Why do we keep doing it? Convenience? Laziness? Tiredness? Is unreadable spaghetti code some sort of steady-state/equilibrium for code? Is it a natural consequence of the vague and squidgy limitations of our evolved monkey-brains? Or is well-designed code abhorred like a vacuum and naturally atrophies into the sort of shambles you dread seeing on your first day at a new job, unless well-intentioned and dedicated people actively work to clean and polish it, like the <a href="http://en.wikipedia.org/wiki/Forth_Railway_Bridge#Maintenance">Forth Bridge</a>?<br /><br />I don't have the time or wit to give this subject the treatment it deserves, but I do want to rant a bit about another symptom of this disease, which has given me a couple of sleepless nights recently. I refer, as the title might suggest, to <a href="http://en.wikipedia.org/wiki/Magic_number_(programming)">magic numbers</a>.<br /><br />Magic numbers are constants, <a href="http://en.wikipedia.org/wiki/Magic_number_(programming)#Unnamed_numerical_constant">unnamed</a> in the most pathological cases, that represent an assumption or a limit in a piece of code. They often cause problems because soon they are forgotten about or their meaning is lost - and then something happens to invalidate the assumption, the code breaks, and all hell breaks loose.<br /><br />Magic numbers, to stretch the definition a bit, can also be implicit. If you are using a 32-bit integer, your magic number is 2,147,483,647 - that's the biggest number you can store in that type. Often, movement up to and beyond these ranges can trigger long-dormant bugs that are no fun at all to diagnose.<br /><br />Three times in recent history I've been bitten by bugs of this class, triggered by auto-incrementing sequences in database. These are they:<br /><ol><br /><li>A table in a database had a 32-bit integer primary key. At the time this seemed like a perfectly reasonable default, but insanely fast growth in usage of the system meant that the ~2.1billion upper limit of that data type was quickly reached. The DB column was switched to a 64-bit integer, but some of the client applications reading that table were not identified as at-risk. When the sequence generator left the 32-bit range, those applications overflowed. This happened at 4:30pm on a Friday afternoon. Saturdays were peak-times for system usage. You can imagine the frantic hacking that ensued.</li><br /><li>A sequence generator for a particular entity was started at 20,000,000, so as not to clash with the ID sequence of a related entity (that had started at 0 a good few years earlier). The similarity between the entities and the need to not have the IDs overlap had valid business justification, but the magic number was selected arbitrarily and promptly forgotten. Inevitably, the latter sequence surpassed that number, causing bizarre and difficult-to-trace entity relationship corruption that manifested as strangely-disappearing data on the front-end.</li><br /><li>A stored procedure parameter was incorrectly declared as an OracleType.Float, when it should have been an OracleType.Int32. This resulted in the value being cast from an integer to a floating-point and back again. For the first 16,777,216 integers, this happens to work OK. For the value 16,777,217, however, the loss in precision means that the number changes during casting. This simple bit of (heavily contrived) code shows the problem:<br /><pre name="code" language="csharp"><br />static void Main(string[] args)<br />{<br />    for (int i = 0; i < 17000000; ++i)<br />    {<br />        if (i != (int)(float)i)<br />        {<br />            Console.WriteLine("{0} != {1}", i, (int)(float)i);<br />            break;<br />        }<br />    }<br />}</pre><br />There are many numbers above 16,777,217 that have this characteristic; 16,777,217 just happens to be the first, for reasons you can probably divine if you think the IEEE floating-point spec is a riveting read. A couple of weeks after the launch of a fairly major internal application, this time-bomb exploded due to a sequence reaching the magic number. The bug was nothing to do with the new application, but of course fingers were pointed at it since a long-running and stable system had mysteriously choked very shortly after deployment of the new application.</li></ol><br />Now, unquestionably, all these problems are avoidable, and a strong argument could be made that none of them should ever have been allowed to happen. Yet, for many reasons, they do. For example, first-mover advantage can mean the opportunity cost of taking the time to do things right first time is greater than the cost of fixing problems later.<br /><br />Also, people make assumptions. The issue underlying the <a href="http://en.wikipedia.org/wiki/Millennium_bug">Millennium Bug</a> hysteria was caused by well-meaning developers who knew that two-digit dates wouldn't work after 1999 (effectively another magic number), but assumed the software would have been replaced or upgraded by then. No doubt that seemed a totally reasonable assumption in the 1970s, and it had genuine technical benefits (storage space was so tight that every byte saved was a battle won).<br /><br />Anyway, I don't have a magic bullet solution for this, I'm just venting spleen. Unit tests can help, but won't magically eliminate this class of bug (no matter what some of the more extreme TDD fanatics might tell you), so I suppose the lesson to take from this is the importance of being able to recognise and diagnose potential magic number issues. Pay close attention to data types, type conversions, and current values of sequences in your database. Keeping a sacrifical goat on hand might pay dividends too, in case any blood-thirsty deities with a head for binary arithmetic are watching.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/08/magic-numbers-and-other-numerical.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>202</wp:comment_id>
        <wp:comment_author>Alexander</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-10-21 17:41:46</wp:comment_date>
        <wp:comment_date_gmt>2009-10-21 17:41:46</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[*truly]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>203</wp:comment_id>
        <wp:comment_author>Alexander</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-10-21 17:41:46</wp:comment_date>
        <wp:comment_date_gmt>2009-10-21 17:41:46</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A truely titillating article thanks!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>209</wp:comment_id>
        <wp:comment_author>My Domain</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.quotesure.co.uk/directory/finance.html</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-02-05 01:12:47</wp:comment_date>
        <wp:comment_date_gmt>2010-02-05 01:12:47</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[<strong>Joe...</strong><br /><br />Check out my domain sometime....]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Ubuntu, Xmonad, and an Ode to Apt</title>
      <link>http://blog.basildoncoder.com/2008/08/ubuntu-xmonad-and-ode-to-apt.html</link>
      <pubDate>Sun, 10 Aug 2008 23:34:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>15</wp:post_id>
      <wp:post_date>2008-08-10 23:34:00</wp:post_date>
      <wp:post_date_gmt>2008-08-10 23:34:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Ubuntu,-Xmonad,-and-an-Ode-to-Apt</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[This weekend I finally got around to updating my main Linux box from Ubuntu 7.10 to 8.04 (yes, I know, 4 months late - but moving fast!). The highly excellent <a href="http://xmonad.org/">xmonad</a> has made it into the main Ubuntu repositories, so I discarded my own build and grabbed the packaged version - which promptly didn't work as expected on my dual-head setup. Gah.<br /><br /><a href="https://bugs.launchpad.net/debian/+source/haskell-x11/+bug/203594">A bit of googling suggested</a> that the problem lay with the upstream debian package, which contained a build of libghc6-x11-dev that was compiled without xinerama support. This left me with a choice of either waiting for the package to get sorted out, or to do the build myself again. I decided to do my own build rather than live without xmonad, but rather than mucking about with tarballs I could at least now get the source from the package repository.<br /><br />The appropriate steps, for anyone interested or having the same problem, are:<br /><ol><br /> <li>Make sure libxinerama-dev is installed</li><br /> <li>Recompile libghc6-x11-dev and install it</li><br /> <li>Recompile libghc6-xmonad-dev and libghc-xmonad-contrib-dev against the new X11 lib</li><br /></ol><br />The apt-get incantations are:<br /><pre><br />sudo apt-get install libxinerama-dev<br /><span class="Statement">cd</span> /tmp<br />sudo apt-get source <span class="Special">--compile</span> libghc6-x11-dev<br />sudo dpkg <span class="Special">-i</span> libghc6-x11-dev_1.<span class="Constant">4</span>.<span class="Constant">1</span>-1_i386.deb<br />sudo apt-get build-dep libghc6-xmonad-dev<br />sudo apt-get source <span class="Special">--compile</span> libghc6-xmonad-dev<br />sudo dpkg <span class="Special">-i</span> libghc6-xmonad-dev<br />sudo apt-get build-dep libghc6-xmonad-contrib-dev<br />sudo apt-get source <span class="Special">--compile</span> libghc6-xmonad-contrib-dev<br />sudo dpkg <span class="Special">-i</span> libghc6-xmonad-contrib-dev_0.<span class="Constant">6</span>-4_i386.deb</pre><br />A quick alt-q restart, and all is well.<br /><br />I only mention all this because it's so easy in this day and age to take something like apt for granted, and every so often it's worth taking a moment to appreciate just how spectacularly good it really is. Where I work, deployments are an endless source of headaches and grief, yet the complexity of those deployments absolutely pales against the task of updating literally millions of systems, all slightly different to each other, thousands of times a day. It's just a joy to be able to say to apt "hey, go get me everything I need to build package x, then build package x, then install it for me. And get it right first time!".<br /><br />In most cases, it does just that. It's an astonishing piece of software.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/08/ubuntu-xmonad-and-ode-to-apt.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>178</wp:comment_id>
        <wp:comment_author>Recent Links Tagged With "tmp" - JabberTags</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.jabbertags.com/popular/tmp</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-09-27 17:04:51</wp:comment_date>
        <wp:comment_date_gmt>2008-09-27 17:04:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] public links >> tmp   yet another funny and good song :D Saved by donnasue on Sat 27-9-2008   Ubuntu, Xmonad, and an Ode to Apt Saved by tvmaly on Thu 25-9-2008   MySQL and Temporary tables and CASE syntax Saved by [...]]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Dynamic Async Batching with PFX</title>
      <link>http://blog.basildoncoder.com/2008/08/dynamic-async-batching-with-pfx.html</link>
      <pubDate>Fri, 08 Aug 2008 17:41:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>16</wp:post_id>
      <wp:post_date>2008-08-08 17:41:00</wp:post_date>
      <wp:post_date_gmt>2008-08-08 17:41:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Dynamic-Async-Batching-with-PFX</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[The <a href="http://blogs.msdn.com/pfxteam/default.aspx">PFX Team blog</a> has been posting some excellent articles recently on the subject of <a href="http://blogs.msdn.com/pfxteam/archive/2008/08/05/8835612.aspx">task batching</a> using the June 2008 CTP release of the Task Parallel Library. It's really cool to see some of these techniques abstracted properly in .Net, and I hope it eventually becomes part of the core libraries.<br /><br />I've been playing around a bit recently with the June CTP in the context of batching up web service calls, as that's something I do quite a lot. One particular problem that comes up occasionally is a two-stage series of requests to download a complete set of paged data. I might do this if I wanted to download an entire discussion thread, for instance, or a large account statement from my online bank.<br /><br />Typically in this situation the web service will limit the number of records I can retrieve in one request, and allow me to specify start and count parameters to the request. The response will also include a total record count, so I know how much data there is.<br /><br />The normal use case for this is to request the first page of data, and use the total record count to display a list of page links that my user can click on to navigate the data or jump to any page. In my case, however, I want ALL the data as quickly as possible.<br /><br />So, imagine a situation where I am using a service that lets me download a maximum of 200 records per request. My first step is to request the maximum 200 records starting from index 0, i.e. the first page of data. In the response will be a total record count - if that number is equal to the number of records I got back (i.e. <= 200) I've got everything in one hit and can stop. But what if the total record count is, say, 1000? I need to make four more requests (since I've already got records 1-200, I have 800 more to get in batches of 200 each).<br /><br />Naturally I want to do this asynchronously, using as few resources as I can. This means all webservice calls should be using the APM pattern (thus using IO completion ports, and not consuming worker threads from the thread pool or creating my own threads) and, preferably, not blocking anywhere except when I actually need some data before continuing.<br /><br />The two-stage process can be successfully captured asynchronously by combining a future and a continuation. I encapsulate the initial request in a Future object (which is a subclass of Task), and handle the check-record-count-and-get-more-records-if-required logic in the continuation. The code for this basically looks as follows:<br /><pre><br /><span class="Type">public</span> Future<list><item>> GetAllItemsAsync()<br />{<br /> <span class="Type">var</span> f = Create<getitemsresponse>(<br />            ac => Service.BeginGetItems(<span class="Constant">0</span>, ac, <span class="Constant">null</span>),<br />            Service.EndGetItems);<br /><br /> <span class="Type">var</span> start = <span class="Constant">200</span>;<br /><br /> <span class="Type">var</span> resultFuture = f.ContinueWith(<br />        r =><br />            {<br /> <span class="Comment">// Batch retrieval here...</span><br />            });<br /><br /> <span class="Statement">return</span> resultFuture;<br />}</getitemsresponse></item></list></pre><br />In order to support the APM pattern neatly, I'm using the following method <a href="http://blogs.msdn.com/pfxteam/archive/2008/03/16/8272833.aspx">from the PFX blog</a>:<br /><pre><br /><span class="Type">private</span> <span class="Type">static</span> Future<t> Create</t><t>(<br />        Action<asynccallback> beginFunc,<br />        Func<iasyncresult> endFunc)<br />{<br /> <span class="Type">var</span> f = Future</iasyncresult></asynccallback></t><t>.Create();<br />    beginFunc(iar =><br />        {<br /> <span class="Statement">try</span><br />            {<br />                f.Value = endFunc(iar);<br />            }<br /> <span class="Statement">catch</span> (Exception e)<br />            {<br />                f.Exception = e;<br />            }<br />        });<br /> <span class="Statement">return</span> f;<br />}</t></pre><br />This could be coded as an extension method, though I haven't bothered yet as I'm hopeful this immensely useful snippet will be integrated into the library itself.<br /><br />Now I need to make a number of calls to get the rest of the data, so I loop until I've made the required number of async service calls:<br /><pre><br /><span class="Type">var</span> resultFuture = f.ContinueWith(r =><br />    {<br /> <span class="Type">var</span> items = <span class="Statement">new</span> ConcurrentQueue<item>();<br /> <span class="Type">var</span> handles = <span class="Statement">new</span> List<waithandle>();<br /><br /> <span class="Statement">while</span> (start < r.Value.TotalRecordCount)<br />        {<br /> <span class="Type">var</span> asyncResult = Service.BeginGetItems(<span class="Constant">200</span>,<br />                ar => Service.EndGetItems(ar).Items<br />                    .ForEach(items.Enqueue), <span class="Constant">null</span>);<br /><br />            handles.Add(asyncResult.AsyncWaitHandle);<br />            start += <span class="Constant">200</span>;<br />        }<br /><br />        handles.ForEach(h => h.WaitOne());<br /> <span class="Statement">return</span> items.ToList();<br />    });</waithandle></item></pre><br />I'm about 85% happy with this as an approach. I'm not completely happy, however, because of the WaitOne calls, which mean that I'm blocking on a threadpool thread until all the calls complete. Given that this is all wrapped up in a future, I may not actually need to access the data until well after the calls have completed, in which case I am wastefully consuming a threadpool thread for some period of time. So the $64,000 question is, how do I get rid of it? I'm sure there's a way to do it, but my brain has gone on a protest march about all the time I'm forcing it to spend thinking about this stuff.]]></content:encoded>
      <category domain="tag">Patterns</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/08/dynamic-async-batching-with-pfx.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Comment Discontent</title>
      <link>http://blog.basildoncoder.com/2008/07/comment-discontent.html</link>
      <pubDate>Wed, 30 Jul 2008 17:01:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>17</wp:post_id>
      <wp:post_date>2008-07-30 17:01:00</wp:post_date>
      <wp:post_date_gmt>2008-07-30 17:01:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Comment-Discontent</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[There seems to have been a recent <a href="http://blog.uncommons.org/2008/07/25/no-your-code-is-not-so-great-that-it-doesnt-need-comments/">outbreak</a> <a href="http://www.carlcrowder.com/blog/?p=34">in</a> <a href="http://www.codinghorror.com/blog/archives/001150.html">blog</a> <a href="http://steve-yegge.blogspot.com/2008/02/portrait-of-n00b.html">posts</a> about <a href="http://en.wikipedia.org/wiki/Comment_(computer_programming)">code commenting</a>. As is so often the case with topics such as this, everyone has an opinion and they all seem to be different. It's quite an eye-opener seeing some of the explanations, justifications, and outright haranguing used in defence of all sorts of weird and wonderful stances.<br /><br />I got a wry smile from <a href="http://steve-yegge.blogspot.com/2008/02/portrait-of-n00b.html">stevey's post</a>, as I recognise only too well the tendency to write narrative comments. I'm sure there's plenty of code from early in my career still floating around in various company codebases where the code/comment ratio is something embarrassing. I've mostly shaken that off now, though I sometimes have to fight my inner raconteur when writing something I think is neat or clever.<br /><br />Jeff Atwood, as is so often the case recently, contradicted his <a href="http://www.codinghorror.com/blog/archives/000749.html">own previous post</a> on the matter (replacing the statement "comments can never be replaced by code alone" with "if your feel your code is too complex to understand without comments, your code is probably just bad") and endearingly veered wildly to and fro across a sensible medium<sup>[1]</sup>, without ever quite hitting it. Coding Horror, indeed.<br /><br />So far, so blah; every time an argument on comments flares up we see the same thing. Something I've not noticed before though, either because I wasn't paying attention or because it's a new thing, is a trend amongst the I-don't-need-comments crowd to advocate very long and detailed method names as an alternative.<br /><br />As neophyte coders we all have it drilled into us that we must use descriptive names. Programming gospel, as handed down in sacred tomes such as <a href="http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/1556154844">Code Complete</a>, tell us not to use names like 'i' and 'tmp' except in very specific circumstances (e.g. loop indexes and tempfile handles). And, without question, this is good solid advice. Take heed, young Padawan, etc.<br /><br />But can you take it too far? It's not something I've really come up against, but it seems to be increasingly popular. <a href="http://blog.uncommons.org/2008/07/25/no-your-code-is-not-so-great-that-it-doesnt-need-comments/">One response to Jeff's post</a> suggested (only in passing, to be fair) using a function name like <code>newtonRaphsonSquareRoot</code>. A <a href="http://digg.com/programming/No_your_code_is_not_so_great_that_it_doesn_t_need_comments">digg comment</a> (OK, OK, not exactly the fount of all knowledge) vehemently defended the virtue of the frankly-scary <code>RunEndOfMonthReportsUnlessTheMonthStartsOnAFridayIn<br />WhichCaseRunTheWeeklyReportInstead</code> (!)<br /><br />The argument is that with names like these, you don't need comments, since it is perfectly clear what the function does. Is it perfectly clear at the wrong level though? Function names like this, in my opinion, are so 'clear' that they leak. These are function names that violate the principle of <a href="http://en.wikipedia.org/wiki/Encapsulation_(classes_-_computers)">encapsulation</a>.<br /><br />If I write a square root function, why do I need to burden all my clients with information about how I've implemented it? By naming it <code>newtonRaphsonSquareRoot</code>, that's exactly what I'm doing. Unless there are specific performance implications/requirements that favour <a href="http://en.wikipedia.org/wiki/Newton%27s_method">Newton-Raphson</a>, in most cases my clients just want a damn square root calculated to within a specified tolerance and don't care whether I used Newton's method or one of the <a href="http://en.wikipedia.org/wiki/Methods_of_computing_square_roots">army of alternatives</a>. The implementation should be private to the method, and no-one else's business.<br /><br />Worse, what if a requirements change means a switch to <a href="http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Reciprocal_of_the_square_root">Walsh's fast reciprocal method</a>? Uh-oh, now my method name is completely misleading, so I have to change it. Oops, now I have to change all the client code that calls it! I'd better hope no-one has exposed this with <code>[WebMethodAttribute]</code> since I wrote it, otherwise there could be thousands of client applications out there relying on it. My funky rename refactoring can't save me now.<br /><br />If every tiny change propagates through the system requiring hundreds of source files to change, and possibly external apps as well, you may as well just copy 'n' paste the code everywhere it's needed and doing away with the function completely. Hell, who needs abstraction anyway?<br /><br />We all do, of course, which is why I think names like this are a bad smell. The same goes for <code>RunEndOfMonthReportsUnless...</code> - what happens when the requirements change? This method name couples the public interface (method name) to the private implementation, which is exactly what you're not supposed to do. <code>RunEndOfMonthReports</code> is probably sufficient. Separate interface and implementation. This is programming 101, people, it shouldn't be beyond our grasp.<br /><br /><sup>[1]</sup>I agree with <a href="http://blog.uncommons.org/2008/07/25/no-your-code-is-not-so-great-that-it-doesnt-need-comments/">Dan Dyer</a> that the best choice is as follows:<br /><pre><br /><span class="Comment">/**</span><br /><span class="Comment"> *  Approximate the square root of n, to within the specified</span><br /><span class="Comment"> *  tolerance, using the Newton-Raphson method.</span><br /><span class="Comment"> */</span><br /><span class="Type">private</span> <span class="Type">double</span> approximateSquareRoot(<span class="Type">double</span> n, <span class="Type">double</span> tolerance)<br />{<br /> <span class="Type">double</span> root = n / <span class="Constant">2</span>;<br /> <span class="Statement">while</span> (abs(root - (n / root)) > tolerance)<br />    {<br />        root = <span class="Constant">0.5</span> * (root + (n / root));<br />    }<br /> <span class="Statement">return</span> root;<br />}</pre><br />The function name is descriptive and clear whilst remaining general enough to allow an alternative implementation. Anyone who cares enough about the implementation (for performance reasons, or simply curiosity) can find enough information in the comment to start their investigation, without having the details jammed in their face every time they call it.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/07/comment-discontent.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>165</wp:comment_id>
        <wp:comment_author>DaStormyBlood</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://is.gd/Fo2?502698180</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-07-30 18:03:00</wp:comment_date>
        <wp:comment_date_gmt>2008-07-30 18:03:00</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The correct way to handle the square root issue, imho, is as follows: module foo.math; float NewtonRaphsonSquareRoot(); ... module bar.config; public import foo.math: sqrt = NewtonRaphsonSquareRoot; ... module bar.whee; import bar.config; ... sqrt(); ... And so on.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>166</wp:comment_id>
        <wp:comment_author>Daniel Pietraru</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.littletutorials.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-07-31 00:03:27</wp:comment_date>
        <wp:comment_date_gmt>2008-07-31 00:03:27</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Lots of common sense in your post :) Maybe so much some people cannot stomach it. The reality is these little things like comments and variable names  are a frequent cause for flame wars among developers. There is a category of coders who pretend their code is too good to need comments. And always this statement is pure BS. No code is clear or good enough taken out of the context of the original development. Constraints, requirements etc. change in time to the point where the original code seems dumb. If anybody is interested I wrote some of my thoughts on how bad comments are born here: http://littletutorials.com/2008/07/30/how-bad-comments-are-born-in-your-code/<br /><br />Thanks for the good and entertaining read :)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>171</wp:comment_id>
        <wp:comment_author>Thomas Eyde</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-24 20:37:17</wp:comment_date>
        <wp:comment_date_gmt>2008-08-24 20:37:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[It&#39;s possible to use method names as comments without breaking encapsulation:<br /><br />public double SquareRoot(double n)<br />{<br /> //return NewtonRaphsonSquareRoot(n);<br /> return WalshFastReciprocalSquareRoot(n);<br />}<br /><br />private double NewtonRaphsonSquareRoot(double n)<br />{<br /> ...<br />}<br /><br />private double WalshFastReciprocalSquareRoot(double n)<br />{<br /> ...<br />}]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>204</wp:comment_id>
        <wp:comment_author>kizcorce</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blogcastrepository.com/members/mikeyacai.aspx</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-11-04 00:35:58</wp:comment_date>
        <wp:comment_date_gmt>2009-11-04 00:35:58</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Possibly, but i&#39;m sceptic. Your articulation is pretty, but the tournament is very hards as i see.<br /> <br /> <br />cheers,<br />______________<br />kizcorce<br /><a href="http://blogcastrepository.com/members/mikeyacai.aspx" rel="nofollow">get acai berry</a><br />http://blogcastrepository.com/members/mikeyacai.aspx]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>233</wp:comment_id>
        <wp:comment_author>Darcie Jefferies</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.fddyyub.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-12-16 13:42:50</wp:comment_date>
        <wp:comment_date_gmt>2010-12-16 13:42:50</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Very efficiently written story. It will be supportive to everyone who usess it, as well as myself. Keep up the good work - for sure i will check out more posts.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Lexical Closures in C# 3.0</title>
      <link>http://blog.basildoncoder.com/2008/07/lexical-closures-in-c-30.html</link>
      <pubDate>Tue, 01 Jul 2008 17:49:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>18</wp:post_id>
      <wp:post_date>2008-07-01 17:49:00</wp:post_date>
      <wp:post_date_gmt>2008-07-01 17:49:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Lexical-Closures-in-C#-3.0</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[There's a <a href="http://dobbscodetalk.com/index.php?show=The-next-big-programming-language-feature-after-closures.html">slightly weird article</a> up on <a href="http://dobbscodetalk.com/">Dobbs Code Talk</a> this week, speculating that aggregate functions are "the next big programming language feature" after closures. The slight weirdness comes from the fact that both features have been around for decades, and not just in dusty academic languages either.<br /><br />Still, there's some interesting discussion in the comments about whether .Net's closures are proper first-class lexically-scoped closures. The answer is yes - but with a fun twist.<br /><br />The twist has been around for a long time - <a href="http://blogs.msdn.com/brada/default.aspx">Brad Abrams</a> blogged about it <a href="http://blogs.msdn.com/brada/archive/2004/08/03/207164.aspx">way back in 2004</a>, for instance - but it's probably worth going over it again, since the recent arrival of LINQ and lambda syntax in C# 3.0 will presumably lead to more people being bitten by this as the use of closures becomes more mainstream.<br /><br />A key thing to remember is that C# lambdas are just anonymous delegates in skimpy syntax. Behind the scenes the compiler turns them into classes - if you were looking at disassembled MSIL you wouldn't be able to tell whether the code was written with lambda syntax or anonymous delegate syntax. Therefore, the issue discussed by Brad has not gone anywhere.<br /><br />Lets revisit the problem, with a 2008 sheen applied (i.e. I'll use lambda syntax rather than anonymous delegate syntax). What does the following code display?<br /><pre><br />Func<<span class="Type">int</span>>[] funcs = <span class="Statement">new</span> Func<<span class="Type">int</span>>[<span class="Constant">10</span>];<br /><span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">0</span>; i < <span class="Constant">10</span>; ++i)<br />{<br />    funcs[i] = () => i * i;<br />}<br /><br />funcs.ForEach(f => Console.WriteLine(f()));</pre><br />If you answered something along the lines of "prints the square of every number between 0 and 9" you'd be...wrong. Really, try it out. See?<br /><br />Now, a lexical closure is supposed to capture its environment, meaning that the lambda stored on the first loop would capture i when i==0, the second loop would capture i when i==1, and so on. If this happened, then executing all the lambdas would indeed result in the squares of the numbers 0-9 being printed. So what gives?<br /><br />The problem stems from the fact that the lambda is binding itself to a variable that is accessible outside the closure, which is being changed in every iteration of the loop. The closure doesn't capture the value of i, it captures a reference to i itself, which is mutable.<br /><br />You could actually make a case that this is bad code anyway, since it gives two responsibilities to the loop index - control the loop, and act as data in the closures. If we were being pedantic, we could split the responsibilities by creating a new variable, j, to be the closure data each iteration, and let i concentrate on being an index:<br /><pre><br /><span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">0</span>; i < <span class="Constant">10</span>; ++i)<br />{<br /> <span class="Type">int</span> j = i;<br />    funcs[i] = () => j * j;<br />}</pre><br />Lo and behold, the code now works! Pedantry rules! Take a look with Reflector or ildasm to see what's going on here. The executive summary is that the compiler captures the environment (i in the first example, j in the second) by creating a member variable within the class it generates for the closure. Previously, since the same instance of i lived for the entire duration of the loop, only one instance of the generated class was created and shared. Now, however, a new instance of the generated class is created in each iteration of the loop (since j is scoped within the loop body and thus we have a new j every time round). Thus, the data is not shared and we get the expected output.<br /><br />There are two important points to consider here:<br /><ol><br /> <li>The problem goes away if you write code more declaratively. Do away with the clunky for loop and everything works OK.<br /><pre><br />Enumerable.Range(<span class="Constant">0</span>, <span class="Constant">10</span>).Select(x => x * x);</pre><br /></li><br /> <li>It isn't always bad that multiple closures can capture a reference - since one closure can 'see' updates made to the shared data by another closure, you could use this as a coordination mechanism.</li><br /></ol><br />This is not an issue that's going to crop up every day - the example above is fairly contrived - but knowing about it will save some painful debugging sessions when inevitably you do run into it. The fix is always to take a local copy of the mutable data to coerce the compiler into generating code that creates multiple instances of the class generated to represent the closure.<br /><br />Simple, yes? ;-)]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/07/lexical-closures-in-c-30.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>201</wp:comment_id>
        <wp:comment_author>Sergio</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://issidii.ru</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-10-05 10:00:51</wp:comment_date>
        <wp:comment_date_gmt>2009-10-05 10:00:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[? ???? ?????????? ?? ??? ? ?????? ????? ?????? ?? ?? ??? ??? ?????? ??????????]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>211</wp:comment_id>
        <wp:comment_author>mabra</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://none</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-02-12 23:33:43</wp:comment_date>
        <wp:comment_date_gmt>2010-02-12 23:33:43</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi !<br /><br />I am just dealing with captured variables in creating Tasks and came onto the same idea [using a local variable, copying the loop vars value].<br /><br />Just don&#39;t work and return different results on each run!<br /><br />BTW, I find lambda&#39;s too abstract and cannot understand them. So you also?<br /><br />Your code:<br />funcs.ForEach(f => Console.WriteLine(f()));<br />does not compile ....<br />[No overload for method &#39;ForEach&#39; takes &#39;1&#39; arguments]<br /><br />br--mabra]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>261</wp:comment_id>
        <wp:comment_author>Mark Giese</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/18214857047145501745</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2013-06-11 14:18:57</wp:comment_date>
        <wp:comment_date_gmt>2013-06-11 14:18:57</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Don&#39;t know where &quot;funcs.ForEach&quot; is coming from, but the following replacement works.  The main point of the article is important and certainly not invalidated by the typo.<br /><br />            foreach (Func f in funcs)<br />            {<br />                Console.WriteLine(f());<br />            }<br />]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>262</wp:comment_id>
        <wp:comment_author>Russ Gray</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/02806495328886223909</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2013-06-11 14:55:20</wp:comment_date>
        <wp:comment_date_gmt>2013-06-11 14:55:20</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Yeah, at some point I wrote the code using List<t>, which <a href="http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx" rel="nofollow">does</a> have a ForEach method, but for some reason switched it to an array for this blog post without re-testing it. My bad. Either change funcs to a List<func> or implement ForEach as an extension for IEnumerable, which is trivial. Or, as you say, use a normal loop.</func></t>]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Project Euler Problem 5</title>
      <link>http://blog.basildoncoder.com/2008/06/project-euler-problem-5.html</link>
      <pubDate>Tue, 10 Jun 2008 12:47:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>19</wp:post_id>
      <wp:post_date>2008-06-10 12:47:00</wp:post_date>
      <wp:post_date_gmt>2008-06-10 12:47:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-5</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[On to the next Project Euler problem (after a bit of a hiatus)...<br /><br /><em><strong><a href="http://projecteuler.net/index.php?section=problems&amp;id=5">Problem 5</a></strong></em><br /><blockquote>2520 is the smallest number that can be divided by each of the numbers from 1 to 10 without any remainder.<br /><br />What is the smallest number that is <dfn title="divisible with no remainder">evenly divisible</dfn> by all of the numbers from 1 to 20?</blockquote><br />In common with many of the other Euler problems, there's a brute-force way to solve this, and a clean algorithmic way. And in common with my other Euler posts so far, I'll start with the brute-force way ;-)<br /><br />This problem can be tackled head-on with the following approach: Start from <em>n</em>=1 and increment in a loop. Test each value of <em>n</em> by attempting to divide it by all numbers <em>m</em> from 1 to 20. The first number to pass the test (i.e. <em>n</em> mod <em>m</em> is 0 for all values of <em>m</em>) is the answer.<br /><pre><br /><span class="Type">private</span> <span class="Type">static</span> <span class="Type">long</span> BruteForceSolver()<br />{<br /> <span class="Type">long</span> result;<br /> <span class="Statement">for</span> (result = <span class="Constant">1</span>; !Check(result); ++result)<br />        ;<br /> <span class="Statement">return</span> result;<br />}<br /><br /><span class="Type">private</span> <span class="Type">static</span> <span class="Type">bool</span> Check(<span class="Type">long</span> result)<br />{<br /> <span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">1</span>; i <= <span class="Constant">20</span>; ++i)<br />    {<br /> <span class="Statement">if</span> (result % i != <span class="Constant">0</span>)<br /> <span class="Statement">return</span> <span class="Constant">false</span>;<br />    }<br /><br /> <span class="Statement">return</span> <span class="Constant">true</span>;<br />}</pre><br />This works, but it takes >12 seconds to execute on my PC, so it's not what you'd call efficient (though it is well within the Euler execution time guidelines).<br /><br />Some speed gains can be achieved by exploiting the information provided in the question itself. We are told that 2520 is the lowest number evenly divisible by all numbers from 1 to 10. Since the problem space (1 to 20) includes all these numbers, the answer must also be evenly divisible by 2520. This allows much bigger increments each loop - rather than incrementing by 1, why not increment by 2520? And since the answer must be greater than or equal to 2520, why not start the loop there instead of 1? Finally, since we already know that 1 to 10 divide evenly into 2520, each inner loop only needs to check numbers 11 to 20.<br /><br />That should speed things up a bit:<br /><pre><span class="Type">private</span> <span class="Type">long</span> BruteForceSolver()<br />{<br /> <span class="Type">long</span> result;<br /> <span class="Statement">for</span> (result = <span class="Constant">2520</span>; !Check(result); result += <span class="Constant">2520</span>)<br />        ;<br /> <span class="Statement">return</span> result;<br />}<br /><br /><span class="Type">private</span> <span class="Type">bool</span> Check(<span class="Type">long</span> result)<br />{<br /> <span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">11</span>; i <= <span class="Constant">20</span>; ++i)<br />    {<br /> <span class="Statement">if</span> (result % i != <span class="Constant">0</span>)<br /> <span class="Statement">return</span> <span class="Constant">false</span>;<br />    }<br /><br /> <span class="Statement">return</span> <span class="Constant">true</span>;<br />}</pre><br />And indeed, on my machine this is now down to 150ms or so. It's still not a very nice way to tackle the problem, though.<br /><br />Thinking about it from a different angle yields an altogether smarter approach. Imagine we are looking for the lowest number evenly divisible by the numbers 1 to 2.<br /><br />[1, 2]<br /><br />Well that's easy; since there are only two numbers we just find the lowest common multiple (LCM), which in this case is 2 (since 2 % 2 == 0, and 2 % 1 == 0). If we call this sequence s<sub>1</sub>, we can say that LCM(s<sub>1</sub>) = 2.<br /><br />OK, now imagine we are solving the same problem for s<sub>2</sub>, which contains the numbers 1 to 3.<br /><br />[1, 2, 3]<br /><br />You'll notice that s<sub>2</sub> contains s<sub>1</sub> in its entirety. LCM(s<sub>2</sub>) must therefore be a multiple of LCM(s<sub>1</sub>), so we can rewrite s<sub>2</sub> as [LCM(s<sub>1</sub>), 3], or [2, 3] (since we know LCM(s<sub>1</sub>) = 2). Now we are down to two numbers again, so we can calculate the LCM of 2 and 3, which is 6, so LCM(s<sub>2</sub>) = 6.<br /><br />OK, now we solve the problem for the first 4 numbers (s<sub>3</sub>).<br /><br />[1, 2, 3, 4]<br /><br />This sequence contains s<sub>2</sub>, therefore LCM(s<sub>3</sub>) is a multiple of LCM(s<sub>2</sub>). We can rewrite s<sub>3</sub> as [LCM(s<sub>2</sub>), 4], or [6, 4]. Thus, LCM(s<sub>3</sub>) = 12.<br /><br />This can be repeated as many times as necessary. Generally, we have s<em><sub>n</sub></em> = [LCM(s<sub><em>n</em>-1</sub>), <em>n</em>+1] where <em>n</em> > 0.<br /><br />This looks recursive, but a better way to think of it is as an excellent example of a fold. A fold is one of the fundamental tools of functional programming. In fact, it is perhaps the most fundamental, since map, filter etc can be implemented as right folds<sup>[1]</sup>.<br /><br />I won't inflict my pitiful Photoshop skills on anyone by trying to graphically represent a fold - try looking at <a href="http://en.wikipedia.org/wiki/Fold_(higher-order_function)">this Wikipedia article</a> if you want to try and visualise it.<br /><br />Broadly, the behaviour of a fold is to apply a combining function to elements in a list (or other data structure) and accumulate the results. That's exactly what we want here - our combining function is LCM, and our accumulating value is the LCM of the whole list. Effectively, for list s<sub>3</sub> above, we have<br /><br />LCM(s<sub>3</sub>) = LCM(LCM(LCM(1,2),3),4) = 12<br /><br />Note how the result of the innermost LCM (applied to values 1 and 2) becomes a parameter to the next LCM, which in turn becomes a parameter to the outermost LCM which returns the result we want.<br /><br />By using a fold, we can generalise. In Haskell, the whole problem is a one-liner:<br /><pre><br />foldl lcm <span class="Constant">1</span> [<span class="Constant">1</span><span class="Statement">..</span><span class="Constant">20</span>]</pre><br />The 1 passed in as a parameter represents the terminating value to use when the end of the list is reached. It is common for this value to be the first element of the list, so Haskell provides a convenience function that removes the need to specify it as a parameter:<br /><pre><br />foldl1 lcm [<span class="Constant">1</span><span class="Statement">..</span><span class="Constant">20</span>]</pre><br />Not all languages and platforms provide an LCM function right out of the box, so to take this neat Haskell solution and port it to .Net, the LCM function needs to be implemented. This is easily done in terms of the greatest common divisor (GCD) like so:<br /><br /><a href="http://en.wikipedia.org/wiki/Least_common_multiple#Calculating_the_least_common_multiple"></a><br /><p style="text-align: center"><a href="http://en.wikipedia.org/wiki/Least_common_multiple#Calculating_the_least_common_multiple"><img src="http://upload.wikimedia.org/math/4/d/2/4d244548521249d1b5a71941506d5f41.png" height="48" width="183" /></a></p><br />.Net doesn't provide a GCD function either, so I'll implement it using <a href="http://en.wikipedia.org/wiki/Euclidean_algorithm">Euclid's Algorithm</a> as an extension method on long ints:<br /><pre><br /><span class="Type">public</span> <span class="Type">static</span> <span class="Type">long</span> GCD(<span class="Statement">this</span> <span class="Type">long</span> a, <span class="Type">long</span> b)<br />{<br /> <span class="Statement">while</span> (b != <span class="Constant">0</span>)<br />    {<br /> <span class="Type">long</span> tmp = b;<br />        b = a % b;<br />        a = tmp;<br />    }<br /><br /> <span class="Statement">return</span> a;<br />}</pre><br />With GCD defined, LCM can be implemented as above:<br /><pre><br /><span class="Type">public</span> <span class="Type">static</span> <span class="Type">long</span> LCM(<span class="Statement">this</span> <span class="Type">long</span> a, <span class="Type">long</span> b)<br />{<br /> <span class="Statement">return</span> (a * b) / a.GCD(b);<br />}</pre><br />With this in place, it's a simple matter to use .Net's equivalent of fold - a method on IEnumerable<t> called Aggregate - to get the answer<sup>[2]</sup>: </t><br /><pre><br /><span class="Statement">return</span> LongEnumerable.Range(<span class="Constant">1</span>, <span class="Constant">20</span>)<br />    .Aggregate(<span class="Constant">1L</span>, (curr, next) => curr.LCM(next));</pre><br />And indeed, the same basic pattern can be used to solve the problem in a number of languages. In F#, given implementations of LCM and GCD as above, we have:<br /><pre><br /><span class="PreProc">List</span>.fold_left lcm <span class="Constant">1</span> <span class="Statement">[</span><span class="Constant">1</span>..<span class="Constant">20</span><span class="Statement">]</span></pre><br />And in ruby:<br /><pre><br /><span class="PreProc">require</span> <span class="Special">'</span><span class="Constant">rational</span><span class="Special">'</span><br />(<span class="Constant">1</span>..<span class="Constant">20</span>).inject { |<span class="Identifier">c</span>, <span class="Identifier">n</span>| c.lcm n }</pre><br />Given that the right algorithm makes this problem a fairly trivial expression in all these languages, it's pretty hard to identify which is the nicest. I think overall I'll give the nod to Haskell, however, for not making me implement LCM and because I find ruby's 'inject' a less intuitive function name than foldr (but that's probably because I learned the technique in Haskell in the first place and am set in my ways...)<br /><br /><hr /> <sup>[1]</sup>For example, in F#:<br /><pre><br /><span class="Statement">let</span> filter p lst <span class="Statement">=</span><br /> <span class="PreProc">List</span>.fold_right <span class="Statement">(fun</span> x xs <span class="Statement">-></span> <span class="Statement">if</span> p x <span class="Statement">then</span> x<span class="Statement">::</span>xs <span class="Statement">else</span> xs<span class="Statement">)</span> lst <span class="Constant">[]</span><br /><br /><span class="Statement">let</span> map f lst <span class="Statement">=</span><br /> <span class="PreProc">List</span>.fold_right <span class="Statement">(fun</span> x xs <span class="Statement">-></span> f x <span class="Statement">::</span> xs<span class="Statement">)</span> lst <span class="Constant">[]</span></pre><br /><sup>[2]</sup>Note that in this code LongEnumerable is just a very simple partial reimplementation of Enumerable, using longs instead of ints]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/06/project-euler-problem-5.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>161</wp:comment_id>
        <wp:comment_author>Loocie</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://layyourself.blogspot.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-06-29 13:23:14</wp:comment_date>
        <wp:comment_date_gmt>2008-06-29 13:23:14</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi, <br /><br />really good blog! I read you are familiar with Betfair API. Actually I am developing a Betfair mobile client for Windows Mobile 6 (.NETCF 2.0).<br />When calling login method I got resp.errorCode == LoginErrorEnum.OK, but the header is null. Any solutions available?<br /><br />All the best, Loocie]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>162</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-07-01 13:58:37</wp:comment_date>
        <wp:comment_date_gmt>2008-07-01 13:58:37</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Loocie,<br /><br />I haven&#39;t seen that happen before. Could you show me some sample code that exhibits the error (anonymising your login credentials, of course)?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>163</wp:comment_id>
        <wp:comment_author>Loocie</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://layyourself.blogspot.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-07-02 06:58:48</wp:comment_date>
        <wp:comment_date_gmt>2008-07-02 06:58:48</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi russ,<br /><br />thanks for your reply. Here is my login code:<br /><br />BFGlobalService bfGlobal = new BFGlobalService();<br />LoginReq request = new LoginReq();<br />LoginResp resp;<br /><br />request.username = username;<br />request.password = password;<br />request.productId = 82;<br />request.vendorSoftwareId = 0;<br />request.locationId = 0;<br />request.ipAddress = &quot;0&quot;;<br /><br />resp = bfGlobal.login(request);<br /><br />The object &#39;resp&#39; has an attribute called &#39;header&#39; and this is null. This header object should contain a sessionToken. When using this code I can see &#39;Logon successfull&#39; at betfair.com (under Account -> Security).<br />Maybe you have an idea.<br />This code works when using in a dektop application, but not in Windows Mobile 6.<br /><br />All the best, Loocie]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>199</wp:comment_id>
        <wp:comment_author>Torleif</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-09-15 20:48:14</wp:comment_date>
        <wp:comment_date_gmt>2009-09-15 20:48:14</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Awesome! That code got my solution down from 80 seconds to around 0,00125 seconds. Will have to read some more on it though, cause not sure if I understand it :P Thanks!!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>200</wp:comment_id>
        <wp:comment_author>Daniel</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-09-28 18:14:03</wp:comment_date>
        <wp:comment_date_gmt>2009-09-28 18:14:03</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Torleif,<br /><br />could you share your approach of getting the precise running time? Thanks!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>205</wp:comment_id>
        <wp:comment_author>Jim</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-11-11 21:24:21</wp:comment_date>
        <wp:comment_date_gmt>2009-11-11 21:24:21</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The Haskell one-liner is a real gem. I blundered through the brute force methods first of course, and ran out of memory because I&#39;m a haskell noob.<br /><br />Then I found your elegant fold. Damn that&#39;s nice.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>212</wp:comment_id>
        <wp:comment_author>Shaun Abram » Blog Archive » Project Euler: Problem 5 (in Java)</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.shaunabram.com/project-euler-problem-5-in-java/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-03-15 02:34:26</wp:comment_date>
        <wp:comment_date_gmt>2010-03-15 02:34:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] for the implementation of the getLowestCommonMultipler() method elsewhere (see here, for example), so I won't post the implementation as it is not my own work. But identifying [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>221</wp:comment_id>
        <wp:comment_author>progra</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-07-20 23:08:07</wp:comment_date>
        <wp:comment_date_gmt>2010-07-20 23:08:07</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[my java solution<br /><br />import java.util.*;<br />public class euler5 {<br /><br /> /**<br />  * @param args<br />  */<br /> public static void main(String[] args) {<br />  // TODO Auto-generated method stub<br />         int i=2520;<br />         int j=0;<br />      boolean check=false;<br /> <br />      while(check==false){<br />       for(j=3;j<=20;j++){<br />        if(i%j!=0){<br />         check=false;<br />         j=21;<br />        }<br />        else{<br />         check=true;<br />        }<br /> <br />       }<br />       i=i+20;<br />      }<br />       System.out.println(i-20);<br /> }<br /><br />}]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>238</wp:comment_id>
        <wp:comment_author>Project Euler: #5 « euler.bobarnott.com</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://euler.bobarnott.com/2011/01/12/project-euler-5/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-01-12 23:22:18</wp:comment_date>
        <wp:comment_date_gmt>2011-01-12 23:22:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] After doing a bit of digging, it turns out you can actually solve this problem with one line of Ruby code, quite impressive if you know what all the libraries do etc. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>260</wp:comment_id>
        <wp:comment_author>Malith Samaradivakara</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/02223580352703619663</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2013-03-13 06:19:14</wp:comment_date>
        <wp:comment_date_gmt>2013-03-13 06:19:14</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[This comment has been removed by the author.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Project Euler Problem 4: Extra</title>
      <link>http://blog.basildoncoder.com/2008/04/project-euler-problem-4-extra.html</link>
      <pubDate>Tue, 22 Apr 2008 13:10:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>20</wp:post_id>
      <wp:post_date>2008-04-22 13:10:00</wp:post_date>
      <wp:post_date_gmt>2008-04-22 13:10:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-4:-Extra</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Couple of things to add to <a href="http://basildoncoder.com/blog/2008/04/21/project-euler-problem-4/">yesterday's post</a> about <a href="http://projecteuler.net/index.php?section=problems&amp;id=4">problem 4</a>. As is so often the case in life, no sooner had I finished the article than I realised there was an obvious additional step I could make, which I'd somehow failed to spot.<br /><br />Regarding the C# solution, an easy win having implemented the Reverse extension method would be to add an IsPalindrome extension to the string class too. The implementation is straightforward:<br /><pre><span class="Type">public</span> <span class="Type">static</span> <span class="Type">bool</span> IsPalindrome(<span class="Statement">this</span> <span class="Type">string</span> s)<br />{<br /> <span class="Statement">return</span> s == s.Reverse();<br />}</pre><br />With this done, the where clause in the LINQ query is more readable, and we have a couple of handy reusable string extensions into the bargain.<br /><pre><span class="Type">var</span> result = (<span class="Statement">from</span> product <span class="Statement">in</span> AllProducts.From(<span class="Constant">100</span>).To(<span class="Constant">999</span>)<br /> <span class="Statement">          where</span> product.ToString().IsPalindrome()<br /> <span class="Statement">          select</span> product).Max();</pre><br />Also, <a href="http://basildoncoder.com/blog/2008/04/21/project-euler-problem-4/#comment-945">Sol</a> commented that the C code could have a direct implementation of a palindrome function, rather than messing about with strrev, since the implementations are very similar. Whilst this series isn't really focussed on the performance benefit of this approach, it does also make the code more expressive, so I'll include it:<br /><pre><span class="Type">int</span> strpalindrome(<span class="Type">char</span>* s) {<br /> <span class="Type">char</span> *s1, *s2;<br /><br />    s1 = s2 = s;<br /> <span class="Statement">while</span> (*s2)<br />        s2++;<br /><br /> <span class="Statement">while</span> (s1 < s2) {<br /> <span class="Statement">if</span> (*(s1++) != *(--s2))<br /> <span class="Statement">return</span> <span class="Constant">0</span>;<br />    }<br /><br /> <span class="Statement">return</span> <span class="Constant">1</span>;<br />}</pre><br />The loop now looks like this:<br /><pre> <span class="Statement">for</span> (i = <span class="Constant">100</span>; i < <span class="Constant">1000</span>; ++i) {<br /> <span class="Statement">for</span> (j = i; j < <span class="Constant">1000</span>; ++j) {<br /> <span class="Type">int</span> sum = i * j;<br />            sprintf(s1, <span class="Constant">"</span><span class="Special">%d</span><span class="Constant">"</span>, sum);<br /> <span class="Statement">if</span> (strpalindrome(s1) && sum > largest) {<br />                largest = sum;<br />            }<br />        }<br />    }</pre><br />If you are interested in the Project Euler problems but craving more detailed analysis, <a href="http://joelneely.wordpress.com/">Joel Neely</a> is <a href="http://joelneely.wordpress.com/category/project-euler/">working through</a> at a similar rate to me, but focusing his efforts on Scala and studying each problem and its solution in greater depth rather than flitting from language to language. Highly recommended.]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/project-euler-problem-4-extra.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Project Euler Problem 4</title>
      <link>http://blog.basildoncoder.com/2008/04/project-euler-problem-4.html</link>
      <pubDate>Tue, 22 Apr 2008 00:53:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>21</wp:post_id>
      <wp:post_date>2008-04-22 00:53:00</wp:post_date>
      <wp:post_date_gmt>2008-04-22 00:53:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-4</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<strong><em><a href="http://projecteuler.net/index.php?section=problems&amp;id=4">Problem 4</a></em></strong> is as follows:<br /><blockquote>A palindromic number reads the same both ways. The largest palindrome made from the product of two 2-digit numbers is 9009 = 91 × 99.<br /><br />Find the largest palindrome made from the product of two 3-digit numbers.</blockquote><br />Bit of an easy one, this. The approach is pretty simple to understand - first calculate all the products of every pair of numbers between 100 and 999, then filter for the palindromic ones, and finally select the largest. The only even vaguely tricky bit is determining if the number is palindromic. The easiest check is to simply convert the number to a string, and check if the string is equal to itself when reversed.<br /><br />To shake myself out of C#/python complacency, I decided to write my first attempt at this in good old C. I'm a bit rusty so this took a few goes to get right (the shame).<br /><br />First, I need a string reverse function. For those of us that learned to program when C and C++ were king (before that upstart Java came long and ousted languages with pointers from classrooms up and down the land), this is bread and butter.<br /><pre><span class="Type">char</span>* strrev(<span class="Type">char</span>* s) { <br /> <span class="Type">char</span> *s1, *s2; <br /> <span class="Type">char</span> c;                           <br /><br />    s1 = s2 = s; <br /> <span class="Statement">while</span> (*s2) <br />        s2++;                           <br /><br /> <span class="Statement">while</span> (s1 < s2) { <br />        c = *(--s2); <br />        *s2 = *s1; <br />        *s1++ = c; <br />    } <br /> <span class="Statement">return</span> s; <br />}</pre><br />If you can't read that, shame on you, go and pick up a copy of <a href="http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/">K&R;</a> and read it until you weep. In the meantime, basically what happens here is I set pointers to the start (s1) and end (s2) of the original string (s), then swap the pointed-to characters using a temporary variable (c) and move both pointers 1 character towards each other. Repeat until they meet in the middle.<br /><br />In this day and age of immutable strings, this old friend now feels a little weird - although I retain (and eventually return) the original pointer, I have in fact modified the actual string that was passed in. Contrast this with C's trendy modern progeny, where you can't change a string at all and have to use a StringB[uilder|uffer] when mutating strings (unless lousy performance makes you smile, of course).<br /><br />Still, now it is fairly simple to solve the problem. A nested for loop will let me calculate all the products, and then I just need to convert the results to strings and do the palindrome test. I keep track of the largest palindromic number found so far, and print it at the end.<br /><pre><span class="Type">int</span> main() { <br /> <span class="Type">int</span> i, j; <br /> <span class="Type">int</span> largest = -<span class="Constant">1</span>; <br /> <span class="Type">char</span> s1[<span class="Constant">7</span>]; <br /> <span class="Type">char</span> s2[<span class="Constant">7</span>];                           <br /><br /> <span class="Statement">for</span> (i = <span class="Constant">100</span>; i < <span class="Constant">1000</span>; ++i) { <br /> <span class="Statement">for</span> (j = i; j < <span class="Constant">1000</span>; ++j) { <br /> <span class="Type">int</span> sum = i * j; <br />            sprintf(s1, <span class="Constant">"</span><span class="Special">%d</span><span class="Constant">"</span>, sum); <br />            strcpy(s2, s1); <br />            strrev(s2); <br /> <span class="Statement">if</span> (strcmp(s1, s2) == <span class="Constant">0</span> && sum > largest) { <br />                largest = sum; <br />            } <br />        } <br />    }                           <br /><br />    printf(<span class="Constant">"</span><span class="Special">%d</span><span class="Special">\n</span><span class="Constant">"</span>, largest);                           <br /><br /> <span class="Statement">return</span> <span class="Constant">0</span>; <br />}</pre><br />Note I'm using the much-maligned strcpy function here (the cause of most of the buffer overflow attacks that were so endemic a few years back), but since I completely control the input it's no problem. Also note the use of sprintf to convert the int to a string, and I have to make a copy of the resulting string since my strrev function is destructive. The char arrays are of size 7, since the largest possible product in the problem space is 999*999=998001 which is 6 digits - plus 1 for the null terminator. Which I didn't forget about at all in my first attempt at this, nosirree.<br /><br />To make the code a bit more 'modern' I could do the allocation and copy in the strrev function, so that the passed-in string remains unchanged and a new string gets returned, but without a garbage collector to rely on this potentially leads to memory leaks (since strrev allocates the memory but relies on the caller to free it - easy to forget!). Anyway, I'm wallowing in nostalgia here so who cares about modern idioms.<br /><br />Whilst I chose C for this on a whim, it is (as always) enlightening to write a little C now and then, as it reminds you of the cost of things that are often taken for granted. Some people <em>still</em> don't understand why a StringBuilder offers better performance (trust me, I have interviewed more than a few of them), and are happy to write string manipulation code using immutable strings that results in countless allocations and destructions taking place, for no justifiable reason. Writing some string manipulation (or anything else) in C is a nice way to regain a bit of insight and perspective if you are spoiled by quad-core PCs and high-falutin' generational garbage collectors and smartass runtimes that don't let you write past the end of an array.<br /><br />So, now we've got a nuts 'n' bolts reference implementation, let's look at some more exotic approaches.<br /><br />As regular readers will have noticed by now, I'm fairly keen on LINQ - so it should be no surprise that C# is my next port of call. I was amused to recall that the .Net string class lacks a Reverse method so I had to write my own for this, about 20 minutes after I finished pontificating about the clean healthy virtue of doing so in C! (I didn't plan it this way, honest.)<br /><br />There are of course many ways of writing a string reversal routine, but rather than attempt to mimic the fairly idiomatic C code above, I did the simple thing:<br /><pre><br /><span class="Type">public</span> <span class="Type">static</span> <span class="Type">string</span> Reverse(<span class="Statement">this</span> <span class="Type">string</span> s) <br />{ <br /> <span class="Type">char</span>[] ch = s.ToCharArray(); <br />    Array.Reverse(ch); <br /> <span class="Statement">return</span> <span class="Statement">new</span> <span class="Type">string</span>(ch); <br />}</pre><br />Since the Array class contains a Reverse method, I can just convert my string to an array (of chars), reverse that, then create a new string from it. Done. Things to meditate on regarding this approach:<br /><ol><br /> <li>It relies on a char array. Strings may look like a native type these days, but I have to expose their dark and shameful lineage to get the job done here.</li><br /> <li>The throwback nature of this implementation does not, of course, extend as far as modifying the parameter. A new string is returned and the original remains intact. The garbage collector will take care of deallocation.</li><br /> <li>This is an extension method on System.String, so I can use it naturally on any string.</li><br /></ol><br />Whatever faults it may have, it's definitely easier to read than the C code, since the syntax is much closer to the problem domain. This is a recurring theme when looking at expressiveness. The C code has to specify the entire algorithm for reversing the string, whereas here the Array.Reverse method allows us to ignore the details of <em>how</em> the string is reversed. For the purposes of this problem, we don't really care how the string is reversed, just that it <em>is</em> reversed.<br /><br />It's still warty, however, in that we have to know to turn the string into an array first, which may be completely non-intuitive to someone who's never tangled with C-style strings.<br /><br />With this minor omission from the .Net libraries sorted, the problem can be solved with a single compound LINQ query:<br /><pre><span class="Statement">return</span> (<span class="Statement">from</span> product <span class="Statement">in</span> <br />            ( <br /> <span class="Statement">from</span> i <span class="Statement">in</span> Enumerable.Range(<span class="Constant">100</span>, <span class="Constant">900</span>) <br /> <span class="Statement">from</span> j <span class="Statement">in</span> Enumerable.Range(i, <span class="Constant">1000</span> - i) <br /> <span class="Statement">select</span> i * j) <br /> <span class="Statement">where</span> product.ToString() == product.ToString().Reverse() <br /> <span class="Statement">select</span> product).Max();</pre><br />I think that's pretty concise, and quite readable too. The main thing I don't like about it is the use of Enumerable.Range, which takes 'start' and 'count' parameters rather than 'from' and 'to', which would look more natural in this case. <br /><br />Parameters aside, it's interesting to note the relative clumsiness of the twin calls to Enumerable.Range. Back when looking at <a href="http://basildoncoder.com/blog/2008/03/22/project-euler-problems-1-and-2/">problem 1</a>, replacing a for loop with a more declarative alternative made the code considerably more expressive. In this case, however, I don't think it helps quite so much. Once again, it's to do with the nature of the problem domain - a nested for loop is quite a natural way to represent the process of generating the products, so the benefit of a declarative approach is less marked.<br /><br />How to improve it? For fun, lets go the whole hog and make a simple fluent interface to improve readability of the LINQ query. This is what we want:<br /><pre><span class="Statement">return</span> (<span class="Statement">from</span> product <span class="Statement">in</span> AllProducts.From(<span class="Constant">100</span>).To(<span class="Constant">999</span>) <br /> <span class="Statement">where</span> product.ToString() == product.ToString().Reverse() <br /> <span class="Statement">select</span> product).Max();</pre><br />Nifty, huh? Well actually I have my reservations about fluent interfaces, but it's quite the fashion these days so I thought I'd give it a chance. The example above is trivial to achieve. On a class called AllProducts we need a static method called From which acts as a factory method, and an instance method called To which returns an IEnumerable<int> for use in the LINQ query. The class looks like this:<br /><pre><span class="Type">class</span> AllProducts <br />{ <br />    <span class="Type">private</span> <span class="Type">int</span> m_from; <br />    <span class="Type">private</span> AllProducts(<span class="Type">int</span> @from) <br />    { <br />        m_from = @from; <br />    }                    <br /><br />    <span class="Type">public</span> <span class="Type">static</span> AllProducts From(<span class="Type">int</span> from) <br />    { <br />        <span class="Statement">return</span> <span class="Statement">new</span> AllProducts(@from); <br />    }                    <br /><br />    <span class="Type">public</span> IEnumerable<<span class="Type">int</span>> To(<span class="Type">int</span> to) <br />    { <br />        <span class="Type">int</span> inclusiveTo = to + <span class="Constant">1</span>; <span class="Comment">// to is inclusive</span>                    <br /><br />        <span class="Statement">return</span> <span class="Statement">from</span> i <span class="Statement">in</span> Enumerable.Range( <br />                   m_from, inclusiveTo - m_from) <br />               <span class="Statement">from</span> j <span class="Statement">in</span> Enumerable.Range(i, inclusiveTo - i) <br />               <span class="Statement">select</span> i * j; <br />    } <br />}</pre><br />Fluent interfaces are definitely this season's black. I heard about a guy who wrote a mocking library without using fluent interfaces for expectations, and 500 angry TDD advocates chased him out of the building with pitchforks.<br /><br />I'm still a bit wary though, tweedy programmer as I am - I just get a bit nervous about writing hideously contorted classes with a mixture of static and instance methods, some returning the this ref, some returning arbitrary IEnumerables, some acting as factories - and all so the calling code can prance about in a tailored coat and a cool pair of shades. A noble goal, to be sure, but is the price too high? I guess we'll know in a year or two when some maintenance programmer has to try and debug it.<br /><br />Enough of the lousy clothes metaphor. To finish up what turned out to be a longer post than expected, here's an F# solution I hacked together before getting sidetracked with the whole fluent thing. I read a blog post <a href="http://geekswithblogs.net/Erik/archive/2008/02/18/119727.aspx">here</a> about problem 4 (<em><strong>warning</strong> - also contains solution to problem 6</em>) but didn't like it too much. It seems to be quite common when reading F# code on the web for there to be a reliance on Seq.unfold - I'm not sure it's always the right tool. Then again, my F# is sketchy at best for the moment, so maybe I should shut up. For balance, however, this is my solution without using unfold.<br /><br />Note first that F#, as a .Net language, also lacks a built-in way to reverse strings. The implementation is extremely similar to the C# approach above:<br /><pre><span class="Statement">let</span> rev <span class="Statement">(</span>s:<span class="Type">string</span><span class="Statement">)</span> <span class="Statement">=</span> <br /> <span class="Statement">let</span> ch <span class="Statement">=</span> s.<span class="Constant">ToCharArray()</span> <br /> <span class="Statement">let</span> ra <span class="Statement">=</span> <span class="PreProc">Array</span>.rev ch <br /> <span class="Statement">let</span> r <span class="Statement">=</span> <span class="Statement">new</span> <span class="Type">string</span><span class="Statement">(</span>ra<span class="Statement">)</span> <br />    r</pre><br />The actual implementation involves two helpers: a small recursive function to produce all possible products of the numbers contained in two lists, and a simple check to see if a string is equal to itself reversed.<br /><pre><span class="Statement">let</span> <span class="Constant">Euler4</span> <span class="Statement">=</span> <br /> <span class="Statement">let</span> <span class="Statement">rec</span> allProducts l1 l2 <span class="Statement">=</span> <br /> <span class="Statement">let</span> mul a lst <span class="Statement">=</span> <br /> <span class="PreProc">List</span>.map <span class="Statement">(fun</span> x <span class="Statement">-></span> a <span class="Statement">*</span> x<span class="Statement">)</span> lst <br /> <span class="Statement">match</span> l1 <span class="Statement">with</span> <br /> <span class="Statement">|</span> <span class="Constant">[]</span> <span class="Statement">-></span> <span class="Constant">[]</span> <br /> <span class="Statement">|</span> h<span class="Statement">::</span>t <span class="Statement">-></span> <span class="Statement">(</span>mul h l2<span class="Statement">)</span> @ <span class="Statement">(</span>allProducts t l2<span class="Statement">)</span> <br /><br /> <span class="Statement">let</span> isPalindrome x <span class="Statement">=</span> <br /> <span class="Statement">let</span> str <span class="Statement">=</span> <span class="PreProc">Int32</span>.to_string x <br />        str <span class="Statement">=</span> rev str</pre><br />With the plumbing in place, we can use the very groovy forward pipe operator to chain together some very readable code. The only thing to note in here is the reverse ordering of the parameters in the call to compare - this is because we want the results in descending order, so that the largest is at the head of the list and easily accessible with List.hd.<br /><pre>    allProducts <span class="Statement">[</span><span class="Constant">100</span>..<span class="Constant">999</span><span class="Statement">]</span> <span class="Statement">[</span><span class="Constant">100</span>..<span class="Constant">999</span><span class="Statement">]</span> <br /> <span class="Statement">|</span><span class="Statement">></span> <span class="PreProc">List</span>.filter isPalindrome <br /> <span class="Statement">|</span><span class="Statement">></span> <span class="PreProc">List</span>.sort <span class="Statement">(fun</span> x y <span class="Statement">=</span> compare y x<span class="Statement">)</span> <br /> <span class="Statement">|</span><span class="Statement">></span> <span class="PreProc">List</span>.hd</pre></int>]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/project-euler-problem-4.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>151</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-22 04:01:47</wp:comment_date>
        <wp:comment_date_gmt>2008-04-22 04:01:47</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I don&#39;t see why you just don&#39;t check the string directly to see if it is a palindrome.  Unless I&#39;m missing something, it&#39;s exactly the same complexity as your C string reverse function up there, conceptually cleaner, and more efficient.  Obviously the reverse thing makes more sense when you&#39;ve got the  fancy language and you care more about the programmer&#39;s efficiency than you do about the program&#39;s efficiency....]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>152</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-22 09:58:33</wp:comment_date>
        <wp:comment_date_gmt>2008-04-22 09:58:33</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[You&#39;re right, but I should point out that programmer efficiency - or more specifically expressiveness - is indeed what I am interested in here. The goal of this series is to complete a solution to each problem in multiple languages, and evaluate the solutions subjectively. <br /><br />Of course, the language choice is fairly arbitrary for each post (bar C#, which I&#39;m currently coding for a living and therefore tends to pop up a lot) so I don&#39;t claim this will be anything definitive. It&#39;s more an exploration.<br /><br />Actually, I&#39;ve missed a fairly obvious final step here to increase expressiveness further, which I&#39;ll do a separate post on later.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>153</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-23 11:53:25</wp:comment_date>
        <wp:comment_date_gmt>2008-04-23 11:53:25</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Yeah, my thoughts on this seem to be muddled.  I think I have two issues.  <br /><br />It seems to me that the solution of converting the string to an array, reversing the array, then converting the array back to a string is both grotesquely inefficient and somewhat inelegant.  But on the flip side, it&#39;s dead easy to program quickly and be certain that you&#39;ve got it right.<br /><br />My corresponding instinct is that you should probably only be dropping into C if program efficiency is important.  So even though I&#39;d agree that your second C solution (in the next post) is probably the most elegant solution, my programming instincts look at it and go &quot;Ack!  Why is he doing the simple greater than check only after doing all the string manipulation?!&quot;<br /><br />I guess my overall instinct is that if programmer efficiency is of paramount importance, you shouldn&#39;t be working in C at all.  Combined with a slight layer of bitterness at all the very high level language advocates who are always trying to tell me that program efficiency isn&#39;t that important anymore, when in my work it is still crucial (and likely will remain so for at least another decade).  :)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>154</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-23 15:19:26</wp:comment_date>
        <wp:comment_date_gmt>2008-04-23 15:19:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Again, you&#39;re right in all details, I just think we&#39;re looking at it through slightly different lenses. I worked on embedded software for a few years so I do have some exposure to areas where efficiency is paramount, and it still does crop up in desktop and web development (which is where I earn a crust these days), so I&#39;d never claim it&#39;s completely irrelevant. In fact, maybe part of the reason I&#39;m not pandering to it here is because I&#39;m indulging myself by ignoring it ;-)<br /><br />Regarding the choice of C in this post, if you look at some of the other posts in the series you&#39;ll see that I often do a straightforward imperative solution first, as to most developers that is still the most recognisable form. I chose C here partly in line with that, and partly on a whim - but not because I had performance (or lack of it) in mind. I haven&#39;t written any C code in anger for a couple of years, and this seemed like a good chance to review some of the basics.<br /><br />The string reversal/comparison stuff was simply the first straightforward solution that popped into my head. It was also convenient in that it was an approach that would work in most other languages, whereas mutating the string with pointers is a bit less universal :-)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>155</wp:comment_id>
        <wp:comment_author>Sol</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-23 17:26:12</wp:comment_date>
        <wp:comment_date_gmt>2008-04-23 17:26:12</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Oh sure, my last comment wasn&#39;t meant to contradict, just explain my &quot;lens&quot; a little bit better.  I forgot to say that I do, in fact, do lots of work in &quot;higher&quot; languages, most often Perl, and look forward to the day I have enough spare to to explore one of these fancy new functional languages in depth.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>156</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-23 18:34:16</wp:comment_date>
        <wp:comment_date_gmt>2008-04-23 18:34:16</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[You can do some fancy functional stuff without leaving Perl, if you&#39;ve got the stomach for it ;-) Try the <a href="http://search.cpan.org/~lbrocard/Language-Functional-0.03/Functional.pm" rel="nofollow">Language::Functional</a> module from CPAN, which gives you map, foldl, filter, take, and lots of other fundamental functions, though it doesn&#39;t really approach something like Haskell or F# (so you might find it tricky to emulate the pipeline of the F# solution above).]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>220</wp:comment_id>
        <wp:comment_author>progra</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-07-20 19:29:51</wp:comment_date>
        <wp:comment_date_gmt>2010-07-20 19:29:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[// this is how i wrote the program the first time.<br /><br /><br />import java.util.*;<br />public class euler4 {<br /><br /> /**<br />  * @param args<br />  */<br /> public static void main(String[] args) {<br />  // TODO Auto-generated method stub<br />         int num1=999;<br />         int num2=999;<br />         int sum=0;<br />         int i=0;<br />         int [] arr=new int[6];<br />         int orig=0;<br />         int biggest=0;<br /> <br />         for(num1=999;num1>=100;num1--){<br />         for(num2=999;num2>=100;num2--){<br />             i=0;<br />          sum=num1*num2;<br />          orig=num1*num2;<br />            while(sum>0){<br />              arr[i]=sum%10;<br />                 sum=sum/10;<br />                  i++;<br />          }          <br />           if(arr[0]==arr[5]&&arr;[1]==arr[4]&&arr;[2]==arr[3]){<br />            if(biggest<orig><br />                biggest=orig;<br />            }<br />            } <br /> <br /> <br />           }<br />         }<br />         System.out.print(biggest);<br />         }<br /> }</orig>]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>225</wp:comment_id>
        <wp:comment_author>NiMuSi</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://nimusi.net/blog</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-08-03 21:00:04</wp:comment_date>
        <wp:comment_date_gmt>2010-08-03 21:00:04</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Very useful information on string handling in various languages.<br /><br />The only tweak I could think of was to keep a record of the largest answer found so far. It would not be necessary to reverse and check all results, only those that were larger than the current highest.<br /><br />I have a Delphi (Pascal) implementation of this on my blog.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>229</wp:comment_id>
        <wp:comment_author>sseraph</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-10-19 01:38:12</wp:comment_date>
        <wp:comment_date_gmt>2010-10-19 01:38:12</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I used python.  I made a simple generate to generate 6 digit palindromes highest to lowest. For each one I got its prime factors and checked to see if a pair of 3 digit numbers could be generated from those factors.  <br /><br /><br />def factor(num):<br />    max = int(num ** 0.5)<br />    gen = primes_upto(max)<br />    factors = []<br />    for f in gen:<br />        if f > num: break<br />        while not num % f:<br />            num = num / f<br />            factors.append(f)<br />    if num > 1: factors.append(num)<br />    return factors<br /><br /><br />def gen_pal6():<br />    for i in range(9,1,-1):<br />        for j in range(9,0,-1):<br />            for k in range(9, 0, -1):<br />                pal = i * 100000 + j * 10000 + k * 1000 + k * 100 + j * 10 + i * 1<br />                yield pal<br /><br />def factor_pairs(factors, size):<br />    &#39;&#39;&#39; given list of factors find pairs of factors of given size equal to the factored number.  Presumes factors are prime and in increasing order.&#39;&#39;&#39;<br />    pair = []<br />    maxv = 10 ** size <br />    minv = 10 ** (size - 1)<br />    ilen = lambda x: len(str(x))<br />    #if largest factor is > size then impossible<br />    last = factors[-1]<br />    factors = factors[:-1]<br />    if last <maxv:><br />        while (last * factors[0]) < maxv:<br />            last = last * factors[0]<br />            factors = factors[1:]<br />        rest = reduce(lambda a,b: a * b, factors)<br />        if ilen(rest) == size:<br />            return rest,last<br />    return None<br /> <br /> <br /> <br />def euler4():<br />    gen = gen_pal6()<br />    for i in gen:<br />        pairs = factor_pairs(factor(i), 3)<br />        if pairs:<br />            return i, pairs</maxv:>]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Test-specific Shims in Production Code</title>
      <link>http://blog.basildoncoder.com/2008/04/test-specific-shims-in-production-code.html</link>
      <pubDate>Mon, 21 Apr 2008 13:51:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>22</wp:post_id>
      <wp:post_date>2008-04-21 13:51:00</wp:post_date>
      <wp:post_date_gmt>2008-04-21 13:51:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Test-specific-Shims-in-Production-Code</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[We're currently on a fairly major kick to increase automated test coverage of our software. This doesn't just mean 'get the unit test coverage up to scratch', it also means we are working towards full end-to-end integration testing using, amongst other tools, some front-end automation tools such as <a href="http://en.wikipedia.org/wiki/QuickTest_Professional">QTP</a> and <a href="http://selenium.openqa.org/">Selenium</a>.<br /><br />Of course, nothing is ever easy when trying to polish away the tarnish of ancient code. One particular problem we face regularly is patching up code that breaks the fragile expectations of some of these automation tools.<br /><br />Some of our applications - including the one <a href="http://basildoncoder.com/blog/2008/03/21/the-pg-wodehouse-method-of-refactoring/">I am working to refactor</a> - contain UI widgets that use a lot of custom painting routines and conceal data pretty well. One widget, for instance, needs to display data with a fast refresh rate and so uses a <a href="http://en.wikipedia.org/wiki/Double_buffering#Double_Buffering_in_Computer_Graphics">double-buffered</a> approach to avoid flicker. The data it displays, however, is not stored anywhere; it is discarded as soon as it is rendered. And since the whole widget view is rendered as a bitmap and blitted to screen, there's no convenient hierarchy of panels, labels, text boxes, or any other standard controls.<br /><br />This, the Automated QA folks tell me, causes a problem since QTP mainly works by reflecting on properties exposed by controls to get at their data. So, if QTP wants to read some data from a text box, it accesses the Text property of that text box. Simple. But this particular widget doesn't have the equivalent of a Text property.<br /><br />This isn't really an oversight from a purely functional point of view, since no part of the actual application code ever needs to get data from the widget - it's a display mechanism only, not an interactive widget like a text box. Data is received from a web service, processed a bit, and dumped into the widget. The widget is the last object to do anything with the data - no other part of the app ever needs it again.<br /><br />Since there are no properties on the widget exposing the data, QTP can't get at it.<br /><br />Of course, there are ways to keep QTP happy. We can add a few properties to the widget and keep some data around in member variables, or we can write some extensions for QTP that allow it to access some of the widget's internals. The second way is probably the 'right' way since it keeps test-related code external to the application code - but it's more time-consuming, and also has a training cost since most developers aren't going to be familiar with QTP's API.<br /><br />This leaves the first option. Traditionally I've always been a bit wary of having what is effectively test code (since it only exists for testing purposes) deployed with production code. Furthermore, doesn't it undermine the tests themselves, since they are dependent on code that never gets executed in production?<br /><br />On the other hand, in some instances it may be the more pragmatic thing to do. It's difficult to justify spending a day or two writing a few hundred lines of QTP extension code when the same effect can be garnered by adding a single read-only property. It still doesn't quite sit right for me though, and I can't find much in the way of authoritative literature that argues one way or the other.]]></content:encoded>
      <category domain="tag">Refactoring</category>
      <category domain="tag">Software Engineering</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/test-specific-shims-in-production-code.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>263</wp:comment_id>
        <wp:comment_author>Lisa Edward</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/02347831131096436893</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2013-08-28 12:48:44</wp:comment_date>
        <wp:comment_date_gmt>2013-08-28 12:48:44</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[This comment has been removed by a blog administrator.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Bash History Spelunking</title>
      <link>http://blog.basildoncoder.com/2008/04/bash-history-spelunking.html</link>
      <pubDate>Mon, 14 Apr 2008 14:50:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>23</wp:post_id>
      <wp:post_date>2008-04-14 14:50:00</wp:post_date>
      <wp:post_date_gmt>2008-04-14 14:50:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Bash-History-Spelunking</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Learned from <a href="http://www.weiqigao.com/blog/2008/04/11/whats_in_your_history.html">Weiqi</a>, who learned from <a href="http://blog.kagesenshi.org/2008/04/me-me.html" target="_blank">KageSenshi</a>, about a <a href="http://planet.fedoraproject.org/" target="_blank" rel="nofollow">Fedora Planet</a> shell history meme - post the results of running the following command on your linux box:<br /><pre><br />history <span class="Statement">|</span> awk <span class="Statement">'</span><span class="Constant">{a[$2]++ } END{for(i in a){print a[i] " " i}}</span><span class="Statement">'|</span>sort<br />-rn<span class="Statement">|</span>head</pre><br />I won't bother repeating the inevitable warning about the dangers of executing random shell scripts you find on the Internet, because I'm lazy and mean. Anyway, here's the results from my webhosting box:<br /><pre>231 ll<br />171 vim<br />132 cd<br />50 screen<br />43 cat<br />39 tail<br />34 ls<br />34 cls<br />32 exit<br />31 wget</pre><br />'ll' is an alias for 'ls -l', and 'cls' an alias for 'clear'. No real surprises otherwise - I use vim for development over ssh, I tail my logs occasionally, and live in GNU Screen.<br /><br />Here's the output from my home box:<br /><pre>254 ll<br />181 cd<br />148 sudo<br />123 rm<br />123 ffmpeg<br />86 screen<br />83 ls<br />75 cls<br />72 vim<br />60 find</pre><br />Quite similar actually, guess I'm set in my ways. The ffmpeg count is a bit of an anomaly, since I used it a lot recently to re-encode a bunch of <a href="http://en.wikipedia.org/wiki/Futurama">Futurama</a> rips for my mobile.<br /><br />Not sure what to do with this remarkable intel, however. Perhaps I'll use the data to generate an <a href="http://www.docuverse.com/blog/donpark/2007/01/19/identicon-explained">Identicon</a> and use it as a favicon? Or, perhaps not.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/bash-history-spelunking.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>147</wp:comment_id>
        <wp:comment_author>Random Musings</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.nslms.com/2008/04/16/fedora-bash-history-meme/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-16 16:50:15</wp:comment_date>
        <wp:comment_date_gmt>2008-04-16 16:50:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[<strong>Fedora Bash History Meme...</strong><br /><br />I just learned about a Bash History Meme originated at Planet Fedora from a blog I read regularly.<br />In short, you run the following command in bash, and show your results.<br /><br />history | awk &#39;{a[$2]++ } END{for(i in a){print a[i] &quot; &quot; i}}&#39;|sort -...]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>148</wp:comment_id>
        <wp:comment_author>Mike</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mikro2nd.net/blog/mike/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-19 16:43:09</wp:comment_date>
        <wp:comment_date_gmt>2008-04-19 16:43:09</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Mine came out:<br /><br />20 nethack<br />6 vi<br />5 ssh<br />5 ping<br />5 history<br />3 mount<br />3 cshore<br />2 man<br />2 find<br />2 eject<br /><br />Oh Dearie Me!]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Evil = Important. Apparently.</title>
      <link>http://blog.basildoncoder.com/2008/04/evil-important-apparently.html</link>
      <pubDate>Tue, 08 Apr 2008 16:34:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>24</wp:post_id>
      <wp:post_date>2008-04-08 16:34:00</wp:post_date>
      <wp:post_date_gmt>2008-04-08 16:34:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Evil-=-Important.-Apparently.</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[OK, I know I shouldn't even <em>acknowledge</em> spam blogs, but this one amused me. Some filthy credit-crunch link bait site took an extract from my <a href="http://basildoncoder.com/blog/2008/04/07/project-euler-problem-3/">previous post</a> (this is obviously what happens when you say the phrase 'credit card' ... oops) and ran it though an automated word substitution program. The result is fascinating. It turned this:<br /><blockquote>… you buy something from Amazon, you are protected by the fact that evil black-hats can't find the prime factors of your encryption key fast enough to steal your credit card number (OK, bit of a generalisation, but that's the gist). …</blockquote><br />into this:<br /><blockquote>… you take something from Amazon, you are secure by the fact that important black-hats can't connexion the matureness factors of your writing key alacritous adequacy to advise your assign calculate sort (OK, discernment of a generalisation, but that's the gist). …</blockquote><br />Let's review the highlights. 'Buy' replaced with 'take', 'evil' replaced with 'important', 'steal' replaced with 'advise'? Someone's book of synonyms is bound in human hide with a skull on the front.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/evil-important-apparently.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Project Euler Problem 3</title>
      <link>http://blog.basildoncoder.com/2008/04/project-euler-problem-3.html</link>
      <pubDate>Mon, 07 Apr 2008 13:38:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>25</wp:post_id>
      <wp:post_date>2008-04-07 13:38:00</wp:post_date>
      <wp:post_date_gmt>2008-04-07 13:38:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problem-3</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Next up in the list of Project Euler problems is this one:<br /><br /><em><strong><a href="http://projecteuler.net/index.php?section=problems&amp;id=3">Problem 3</a> </strong></em><br /><blockquote>The prime factors of 13195 are 5, 7, 13 and 29.<br /><br />What is the largest prime factor of the number 600851475143?</blockquote><br />This, obviously, is a factorisation problem. There is a colossal amount of material on the web for dealing with prime factorisation - a simple <a href="http://www.google.co.uk/search?q=prime+factorization">google search</a> pulls up lots of information. Prime factorisation (and the difficulty of doing it with sufficiently large numbers) is at the heart of the cryptographic methods we currently use on the internet - every time you buy something from Amazon, you are protected by the fact that evil black-hats can't find the prime factors of your encryption key fast enough to steal your credit card number (OK, bit of a generalisation, but that's the gist).<br /><br />One of the key phrases in the above paragraph is 'sufficiently large numbers'. For a computer, 600851475143 is not a particularly big number, so this problem can be brute-forced fairly easily. Of course, not all brute force approaches are created equal. The most naive algorithm would be something along the lines of a three-pass sweep - firstly test <em>every single number</em> between 2 and 600851475143 to see if it divides cleanly into 600851475143 (pass 1); then test each factor from pass 1 to see if it is prime (pass 2); and finally take the biggest of the pass 2 numbers to get your answer (pass 3).<br /><br />This would work, but it sucks.<br /><br />Fortunately, it's easy to optimise. Let the prime factors of our number N be f<sub>1</sub>, f<sub>2</sub> ... f<sub>n</sub>. If I start with the lowest prime number and work up from there looking for a factor, I know that the first factor I find will be prime (since if it wasn't prime, it would have factors of its own, which by definition would also be factors of our target number). This number is f<sub>1</sub>. I can divide the target number by f<sub>1</sub> and then factorise the result to find f<sub>2</sub>. Continuing this process will result in a list of prime factors, and then it's simply a case of selecting the largest.<br /><br />I can optimise further by not resetting the factor to the lowest prime number each time - since having found f<sub>1</sub> I know that there aren't any smaller factors, so I don't have to waste time looking for them. Here's the implementation in python:<br /><pre><span class="Statement">def</span> <span class="Identifier">primeFactors</span>(n, factor):<br />    factors = []<br /> <span class="Statement">while</span> (n % factor != 0):<br />        factor = factor + 1<br /><br />    factors.append(factor)<br /><br /> <span class="Statement">if</span> n > factor:<br />        factors.extend(primeFactors(n / factor, factor))<br /><br /> <span class="Statement">return</span> factors<br /><br /><span class="Statement">print</span> max(primeFactors(600851475143, 2))</pre><br />Note that in the recursive call the current factor is retained, so that the code doesn't repeat itself.<br /><br />This executes pretty quickly, but it could be better. For a start, since 600851475143 is odd there's no need to start with the only even prime number (2). Instead, I could just start at 3, and in the while loop skip over even numbers. This would cut the number of tested numbers in half.<br /><br />A more efficient trial division approach, however, would be to generate a list of primes, divide 600851475143 by each prime to find the prime factors, then simply select the largest. To use this solution, a prime number generator is needed.<br /><br />This is an interesting diversion - I've peeked at some of the other Project Euler problems and know that prime numbers will pop up again, so it may prove useful to have a generator handy for when I get to those. Some languages, like Ruby, have library functions that can give you primes, but other languages don't. If you're not interested in generating primes and just want to know the answer to problem 3, execute the code above and you're free to get down from the table.<br /><br /><em><strong>A Random Walk Off-Topic </strong></em><br /><br />The simplest way to generate primes is known as the <a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> after the Greek mathematician who invented it. In principle it's straightforward - take a list of all integers up to an arbitrary limit, then starting from 2 (the smallest prime), mark all the numbers that are multiples of 2. Then move to the next unmarked number (i.e. 3) and mark all the multiples of 3. Then you move to the next unmarked number (5, since 4 was marked as a multiple of 2) and mark all multiples. And so on, until you get to the end of your list. Whatever numbers remain unmarked are all the primes up to your arbitrary limit.<br /><br />.Net lacks a built-in prime generator, so to demonstrate the algorithm I'll create a simple C# implementation. The list of numbers is represented as an array of booleans, all set to true by default except indexes 0 and 1 (since we aren't interested in evaluating those numbers as prime).<br /><br />The other requirement for a funky contemporary .Net implementation is, of course, to expose the results with IEnumerable. This achieves two things - firstly, it lets the sieve class control enumeration and thus skip over the marked numbers (making the calling code cleaner), and secondly it lets me use LINQ to query it.<br /><br />So, here's the code:<br /><pre><br /><span class="Type">public</span> <span class="Type">class</span> SieveOfEratosthenes<br />{<br /> <span class="Type">private</span> <span class="Type">bool</span>[] m_numbers;<br /><br /> <span class="Type">public</span> SieveOfEratosthenes(<span class="Type">long</span> limit)<br />    {<br />        m_numbers = <span class="Statement">new</span> <span class="Type">bool</span>[limit + <span class="Constant">1</span>];<br /> <span class="Statement">for</span> (<span class="Type">long</span> l = <span class="Constant">2</span>; l < m_numbers.LongLength; ++l)<br />        {<br />            m_numbers[l] = <span class="Constant">true</span>;<br />        }<br /><br /> <span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">2</span>; i != -<span class="Constant">1</span>;<br />                i = Array.FindIndex(m_numbers, i + <span class="Constant">1</span>,<br />                    b => b == <span class="Constant">true</span>))<br />        {<br /> <span class="Statement">for</span> (<span class="Type">int</span> j = i * <span class="Constant">2</span>; j < m_numbers.Length; j += i)<br />                m_numbers[j] = <span class="Constant">false</span>;<br />        }<br />    }<br /><br /> <span class="Type">public</span> IEnumerable<<span class="Type">long</span>> Primes()<br />    {<br /> <span class="Statement">for</span> (<span class="Type">long</span> i = <span class="Constant">2</span>; i < m_numbers.LongLength; ++i)<br /> <span class="Statement">if</span> (m_numbers[i])<br /> <span class="Statement">yield</span> <span class="Statement">return</span> i;<br />    }<br />}</pre><br />Fairly straightforward. Basically, I start by marking 2 as prime. Then, an inner loop sets all multiples of 2 to false, since no (other) even numbers are prime. Each time round the loop, we find the next true element of the array (which will have a prime index), and mark all multiples false as per the description above. The loop terminates when FindIndex fails to find any more true elements.<br /><br />This results in an array where the only elements with a value of true are those with a prime index. This makes the actual IEnumerable generator very easy to write - it yield returns the index whenever it finds a true element.<br /><br />There's a problem with this code, however, that makes it unusable with Euler problem 3 (at least in .Net - hence why I called it a 'diversion' earlier, rather than an alternative solution). In .Net, you can't create an array with 600851475143 elements, since an array with 600851475143 elements is way above the maximum array size limit of 2GB. Even if each element is only a single byte, 600851475143 bytes is about 560GB.<br /><br />Therefore, you can't create a sieve big enough to solve the problem.<br /><br />When using trial division it seems that it is enough to only generate primes up to the square root of N, though there are cases when this is not true (e.g. where N=15, sqrt(N) =  ~3.873, but the largest prime factor of 15 is 5), and I don't have the maths (yet!) to know how big a fudge-factor is needed. I've seen a solution on the Project Euler forum that generates primes up to sqrt(N) + 10, which solves the example of N=15 above, but does it solve ALL cases? Another approach might be to generate the list of primes such that the largest prime in the list is the first prime > sqrt(N) - but now I'm completely guessing.<br /><br />Still, for numbers that fit inside the 2GB limit, we can find the largest factor easily.<br /><pre><span class="Type"></span><span class="Type">var</span> sieve = <span class="Statement">new</span> SieveOfEratosthenes(<span class="Constant">15</span>);</pre><br />Now I have my IEnumerable sieve, I can craft a LINQ query to find the largest factor. All I need to do is filter my list of primes for those which divide directly into 15 and call the Max() method:<br /><pre><span class="Statement">return</span> (<span class="Statement">from</span> p <span class="Statement">in</span> sieve.Primes()<br /> <span class="Statement">where</span> <span class="Constant">15</span> % p == <span class="Constant">0</span><br /> <span class="Statement">select</span> p).Max();</pre><br />Done! And I have a handy reusable prime generator for later on.]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/04/project-euler-problem-3.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>149</wp:comment_id>
        <wp:comment_author>Prime time programming « Sliding up the banister</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://joelneely.wordpress.com/2008/04/19/prime-time-programming/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-20 00:32:29</wp:comment_date>
        <wp:comment_date_gmt>2008-04-20 00:32:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] noticed that Basildon Coder had a post on this same problem. I held off reading it until after working through my own approach, [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>150</wp:comment_id>
        <wp:comment_author>-jn-</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://joelneely.wordpress.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-20 01:09:18</wp:comment_date>
        <wp:comment_date_gmt>2008-04-20 01:09:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Interesting! I learned a bit more Python by reading your post.<br /><br />With respect to &quot;only generate primes up to the square root of N&quot;, no fudge-factor is needed. Simply keep track of the running quotient. After dividing 15 by 3 to get a quotient of 5, and verifying that 4 is > √15, you know that 5 is prime.<br /><br />It can&#39;t have two factors greater than √15 else it woud be > 15 itself. It can&#39;t have a factor less than √15, because all of those factors have already been eliminated.<br /><br />Thanks for keeping it going!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>196</wp:comment_id>
        <wp:comment_author>Project Euler - Problem 3 - Javascript | alt42</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.alt42.co.uk/?p=78</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-05-20 12:46:03</wp:comment_date>
        <wp:comment_date_gmt>2009-05-20 12:46:03</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] completed the problem I Googled it and found Basildon Coder's blog. He explains the various approaches and improvements well. I  felt a bit better when he introduced [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>197</wp:comment_id>
        <wp:comment_author>uberlieder</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-07-14 22:07:44</wp:comment_date>
        <wp:comment_date_gmt>2009-07-14 22:07:44</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Thanks for this, massively shortened the time needed. This is a great way to pick up a new language.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>213</wp:comment_id>
        <wp:comment_author>pyNewb</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-03-19 23:19:24</wp:comment_date>
        <wp:comment_date_gmt>2010-03-19 23:19:24</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Interesting approach.<br /><br />I was letting my solution run when I decided to see how others solved this question.<br /><br />My code is STILL running while I&#39;m typing this [~5mins], so I was really impressed at how fast this was.<br /><br />Thanks.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>215</wp:comment_id>
        <wp:comment_author>UltraL0rd</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.ultralord.za.net</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-05-18 19:34:28</wp:comment_date>
        <wp:comment_date_gmt>2010-05-18 19:34:28</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A lot of questions are made easier if you do this problem right the first time.<br />After using Sieve&#39;s algorithm I cut down my execution from over 4000ms down to 47ms :D<br /><br />More info about my struggle with this little bastard of a problem : <br />http://www.ultralord.za.net/2010/05/14/project-euler-problem-3-solved/]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>222</wp:comment_id>
        <wp:comment_author>Meenakshi Sundaram</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-08-02 14:37:41</wp:comment_date>
        <wp:comment_date_gmt>2010-08-02 14:37:41</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A slightly modified version. I have avoided the use of recursion.<br />def primeFactors(n,factor):<br /> factors=[]<br /> newn=n<br /> while(factor*factor <= newn):<br />  while(newn % factor !=0):<br />   factor=factor+1<br /><br />  factors.append(factor)<br />  newn=newn/factor<br /> if(factor!=1):<br />  factors.append(newn)<br /> return factors]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>223</wp:comment_id>
        <wp:comment_author>Meenakshi Sundaram</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-08-02 14:43:30</wp:comment_date>
        <wp:comment_date_gmt>2010-08-02 14:43:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[sorry a correction <br />def primeFactors(n,factor):<br />factors=[]<br />newn=n<br />while(factor*factor <= newn):<br />while(newn % factor !=0):<br />factor=factor+1<br /><br />factors.append(factor)<br />newn=newn/factor<br />if(newn!=1):<br />factors.append(newn)<br />return factors]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>224</wp:comment_id>
        <wp:comment_author>Meenakshi Sundaram</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-08-02 15:09:45</wp:comment_date>
        <wp:comment_date_gmt>2010-08-02 15:09:45</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Two while loops slow down the process in case the number is a prime. So one can replace the inner while loop as follows:<br />def primeFactors(n,factor):<br />factors=1<br />newn=n<br />while(factor*factor <= newn):<br />if(newn % factor !=0):<br />factor=factor+1<br />else:<br />factors=max(factors,factor)<br />newn=newn/factor<br />if(newn!=1):<br />factors=max(factors,newn)<br />return factors]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>227</wp:comment_id>
        <wp:comment_author>Up</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.askingdev.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-09-30 09:23:22</wp:comment_date>
        <wp:comment_date_gmt>2010-09-30 09:23:22</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[It should work. Thanks.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>228</wp:comment_id>
        <wp:comment_author>lolpium</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-10-18 18:10:17</wp:comment_date>
        <wp:comment_date_gmt>2010-10-18 18:10:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hey I&#39;m very much a beginner but was pretty stoked I could run this in 3164ms. Heres the code --<br /><br />#The prime factors of 13195 are 5, 7, 13 and 29.<br />#What is the largest prime factor of the number 600851475143?<br />import os, sys, math, sets, time<br /><br />time1 = time.clock()<br />iniList = []<br /><br />var = 600851475143<br /><br />def factorize(num):<br />    templist = []<br />    max = int(math.sqrt(num))<br />    print &quot;max = &quot;,max<br />    i = 1<br />    while i m and i%m != 0:<br />                        pass<br />                    else:<br />                        x = 0<br />                if x == 1:<br />                    templist.append(i)    <br />        else:<br />            pass<br />        i = i + 1<br />    return templist<br /><br />mylist = factorize(var)<br />print mylist<br />time2 = time.clock()<br />print &#39;time = &#39;,time2-time1]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>231</wp:comment_id>
        <wp:comment_author>nfb7</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-11-15 05:58:57</wp:comment_date>
        <wp:comment_date_gmt>2010-11-15 05:58:57</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I am using C++ to write my solution to this problem, and I am having trouble with the mod operator. How can I mod this huge number when it is out of the range for an int?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>239</wp:comment_id>
        <wp:comment_author>sa6eto</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-01-24 10:17:38</wp:comment_date>
        <wp:comment_date_gmt>2011-01-24 10:17:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Using Eratosthenes method for finding primes in Java this problem takes 47ms and about 100KB of ram. I guess the performance will be the same in any programming language.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>244</wp:comment_id>
        <wp:comment_author>Thebigcheeze</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-04-15 16:58:08</wp:comment_date>
        <wp:comment_date_gmt>2011-04-15 16:58:08</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Check into using the BitArray class for your C# implementation.  It&#39;s meant for holding large volumes of binary data.  Obviously, it can&#39;t hold everything (69.9GB) but you gain an 8x datasize improvement over using booleans (assuming booleans use 1 byte per bool).]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>The Lightbulb Moment</title>
      <link>http://blog.basildoncoder.com/2008/03/lightbulb-moment.html</link>
      <pubDate>Tue, 25 Mar 2008 18:06:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>26</wp:post_id>
      <wp:post_date>2008-03-25 18:06:00</wp:post_date>
      <wp:post_date_gmt>2008-03-25 18:06:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>The-Lightbulb-Moment</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<a href="http://www.weiqigao.com/blog/">Weiqi Gao</a> has a <a href="http://www.weiqigao.com/blog/2008/03/24/scala_still_uncomfortable_after_five_years.html">post</a> up today discussing the trials of grokking <a href="http://www.scala-lang.org/">Scala</a>. Scala is a language I want to take a much closer look at later this year, since I want to become current on the <a href="http://en.wikipedia.org/wiki/Java_Virtual_Machine">JVM</a> again (having not been on talking terms with it since using J2SE 1.4 around the summer of 2003) without being particularly keen on tangling with the Java language itself.<br /><br />One of the key features of Scala is the functional programming style it brings to the JVM. It's actually quite common to use certain functional idioms in Java - e.g. passing around a function as a parameter - but the syntax is clunky and verbose (unless and until closures get confirmed in 1.7, that is, and maybe even then).<br /><br />For example, take a look at this very simple idiomatic code for spinning off a thread to perform an expensive operation:<br /><pre><span class="Statement">new</span> Thread (<span class="Statement">new</span> Runnable() {<br /> <span class="Type">public</span> <span class="Type">void</span> run() {<br />        someObj.doExpensiveOperation();<br />    }<br />}).start();</pre><br />Now that's not the most hideous code I've ever seen, but it's a bit...wordy. Compare it to this equivalent implementation in Java's closest mainstream relative, C#:<br /><pre><span class="Statement">new</span> Thread(x => someObj.DoExpensiveOperation()).Start();</pre><br />I much prefer this syntax, even taking into account the throwaway lambda parameter that's only there to satisfy the ThreadStart signature. The Scala syntax is even nicer, however:<br /><pre>spawn({ someObj.doSomethingExpensive })</pre><br />This is the sort of thing that piques my interest about the language - expressive syntax and a very funky concurrency model will get my attention, <em>especially</em> when running on something as mainstream as the JVM and with full interoperability with the frankly staggeringly-vast  Java library ecosystem. I like F# on the <a href="http://en.wikipedia.org/wiki/Common_Language_Runtime">CLR</a> for similar reasons.<br /><br />But I digress; what I wanted to talk about was a point made by Weiqi, when discussing the pattern-matching capabilities of Scala:<br /><blockquote>Pattern matching in Scala is exactly the point at which I would spend time trying to understand it, trying to master it, trying to learn to use it. I understand the syntax. I understand the explanation that the speakers in presentations gave. I do get to the part where I say "This is cool." But I never get to the point where I would see a problem and say "This problem is best solved with pattern matching, let me fire up Scala and code the solution."</blockquote><br />This strikes a chord for me, as I have gone through that stage once or twice myself with other features in other languages and yet can't quite put my finger on how I get past it. I don't think it's something you consciously do - it's just something you keep grafting away at until suddenly you realise that the technique, whatever it is, has become part of your armoury.<br /><br />Closures are an obvious example I can think of in my own background. I was raised as a straight-down-the-middle C++ man, way back in the early/mid-90s, cutting my teeth on Borland Turbo C++ 3 on Windows 3.1. When I first started to play with functional languages it took a long time for me to 'get it', and even when I understood what a closure was after a couple of weekends hacking around in OCaml, I couldn't envisage when I'd ever need one.<br /><br />Soon after, whilst working on a Konfabulator widget in javascript, I noticed I was using them all the time. I suddenly had much more insight into what ruby blocks were doing. It wasn't so much that I noticed the lights go on - <em>they'd been on for some time</em> and I hadn't realised.<br /><br />People commonly refer to the 'lightbulb moment' or 'the lights went on' as being the point where a flash of inspiration hits and everything suddenly makes sense. I don't like this metaphor. If I need to go to the bathroom in the middle of the night, when the lights go on I squint in pain and stagger around just as blindly as I did before. But then I acclimatise, and all becomes clear. And so it is, I think, with learning alien concepts - you need a bit of time to adjust to the dazzling light.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/03/lightbulb-moment.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Project Euler Problems 1 and 2</title>
      <link>http://blog.basildoncoder.com/2008/03/project-euler-problems-1-and-2.html</link>
      <pubDate>Sat, 22 Mar 2008 17:33:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>27</wp:post_id>
      <wp:post_date>2008-03-22 17:33:00</wp:post_date>
      <wp:post_date_gmt>2008-03-22 17:33:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Project-Euler-Problems-1-and-2</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Browsing through <a href="http://natehoellein.blogspot.com/">Nate Hoellein's blog</a> recently led me to <a href="http://projecteuler.net/">Project Euler</a>. This is a problem - I have a horrendous feeling I'm about to get addicted to it, to the cost of just about everything else that normally occupies my free time. Ack.<br /><br />Still, at least it provides some blogging material. I'm going to start working my way through the list, and try to create idiomatic solutions in a number of languages. I won't always look for the most efficient solution, since I'm also interested in expressiveness (see <a href="http://basildoncoder.com/blog/2008/01/26/fab-fib/">here</a> and <a href="http://basildoncoder.com/blog/2008/02/22/code-can-be-beautiful/">here</a> for previous posts on the subject).<br /><br />To start with, here's some code and thoughts for problems 1 and 2.<br /><br /><a href="http://projecteuler.net/index.php?section=problems&amp;id=1"><em><strong>Problem 1</strong></em></a><br /><blockquote>Add all the natural numbers below 1000 that are multiples of 3 or 5.</blockquote><br />This is generally regarded as the easiest Euler problem, so shouldn't present too many problems. Mainstream software development is still dominated by imperative languages and styles, so the most recognisable solution to this would be a straightforward for-loop. Here is an imperative C# solution:<br /><pre><span class="Type">int</span> result = <span class="Constant">0</span>;<br /><span class="Statement">for</span> (<span class="Type">int</span> i = <span class="Constant">0</span>; i < <span class="Constant">1000</span>; ++i)<br />{<br /> <span class="Statement">if</span> (i % <span class="Constant">3</span> == <span class="Constant">0</span> || i % <span class="Constant">5</span> == <span class="Constant">0</span>)<br />        result += i;<br />}</pre><br />Simple enough, but as with all for-loops the guts are a little too visible. I have to explicitly declare and increment an accumulator variable as well as the loop counter. A functional style (Haskell in this case) allows a more declarative solution:<br /><pre>sum <span class="Statement">$</span> filter (<span class="Statement">\</span>n <span class="Statement">-></span> n <span class="Statement">`mod`</span> <span class="Constant">3</span> <span class="Statement">==</span> <span class="Constant">0</span> <span class="Statement">||</span> n <span class="Statement">`mod`</span> <span class="Constant">5</span> <span class="Statement">==</span> <span class="Constant">0</span>) <span class="Statement">$</span> [<span class="Constant">1</span><span class="Statement">..</span><span class="Constant">999</span>]</pre><br />Or, with list comprehensions:<br /><pre>sum [n <span class="Statement">|</span> n <span class="Statement"><-</span> [<span class="Constant">1</span><span class="Statement">..</span><span class="Constant">999</span>], n <span class="Statement">`mod`</span> <span class="Constant">3</span> <span class="Statement">==</span> <span class="Constant">0</span> <span class="Statement">||</span> n <span class="Statement">`mod`</span> <span class="Constant">5</span> <span class="Statement">==</span> <span class="Constant">0</span>]</pre><br />In both cases, the loop is replaced by a list generated from Haskell's range operator. [1..999] creates a list containing every integer between 1 and 999 inclusive. The modulo test is basically the same, though Haskell lacks a modulo operator (% in most C-family languages) so the mod function is used instead.<br /><br />Just for fun, here's an F# solution too:<br /><pre><br /><span class="Statement">let</span> sum <span class="Statement">=</span> <span class="PreProc">List</span>.fold_left <span class="Statement">(</span>+<span class="Statement">)</span> <span class="Constant">0</span><br /><span class="Statement">let</span> mod35 <span class="Statement">=</span> <span class="Statement">fun</span> x <span class="Statement">-></span> x % <span class="Constant">3</span> <span class="Statement">=</span> <span class="Constant">0</span> <span class="Statement">||</span> x % <span class="Constant">5</span> <span class="Statement">=</span> <span class="Constant">0</span><br /><br /><span class="PreProc">List</span>.filter mod35 <span class="Statement">[</span><span class="Constant">1</span>..<span class="Constant">999</span><span class="Statement">]</span> <span class="Statement">|</span><span class="Statement">></span> sum</pre><br />This could be compressed into a one-liner like the Haskell solutions, but it would be a bit long for my taste. Also note F# is slightly hamstrung by the lack of a built-in sum function, so I have to define my own using fold. Another F# solution is <a href="http://blogs.msdn.com/chrsmith/archive/2007/10/23/Project-Euler-in-F_2300_-_2D00_-Problem-1.aspx">here</a>, but I prefer mine. There's a very nice snippet in the comments of that page, though, which I like even more:<br /><pre><br /><span class="PreProc">Seq</span>.fold1 <span class="Statement">(</span>+<span class="Statement">)</span> <span class="Statement">{for</span> i <span class="Statement">in</span> <span class="Constant">1</span>..<span class="Constant">999</span> <span class="Statement">when</span> i % <span class="Constant">3</span> <span class="Statement">*</span> i % <span class="Constant">5</span> <span class="Statement">=</span> <span class="Constant">0</span> <span class="Statement">-></span> i<span class="Error">}</span></pre><br />Interestingly, C# is gaining some fairly powerful functional techniques lately, in particular LINQ. I can use the new Enumerable class to mimic range syntax and filter functionality from other languages, and lambdas to keep the code concise.<br /><pre>Enumerable.Range(<span class="Constant">1</span>, <span class="Constant">999</span>).Where(<br />        f => f % <span class="Constant">3</span> == <span class="Constant">0</span> || f % <span class="Constant">5</span> == <span class="Constant">0</span>).Sum();</pre><br />Note the similarity between F#/Haskell's lambda syntax and that of C#. It's very cool that a mainstream C-derivative language is getting this sort of syntax added to it.<br /><br />Alternatively, I could use LINQ query expressions for a different approach:<br /><pre><span class="Type">var</span> nums = <span class="Statement">from</span> n <span class="Statement">in</span> Enumerable.Range(<span class="Constant">1</span>, <span class="Constant">999</span>)<br /> <span class="Statement">where</span> n % <span class="Constant">3</span> == <span class="Constant">0</span> || n % <span class="Constant">5</span> == <span class="Constant">0</span><br /> <span class="Statement">select</span> n;<br />nums.Sum();</pre><br />Fun!<br /><br />It should be noted that all the Project Euler problems I've seen so far have mathematical solutions, meaning if you are able to classify the problem correctly it is straightforward to work out the answer with pen and paper. In this case, the problem is based around an arithmetic progression, and there are powerful formulae for reasoning about those. If you're interested, check out the <a href="http://projecteuler.net/index.php?section=forum&amp;id=1">forum</a> for problem 1.<br /><br /><a href="http://projecteuler.net/index.php?section=problems&amp;id=2"><em><strong>Problem 2</strong></em></a><br /><blockquote>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:<br /><p style="text-align: center">1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...</p><br />Find the sum of all the even-valued terms in the sequence which do not exceed four million.</blockquote><br />Ooh, Fibonacci. I've <a href="http://basildoncoder.com/blog/2008/01/26/fab-fib/">been here before</a>. Using the Haskell code from that post makes problem 2 a snip:<br /><pre>fib <span class="Statement">=</span> <span class="Constant">0</span> <span class="Statement">:</span> <span class="Constant">1</span> <span class="Statement">:</span> zipWith (<span class="Statement">+</span>) fib (tail fib)<br />sum <span class="Statement">$</span> filter even <span class="Statement">$</span> takeWhile (<span class="Statement"><</span><span class="Constant">4000000</span>) fib</pre><br />Given the lazy Fibonacci generator in the first line,  this just uses standard Haskell functions from the Prelude to do all the work - reading right to left, takeWhile pulls data from the fib sequence until the test fails (i.e. we've reached 4,000,000), filter even does exactly what it says on the tin, and sum does the business on the result.<br /><br />C# could solve problem 1 very neatly - can it keep up the pace in problem 2? Actually, yes it can, after a fashion. The lazy Fibonacci generator can be implemented using the yield statement added in C# 2.0. This is much more efficient than the naive recursive solution I looked at in my previous post about Fibonacci sequences. Once I have the generator, the LINQ statement is very concise and quite similar to the Haskell code - C# 3.0 even has TakeWhile!<br /><pre>IEnumerable<<span class="Type">long</span>> Fibs()<br />{<br /> <span class="Type">long</span> a = <span class="Constant">0</span>, b = <span class="Constant">1</span>;<br /><br /> <span class="Statement">while</span> (<span class="Constant">true</span>)<br />    {<br /> <span class="Statement">yield</span> <span class="Statement">return</span> b;<br /><br />        b = a + b;<br />        a = b - a;<br />    }<br />}<br /><br />Fibs().TakeWhile(f => f < <span class="Constant">4000000</span>).Where(f => f % <span class="Constant">2</span> == <span class="Constant">0</span>).Sum();</pre><br />The more I use C# 3.0, the more I like it - there's quite a bit of power in there.<br /><br />As with problem 1, there are some fascinating mathematical tricks that can be utilised when solving problem 2, and I recommend you check out the <a href="http://projecteuler.net/index.php?section=forum&amp;id=2">forum</a>. It's particularly cool to see how the Golden Ratio can be brought into play when working with Fibonacci sequences - I had no idea these techniques existed. So much to learn!]]></content:encoded>
      <category domain="tag">Mathematics</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Project Euler</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/03/project-euler-problems-1-and-2.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>83</wp:comment_id>
        <wp:comment_author>J</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 10:30:50</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 10:30:50</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I quote &quot;C# could solve problem 1 very neatly - can it keep up the pace in problem 2? Actually, yes it can, after a fashion.&quot;<br /><br />While efficient writing is one thing, what happens when the code hits the silicon?  Do they compile efficiently?  Does the processor run faster with one snippet over another?<br /><br />Many get spoiled by GHz machines with GB of RAM, but those of us in the embedded market still worry about code size and execution speed...<br /><br />J]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>97</wp:comment_id>
        <wp:comment_author>PJ6</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 17:15:17</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 17:15:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[J: The DotNet Framework&#39;s compiler works extremely well. I would expect that the newer structures are supported with optimizations that one could otherwise only achieve writing IL by hand.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>98</wp:comment_id>
        <wp:comment_author>PJ6</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 17:19:15</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 17:19:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Actually, someone throw Ackermann at it and see what it does...]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>132</wp:comment_id>
        <wp:comment_author>Hugh Redelmeier</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 19:03:28</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 19:03:28</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Problem 1 seems to be quite efficiently solved in the standard UNIX bc program.  O(1) (ignoring the fact that bc uses arbitrary precision numbers).<br />  $ bc<br />  define s(n) { return n * (n + 1) / 2 }<br />  define t(n,m) { return s((n - (n % m)) / m) * m }<br />  t(999,3) + t(999,5) - t(999,15)<br />  233168<br />  quit<br /><br />s(n) is the sum of the integers 1 to n, inclusive.<br />t(n,m) is the sum of all the integers that are multiples of m between 1 and n, inclusive.<br />The problem answer is the (sum of multiples of three) + (sum of multiples of five) - (sum of multiples of 15 since they would have been counted twice).<br /><br />Your C# program would choke if you changed 1000 to a googol.  The BC program says:<br />23333333333333333333333333333333333333333333333333333<br />33333333333333333333333333333333333333333333333166666<br />66666666666666666666666666666666666666666666666666666<br />66666666666666666666666666666666666666668<br />I haven&#39;t checked if that is correct. but it has about the right number of digits.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>142</wp:comment_id>
        <wp:comment_author>The burden of FP « Sliding up the banister</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://joelneely.wordpress.com/2008/04/06/the-burden-of-fp/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-06 17:58:33</wp:comment_date>
        <wp:comment_date_gmt>2008-04-06 17:58:33</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] not) brings me to Project Euler and the title of this post. I had heard of Project Euler before, butthis post enticed me to visit the site. One look and I was [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>144</wp:comment_id>
        <wp:comment_author>-jn-</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://joelneely.wordpress.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-10 03:24:30</wp:comment_date>
        <wp:comment_date_gmt>2008-04-10 03:24:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I finished the saga of Project Euler problem one, and found that the functional approach led me to the fastest solution in an unexpected way ( http://joelneely.wordpress.com/2008/04/09/the-burden-of-fp-part-3/ ). Thanks for the encouragement, and for keeping your series going.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>146</wp:comment_id>
        <wp:comment_author>Hugh Redelmeier</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-11 15:38:04</wp:comment_date>
        <wp:comment_date_gmt>2008-04-11 15:38:04</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[-jn-:<br />Functional programming didn&#39;t lead you to the fastest solution since you didn&#39;t get to the fastest solution.  Yours has a loop (recursion). My bc solution (above) has none.  It also happens to be side-effect free and hence functional.<br /><br />My version takes a little bit of mathematical reasoning to come up with, or a memory of the tale of Gauss summing the integers 1 to 50 too quickly for his teacher http://www.americanscientist.org/template/AssetDetail/assetid/50686?&print;=yes]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>164</wp:comment_id>
        <wp:comment_author>Path To Nirvana</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://nosyntax.wordpress.com/2008/07/18/projecteuler-problem-1/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-07-18 19:31:20</wp:comment_date>
        <wp:comment_date_gmt>2008-07-18 19:31:20</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[<strong>ProjectEuler Problem 1...</strong><br /><br />I have been learning Haskell, since couple of weeks. I am following the online book, Real World Haskell. For fun and learning, I decided to solve some problems from ProjectEuler. My solution for the first problem went through 3 stages, as I learnt more...]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>177</wp:comment_id>
        <wp:comment_author>The Great VB vs F# Euler Shootout Problem 1 | Do Loop Until You Die</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blog.matthewdoig.com/?p=63</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-09-24 04:09:54</wp:comment_date>
        <wp:comment_date_gmt>2008-09-24 04:09:54</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] was going to solve the problem in VB the standard brute force iteration way until I came across the following blog entry.  Again, I take no credit for the following code.  It has been scoffed from another [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>226</wp:comment_id>
        <wp:comment_author>Gipsy Gopinathan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.javaquestions.net</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-08-21 03:05:06</wp:comment_date>
        <wp:comment_date_gmt>2010-08-21 03:05:06</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[My solution for Problem 1 using Python (2.6.1):<br /><br />sum([x for x in range(1000) if x%3 == 0 or x%5 == 0])]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>235</wp:comment_id>
        <wp:comment_author>ssmm987</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://ssmm987.comyr.com/blog/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-12-26 16:06:39</wp:comment_date>
        <wp:comment_date_gmt>2010-12-26 16:06:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The first problem can be calculated a lot quicker:<br />int sum=0;<br />for(int i=15;i<=1000;i+=15)sum+=i;]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>237</wp:comment_id>
        <wp:comment_author>Siddharth</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://angumingum.wordpress.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-01-11 15:40:29</wp:comment_date>
        <wp:comment_date_gmt>2011-01-11 15:40:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi,<br /><br />Today i was introduced to the Euler project. Since im learning ruby now, decided to use this to practice ruby...it is concise. <br /><br /> (1..999).select{|x| x%3==0 or x%5==0}.reduce(:+)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>240</wp:comment_id>
        <wp:comment_author>Jer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-01-27 20:40:24</wp:comment_date>
        <wp:comment_date_gmt>2011-01-27 20:40:24</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[ssmm987,<br /><br />You miss-understood the problem. It is not the sum of multiples of 15. It&#39;s the sum of multiples of 3 or 5. You need to sum:<br /><br />(3 5 6 9 10 12 15 18 20 21 ...)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>243</wp:comment_id>
        <wp:comment_author>Proxy</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://proxy.co.hu</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-03-31 17:31:39</wp:comment_date>
        <wp:comment_date_gmt>2011-03-31 17:31:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Brilliant work. I will recommend your site]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>247</wp:comment_id>
        <wp:comment_author>Brian</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-16 02:22:55</wp:comment_date>
        <wp:comment_date_gmt>2011-06-16 02:22:55</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I like it in python:<br />sum([i for i in range(1000) if not (i%5 and i%3)])<br />or with a generator instead<br />sum((i for i in range(1000) if not (i%5 and i%3)))]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>The P.G. Wodehouse Method Of Refactoring</title>
      <link>http://blog.basildoncoder.com/2008/03/pg-wodehouse-method-of-refactoring.html</link>
      <pubDate>Fri, 21 Mar 2008 23:01:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>28</wp:post_id>
      <wp:post_date>2008-03-21 23:01:00</wp:post_date>
      <wp:post_date_gmt>2008-03-21 23:01:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>The-P.G.-Wodehouse-Method-Of-Refactoring</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I am much given to ruminating on refactoring at the moment, as one of my current projects is a major overhaul of a fairly large (>31,000 lines) application which has exactly the kind of dotted history any experienced developer has learned to fear - written by many different people, including short-term contractors, at a time in the company's life when first-mover advantage was significantly more important than coding best-practice, and without any consistent steer on the subjects of structure, coding conventions, unit tests, and so on.<br /><br />In other words, here be dragons.<br /><br />In fairness, the application <em>works</em> and has been a critical part of a company that has gone from nothing to market-leading multinational in 7 years, so it has certainly pulled its weight. It is in desperate need of a spring-clean though, and my team volunteered to spend 3 months evicting the cobwebs and polishing the brasswork.<br /><br />Yes, <em>volunteered</em> - it's a fascinating challenge, though perhaps not something you'd want to make a career of.<br /><br />Now, the first mistake to avoid here is the compulsion to throw it away and rewrite from scratch. So often when confronted with a vast seething moiling spiritless mass of code a developer throws his hands into the air and declares it a lost cause. <strong>How seductive is the thought that 31,000 lines of code could be thrown away and replaced with ~15,000 lines of clean, well-designed, <a href="http://basildoncoder.com/blog/2008/02/22/code-can-be-beautiful/">beautiful code</a>?</strong><br /><br />Sadly, that's often a path to disaster. It's almost a rule of the game. <a href="http://www.jwz.org/">jwz</a> left Netscape because he knew their decision to rewrite from scratch was doomed. <a href="http://www.joelonsoftware.com/">Joel Spolsky</a> wrote a <a href="http://www.joelonsoftware.com/articles/fog0000000069.html">rant</a> about the same decision - in fact, the Netscape rewrite is commonly cited as a major factor in Netscape losing the first browser war.<br /><br /><strong>The problem is that warty old code isn't always just warty - it's <em>battle-scarred</em>.</strong> It has years of tweaks and bug-fixes in there to deal with all sorts of edge conditions and obscure environments. Throw that out and replace it with pristine new code, and you'll often find that a load of very old issues suddenly come back to haunt you.<br /><br />So, a total rewrite is out. This means working with the old code, and finding ways to wrestle it into shape. Naturally, <em><a href="http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052">Working Effectively With Legacy Code</a></em> now has an even more firmly established place on my 'critical books' bookshelf than it did before.<br /><br />Inspiration came from a less well-known book, however. Buried in Chapter 10 of <em><a href="http://www.amazon.co.uk/Code-Reading-Perspective-Effective-Development/dp/0201799405">Code Reading</a></em> is a single paragraph suggesting that it can be useful when working with unfamiliar code to paste it into a word processor and zoom out, getting a 'bird's eye' view.<br /><blockquote>One other interesting way to look at a whole lot of source code quickly under Windows is to load it into Microsoft Word and then set the zoom factor to 10%. Each page of code will appear at about the size of a postage stamp, and you can get a surprising amount of information about the code's structure from the shape of the lines.<br /><p align="right">(Spinellis, 2003)</p><br /></blockquote><br />The idea is that this lets you immediately identify potential trouble spots - if you see pages where the code is all bunched up on the right, it indicates massive nesting and over-long functions. If you see heavy congestion, it indicates dense code. It's also easy to spot giant switch statements and other crimes against humanity.<br /><br />Of course, you don't actually need MS Word to do this - the Print Preview in Open Office is more than sufficient, and no doubt most office suites can do the same.<br /><p style="text-align: center"><img src="http://basildoncoder.com/images/print-preview-birds-eye-view.png" alt="" /></p><br /><br />This 50,000ft view could be a useful tool in tracking progress. I mean sure, we can have our build system spit out <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity">cyclomatic complexity</a> and code size metrics, but wouldn't it be neat if we could do a weekly bird's-eye printout of the source code and pin it up on the wall, giving a nice simple visual representation of the simplification of the code?<br /><br />Except, of course, that with average page lengths of 45 lines we'd need almost 700 pages each time, and a hell of a lot of wall space.<br /><br />A better solution would be to print a class per page. At the start of the project, the application had about 150 classes, and the refactoring effort is focussed on about 80 of those. Initially, gigantic classes would be an incomprehensible smudge of grey, but as the refactoring process starts tidying the code and factoring out into other classes, <strong>the weekly printout would start to literally come into focus</strong>, hopefully ending up with many pages actually containing readable code (which happens roughly when the class is small enough to fit on no more than 3 pages at normal size).<br /><br />The first time we pinned up the printouts, I suddenly recalled a Douglas Adams foreword reprinted in <em><a href="http://www.amazon.co.uk/Salmon-Doubt-Hitchhiking-Galaxy-Last/dp/0330323121">The Salmon of Doubt</a></em>. Adams was a great fan of P.G. Wodehouse, and explained Wodehouse's interesting drafting technique:<br /><blockquote>It is the next stage of writing—the relentless revising, refining, and polishing—that turned his works into the marvels of language we know and love. When he was writing a book, he used to pin the pages in undulating waves around the wall of his workroom. Pages he felt were working well would be pinned up high, and those that still needed work would be lower down the wall. His aim was to get the entire manuscript up to the picture rail before he handed it in.<br /><p align="right">(Adams, 2002)</p><br /></blockquote><br />Hmm, isn't redrafting a literary cousin of refactoring? In many ways, I think it is - so <strong>why not apply this technique to refactoring?</strong><br /><br />And we've made it so. We tied a piece of string horizontally across the wall - that's our 'picture rail'. Every week we reprint the classes we have been working on, and replace the old printouts. Then we move them up towards the string, in accordance with how happy we are with the view.<br /><br />Obviously, this doesn't replace all the other tools we have for evaluating code quality - e.g. the aforementioned metrics, unit tests, manual QA, and so on. It does, however, make for a brilliant way of tracking our <em>subjective </em>satisfaction with the class. <strong>Software quality tools can never completely replace the gut instinct of a developer</strong> - you might have massive test coverage, but that won't help with subjective measures such as <a href="http://en.wikipedia.org/wiki/Code_smell">code smells</a>. With Wodehouse-style refactoring, we can now easily keep track of which code we are happy with, and which code we remain deeply suspicious of.<br /><br />As an added benefit, all those pages nicely cover up the hideous wall colour. Bonus!]]></content:encoded>
      <category domain="tag">Refactoring</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/03/pg-wodehouse-method-of-refactoring.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>74</wp:comment_id>
        <wp:comment_author>Bold Lentil</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://boldlentil.wordpress.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-22 05:33:00</wp:comment_date>
        <wp:comment_date_gmt>2008-03-22 05:33:00</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Wodehouse and refactoring! Code page thumbnails and overall structure - nice! Progress measured not in the number of lines but in &quot;number of pages condensed&quot;.  Good post.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>75</wp:comment_id>
        <wp:comment_author>Diomidis Spinellis</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.spinellis.gr</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-22 07:36:59</wp:comment_date>
        <wp:comment_date_gmt>2008-03-22 07:36:59</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Credit where credit is due.  The suggestion to use Word&#39;s zoom feature was provided to me by Dave Thomas, one of the reviewers of the &quot;Code Reading&quot; book.  Here is his suggestion, copied verbatim from his review:<br /><br />&quot;An interesting way of looking at a whole lot of source quickly under Windows is to load it into Microsoft Word, and then set the zoom factor to 10%. Each page of code is about the size of a postage stamp, and you can get a surprising amount of information about the structure from the shape of the lines.&quot;]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>77</wp:comment_id>
        <wp:comment_author>Krishnan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-22 16:51:05</wp:comment_date>
        <wp:comment_date_gmt>2008-03-22 16:51:05</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Well done laddie!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>78</wp:comment_id>
        <wp:comment_author>Manne Laukkanen</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.mannelaukkanen.fi</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 08:47:12</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 08:47:12</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A most beautiful reminder of the power of a change in perspective indeed! Thank you, Sir!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>79</wp:comment_id>
        <wp:comment_author>Phil Factor</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.simple-talk.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 09:43:46</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 09:43:46</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A simple technique we used to use a long time ago was to move the cursor to the top of the source and then to stick your finger on the &#39;page down&#39; key. You&#39;ll see a blur of source wiggling across the screen, back and forth as the nesting level changes. When it gets too near the right-hand side of the screen, stop, and examine the code. That is where you usually find the worst crimes against the poor souls charged with refactoring.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>80</wp:comment_id>
        <wp:comment_author>Jos'h</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 09:48:18</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 09:48:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[One of the interesting things about Dr. Scheme is that it provides a nifty zoomed out code overview in a sidebar to the editor. It makes a for a nice quick way to judge what&#39;s happening in your code. I also found that I could more quickly navigate through the program by using the &quot;shape&quot; of the code in the area I needed.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>81</wp:comment_id>
        <wp:comment_author>Kristofer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://kaptenk.blogspot.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 09:55:41</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 09:55:41</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I think it is unfair to say that a &quot;total rewrite&quot; always fail. I think the issues are approached from the wrong angle.<br /><br />The ambition is seldom to copy a complex program but to re-invent it with the accumulated knowledge of its core business functions. Nothing would be gained from &#39;copying&#39; since as you suggest, you&#39;d probably just reintroduce old bugs because of copy-mistakes. Refactor works better because you are moving towards a goal implicitly defined by the couplings in your program; -The program code has an inertia and &#39;seeds&#39; of programming groups follow the law of least resistance. If the over all program was a result of a set of business requirements, chances are good the program will converge against an optimized image of those business requirements.<br /><br />But.. It should be possible to short cut this traditional evolution by more accurately control the seeds and better describe the _models_ of business requirements, thus enable a faster &#39;rewrite&#39; of the code to fit a slimmer set of business requirement with higher market value and better margins. Such a process would be preferred because it would enable the business producing the code to be much more agile. Remember the Dodo: Perfect evolution but stuck on the same track.<br /><br />What would it look like? Probably a dual model with one aspect looking like groups of independent teams responsible for code fragments which are subject to regular refactoring, and the other aspect would be programs exchanging these fragments as they &#39;mate&#39; to produce a business service. This is the nature of service-oriented and open source business...<br />So, &quot;rewrite&quot; fails because of the clumsy approach of a product-oriented business and the lack of an agile short-cutting strategy (ie thow everything and start over)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>84</wp:comment_id>
        <wp:comment_author>a bee</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 10:42:55</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 10:42:55</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[2-up; 4-up; 8=up.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>85</wp:comment_id>
        <wp:comment_author>markchd</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 11:25:10</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 11:25:10</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I just re-read Salmon of Doubt.  This idea seems such a logically extension. but reasoning never works that well.  I applaud your systematic approach to improving code.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>87</wp:comment_id>
        <wp:comment_author>freper</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 12:00:55</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 12:00:55</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Tree killers!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>88</wp:comment_id>
        <wp:comment_author>P.G. Wodehouse Refactoring</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.retro-coding.de/?p=1272</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 12:30:46</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 12:30:46</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Hausarbeiten an der Uni. Hatte auch im Salmon of Doubt davon gelesen und war rundum begeistert. Die Idee, auf diese Weise auch Code-Refactoring zu betreiben halte ich für schlichtweg genial, ich werd auch direkt mal versuchen, dass bei Videro einzubringen - das Kellerbüro von Bodo und [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>90</wp:comment_id>
        <wp:comment_author>Stephan Schmidt</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://stephan.reposita.org</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 13:31:59</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 13:31:59</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I&#39;d say 31 kloc is a rather small application, one can write on his own. Large applications would be one with > 5k classes and 1 mloc. Your definition may vary.<br /><br />Otherwise nice idea.<br /><br />Peace<br />-stephan]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>92</wp:comment_id>
        <wp:comment_author>John</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 15:28:05</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 15:28:05</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I used to work with a guy at IBM in the 60&#39;s.  He would print out his code (IBM Assembler by the way) and color code it with high lighters.  Conditional code, green; subroutine calls, red; etc. you get the idea.  Then he would take the listings and lay them out on the lawn of our building and view them from the fifth floor.  He managed to gain many insights into how the code was organized as he &quot;refactored&quot; (we didn&#39;t know that&#39;s what we were doing) the code.<br /><br />Old ideas never die, they just change shape.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>93</wp:comment_id>
        <wp:comment_author>battis.net » Blog Archive » Multiple Intelligences About Coding</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://battis.net/blog/2008/03/23/multiple-intelligences-about-coding/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 15:55:30</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 15:55:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] these ideas in creative ways: enter Basildon Coder, recently highlighted on Slashdot for describing a Wodehouse-ian approach to code refactoring. As always, I look at this and start to ponder how to use it in the classroom with my students: one [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>94</wp:comment_id>
        <wp:comment_author>jacob</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 15:58:41</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 15:58:41</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I have never heard the term &quot;edge condition&quot; before - can you explain?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>95</wp:comment_id>
        <wp:comment_author>gus3</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://gus3.typepad.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 16:38:17</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 16:38:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[And &quot;edge condition&quot; is a boundary between obvious correctness and obvious error, which if ignored, may propagate into subsequent calculations. It&#39;s kind of like your freezer being at 25 degrees F (or -4 C); a couple hours&#39; power failure causing that isn&#39;t a problem, but setting the thermostat there in the long term can cause food spoilage.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>96</wp:comment_id>
        <wp:comment_author>polerin</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://eclexia.net</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 16:48:26</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 16:48:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Edge conditions are &#39;Gotcha&#39; conditions, usually with a lower probability of happening,and caused by obscure factors or interactions.  Not handling them can result in nasty errors though.  Unfortunately one of the internal tools I use (a cable modem provisioning system called &quot;Bedrock&quot;) is a good example of this, and provides no clean way to fix problems without escalation and intervention with manual tools.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>99</wp:comment_id>
        <wp:comment_author>Lorin</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 17:31:33</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 17:31:33</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Ward Cunningham once wrote about another technique for quickly visually examining unfamiliar codebases.  He wrote a perl script to strip all the code down into curly braces and semicolons and looked for interesting patterns.   http://c2.com/doc/SignatureSurvey/]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>101</wp:comment_id>
        <wp:comment_author>Anomalizer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://anomalizer.net</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 17:40:53</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 17:40:53</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Identation is the key. A lot of people around me feel a moral obligation to use an entirely different indentation scheme for every 10 lines and wonder why I go ballistic when I see mixed schemes. I no longer argue over which scheme is better; just use the same scheme throughout a project.<br />The next thing is to start collapsing statements based on the nesting level. I start off with all blocks closed, and then do a hybrid of BFS and DFS of sorts: indentify all blocks at level &#39;n&#39;, then pick the first of those and now identify all of its children, then pick the first child and so on.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>102</wp:comment_id>
        <wp:comment_author>Deppli</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 18:15:50</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 18:15:50</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The &quot;‘bird's eye' view&quot; technique mentioned, well,<br />I figured out that&#39;s what the XTerm VT Font size (-MOUSE-3) &quot;Unreadable&quot; is useful for!<br /><br />There&#39;s an emacs package for zooming http://www.emacswiki.org/cgi-bin/wiki/zoom-frm.el<br />But won&#39;t zoom in close enough.  Nice to cycle through the font sizes though.<br /><br />As for zooming with OpenOffice, I find the text gets presented too fragmented and one also can&#39;t zoom in close enough (20%?).<br /><br />KWord works better for me.  One can zoom to 10%.  Don&#39;t need the Print Preview window: can zoom in the editing window.  The text isn&#39;t fragmented.<br />The pages are displayed in a single vertical column, which I find find most understandable presentation of linear flow.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>103</wp:comment_id>
        <wp:comment_author>David Barrett</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://quinthar.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 18:26:16</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 18:26:16</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I&#39;ve found that there are situations where a rewrite actually is preferable.  In particular, if you are rewriting with the aim of *reducing* functionality and *eliminating* complexity, then it can work.  But if you trying to *increase* functionality and *add* complexity (optimizations, flexibility, etc), then you&#39;ll probably fail.<br /><br />Contrary to popular belief, it really doesn&#39;t take long to write code.  It just takes long to debug it.  It&#39;s easier to debug a small set of simple code that you wrote from the ground up, than debug a huge set of nasty code that you&#39;re actively refactoring.  Even if it means you&#39;re just re-encountering the same general domain problems that coders solved before you, I&#39;d rather take those problems (at least I have a working reference to consult!) than take an entirely new set of implementation-specific problems in code I barely understand.<br /><br />Using these ideas, I and 2 others rewrote a p2p client and 6 servers in 6 weeks (from the beaches of Thailand, no less -- http://blog.redswoosh.net), and -- this is the kicker -- deployed it to 20 servers and several hundred thousand clients.  And it worked!  It was scary, but one of the best decisions we made, as I spent the previous six *months* trying to refactor through intense pain and significant complications (many of which, unfortunately, affected users and customers).<br /><br />So don&#39;t get caught up in religion: sometimes a rewrite is the way to go, especially if your goal is to do *less* than what you started with.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>104</wp:comment_id>
        <wp:comment_author>Fortran IV</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 18:28:07</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 18:28:07</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Jacob:  An &quot;edge condition&quot; is when the behavior of an otherwise uniform system changes as you approach its boundaries.<br /><br />In physics, for instance, imagine a massive (non-rotating) flat disk with a diameter of, say, the planet Jupiter.  Over most of the disk&#39;s surface you can stand upright.  Due to the relative size of the disk to yourself, the effect of gravity is effectively perpendicular to the disk&#39;s surface, because the force of gravity falls off with the square of distance.  But as you walk toward the edge of the disk, you begin to lean outward as the gravitational effect becomes less uniform.<br /><br />In computer graphics, you may have an edge condition if you attempt to draw a line with one or both endpoints off the screen and out of the screen buffer.  Or think of operations such as noise reduction, smoothing, or resizing of an image by comparing neighboring pixels; your code must allow for the edge condition where a given pixel has NO neighbors on one or two sides.<br /><br />John:  A co-worker once described to me another sort of &quot;rooftop debugging&quot; technique he saw back in the seventies.  The programmers printed a hex dump of machine memory at the time of a program failure (back before such a dump might cover a few hundred acres), spread it on the lawn, then climbed up on the roof and looked for visual patterns in the hex.  Pretty desperate.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>105</wp:comment_id>
        <wp:comment_author>Michael Trick's Operations Research Blog » P.G. Wodehouse approach to Modeling?</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mat.tepper.cmu.edu/blog/?p=243</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 18:32:43</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 18:32:43</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Basildon Coder has an article entitled “The P.G. Wodehouse Method of Refactoring”. Now, refactoring is pretty important to a lot of operations research. In particular, for linear [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>107</wp:comment_id>
        <wp:comment_author>P G Wodehouse and programming « Entertaining Research</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mogadalai.wordpress.com/2008/03/23/p-g-wodehouse-and-programming/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 20:16:45</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 20:16:45</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] G Wodehouse and programming  Basildon Coder on what software programmers can learn from P G Wodehouse's techniques of writi...: The first time we pinned up the printouts, I suddenly recalled a Douglas Adams foreword reprinted [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>108</wp:comment_id>
        <wp:comment_author>Tim Daly</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://daly.axiom-developer.org</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 20:32:55</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 20:32:55</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Here&#39;s another suggestion. Use literate programming.<br />(see Knuth).<br /><br />I refer you to the excellent book &quot;Lisp in Small Pieces&quot;. <br />You might not care about Lisp but this is an excellent <br />example of literate programming.<br /><br />Rewriting the program in literate form has two useful<br />effects. First, in order to explain the code in some logical<br />manner you end up &quot;tree shaking the code&quot;, that is, you<br />start somewhere, write up section 1 of chapter 1, and then<br />start following the threads from there, gradually moving<br />code from the original files into the new book. Dead code<br />will never get moved. Second, you end up having to write<br />a lucid explanation of the code which forces you to explain.<br />In order to develop the explanation you need to understand.<br />With understanding comes the ability to rewrite and refactor.<br /><br />You eventually end up with an extremely well documented<br />piece of code that anyone can sit down and read like a book;<br />at which point your chair-rail metric is exact.<br /><br />Tim Daly]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>109</wp:comment_id>
        <wp:comment_author>Poul-Henning Kamp</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 20:49:09</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 20:49:09</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The technique is not new, I used to print indexes of source-code on matrix-printers in &quot;one dot per char&quot; resolution back in the 1980ies.<br /><br />An often overlooked feature of the original X11 Xterm program, is the ability to select the &quot;unreadable&quot; font, which on a modern laptop easily displays 300-500 lines of sourcecode in one window.<br /><br />Now, if only somebody gave vi(1) a multicolumn feature to take advantage of the width of the screen also...<br /><br />Poul-Henning]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>110</wp:comment_id>
        <wp:comment_author>Jamie</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.fieldguidetoprogrammers.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 21:17:30</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 21:17:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;Oh, I daresay!  57% code coverage simply will not do, Jeeves!&quot;<br /><br />&quot;Very good, sir.&quot;]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>112</wp:comment_id>
        <wp:comment_author>Dan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 01:19:44</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 01:19:44</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[... some of you guys talk about refactoring code &quot;that&#39;s too far to the right&quot; like the objective is to make your code look as cute as a button.<br /><br />I tend to get the sneaking suspicion that these types don&#39;t understand that code is run on a machine, in machine code form, and that this is what matters to the successful operation of a program.<br /><br />When I write a program to search for an entry in a four dimensional array with two sparse dimensions, there will be alot of nesting in the text.  Wrapping it in functions so you can un-nest it is *not* going to improve the algorithm, it&#39;s just going to make it slower by introducing parameter stuffing into the loop.<br /><br />I tend to do almost all of my refactoring by:<br /><br />1) removing lazy function calls (strlen() twice!?  regular expressions to find 0x20 space character!?  malloc() every 16-byte struct!?)<br /><br />2) replacing recursion with iteration<br /><br />3) hoisting code out of loops<br /><br />4) removing as many cache and page misses as possible<br /><br />5) refactoring branching to reduced or non-branching form and minimizing other instruction pipe flushes.<br /><br />I find that clean, well written code is self obviating and so rarely comment.  In C, even a scripting language written this way won&#39;t exceed 8000 lines.<br /><br />In rare cases where an obscure trick is used to accomplish something important, I use comments.  This happened twice for my scripting engine - for the lexer switch&#39;s duff&#39;s device, and for the on-the-fly compiler&#39;s stack handling.<br /><br />Best Regards,<br />Dan]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>113</wp:comment_id>
        <wp:comment_author>Balint Joo</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 01:22:01</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 01:22:01</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Wooster: I say Jeeves, have you solved the refactoring problem yet?<br />Jeeves: I have given it my fullest attention sir, and I believe I have come up with a satisfactory solution. A mere pinning up of the printouts should provide the necessary perspective that would lead the problem to a most effective conclusion. As the poet would say...<br />Wooster: Never mind the poet Jeeves! The plan is a washout!<br />Aunt Dahlia: Jeeves! You&#39;re a marvel! Bertie, you must pin up at once!<br />Wooster: I shall do nothing of the kind! Not all the soda Jeeves!<br />Aunt Dahlia: Pin up you shall Bertie, or no more of Anatole&#39;s meals for you!<br />Wooster: But Ancient A... Be reasonable...<br />Aunt Dahlia: Not one more bite Bertie! And may an Aunt&#39;s curse befall you if you do not do it.<br />Wooster: Oh very well then. Jeeves, if you&#39;ll be so good as to prepare the printer and procure a pot of the necessary thumbtacks.<br />Jeeves: I have already taken the Liberty Sir! You shall find the items in the workroom.<br />Wooster & Aunt Dahlia Together: Jeeves! You stand alone!<br />Jeeves: Thank You Sir! Thank You Madam! One endevours to give satisfaction.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>114</wp:comment_id>
        <wp:comment_author>Rob Fagen</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.netflix.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 02:47:17</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 02:47:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[@Dan: You make a perfectly reasonable, compelling and completely internally consistent argument. However, I think that you&#39;re arguing for something almost but not completely unlike the problem driving the original post.<br /><br />An application can be close to the metal or close to the people using it. Applications close to the metal need to be horrendously fast and efficient because they are doing things that people can&#39;t do fast enough because of the size or complexity of the data. An application close to the people using it is something that is keeping track of something too complex for a person to reliably do repeatedly.<br /><br />My impression of your work is &#39;optimization uber alles.&#39; Which is a cool space to be working in from a computer science perspective. My impression of the work everyone else is discussing is that it&#39;s much closer to the rest of the world than it is to the hardware. Which is also cool, but from more of a holistic business perspective. At a certain point, it becomes much more important to be able to reliably change what&#39;s going on inside the application than it is for the application to run as quickly as is mathematically possible.<br /><br />At work, we have a ginormous pile of PL/SQL with a lot of business logic buried in it. It was put there back in the day because the best minds at the time thought it was important to be as fast as possible. It was as fast as possible at the time, because the data from the database didn&#39;t need to make the round-trip to and from the application server for a given transaction. It has become a problem today because of how business logic has become implemented across both the application server and the database. We&#39;re untangling it, but it&#39;s going to cost at least three engineers the better part of a year to do that untangling because of all the interdependencies and the fact that this is a 24x7 system. <br /><br />Being able to think about the problem with your feet in the world of the people consuming the information is sometimes much more valuable than thinking about the problem with your feet in the world of the machine consuming the raw data.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>115</wp:comment_id>
        <wp:comment_author>Anonymous Coward</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 03:46:00</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 03:46:00</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[@freper: Nope.  Using paper causes trees to be *planted*.  Trees are *farmed*.  This means that trees are planted based on projected demand.  If you want more trees in the world, use more paper.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>116</wp:comment_id>
        <wp:comment_author>The P.G. Wodehouse Method of Code Refactoring at Industry Figure Tom Chappell</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://tomchappell.com/blog/2008/03/the-pg-wodehouse-method-of-code-refactoring.html</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 05:15:19</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 05:15:19</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring“ [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>117</wp:comment_id>
        <wp:comment_author>links for 2008-03-24 « The Inscription</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://g4rg4ntu4.wordpress.com/2008/03/24/links-for-2008-03-24/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 06:23:13</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 06:23:13</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] The P.G. Wodehouse Method Of Refactoring if you see pages where the code is all bunched up on the right, it indicates massive nesting and over-long functions. If you see heavy congestion, it indicates dense code. It's also easy to spot giant switch statements and other crimes against humanity. (tags: Legacy Code Refactoring Programming) [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>118</wp:comment_id>
        <wp:comment_author>Mike Crowl</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mikecrowlsscribblepad.blogspot.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 07:27:05</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 07:27:05</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I don&#39;t know anything much about writing code - except that my son is  programmer and I&#39;ve picked up some interesting notes from him - but I couldn&#39;t resist a post that included the venerable P G Wodehouse in it.   I&#39;ve never heard this story about him pinning up stuff before, but it wouldn&#39;t surprise me.  He was a meticulous craftsman, which is partly why his books are still being read.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>119</wp:comment_id>
        <wp:comment_author>G.N.</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.equinox3d.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 07:31:26</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 07:31:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Nice idea about the zoomed-out view of code.<br />I&#39;ve written a fairly large project, EQUINOX-3D and I&#39;ve been keeping track of code quality by tracking which files and classes I&#39;ve code-reviewed on what date.<br />I usually do a code review on the affected files every time I add a new major feature or fix a major bug.<br /><br />This seems to work pretty well for me.<br />There about 4-5 known bugs at the moment in this project, which is approaching 400,000 lines of code.<br /><br />I&#39;ve never had to do a major re-factor or rewrite though.<br />Of course it&#39;s a lot easier to keep things clean, since I&#39;m the only developer on this project.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>120</wp:comment_id>
        <wp:comment_author>Hooray for the humans! | dBlogIt by Dustin Boston</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://theyoungbostons.com/dustin/archives/hooray-for-the-humans</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 07:31:26</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 07:31:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] —Russ Gray, The P.G. Wodehouse Method Of Refactoring, 24 Mar 2008 [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>121</wp:comment_id>
        <wp:comment_author>Mark Hissink Muller</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://complexitymap.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 08:36:30</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 08:36:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Excellent idea, visualization always helps. <br /><br />I used the same concept but a different implementation (metric results positioned in a treemap) for the Complexity Map. <br /><br />See: http://complexitymap.com.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>122</wp:comment_id>
        <wp:comment_author>pkx</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 12:16:10</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 12:16:10</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Actually, it&#39;s not 50000 ft but approx 2.40 m with 13% zoom :-><br />(A 50 k ft view requires a vertical paper size as big as 14.7 km.)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>123</wp:comment_id>
        <wp:comment_author>Ben</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 12:57:35</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 12:57:35</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I agree with an earlier poster. 31,000 is a fairly small project. Rewriting would probably be faster than refactoring. But interesting ideas that could be applied to a large project.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>124</wp:comment_id>
        <wp:comment_author>zori</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 13:19:11</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 13:19:11</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[look ma! no viagra ads yet!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>125</wp:comment_id>
        <wp:comment_author>Plant Tech Tonics » Blog Archive » Thought-provoking article on code refactoring</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.warelab.org/blog/?p=16</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 14:16:18</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 14:16:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Saw this linked from Slashdot. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>126</wp:comment_id>
        <wp:comment_author>Lucia</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 14:30:18</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 14:30:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Your method can only be called utterly idiotic. Sooo all pages are hanging high! Cool!!! We have finished!!! Ohh look this class looks neater than this one... ohh surely it&#39;s bad quality code. WTF?!?!?<br /><br />How moronic. How do you tell a bubble sort from a quicksort from 10,000 feet above? Are you stupid? In fact the bubble sort will appear neater and shorter. Way to go!!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>128</wp:comment_id>
        <wp:comment_author>Iwein Fuld</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.springsource.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 16:52:56</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 16:52:56</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Lucia: If the biggest problem in your code is having a quicksort instead of a bubble sort you&#39;re in heaven (you can just replace either with a Collections.sort() or equivalent). Maybe you should look at your own code using this technique ;)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>129</wp:comment_id>
        <wp:comment_author>Iwein Fuld</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.springsource.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 16:54:23</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 16:54:23</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[woops, switch those sorts pls [ducks]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>130</wp:comment_id>
        <wp:comment_author>Mr. Wizard</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.donotreply.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 17:09:29</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 17:09:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Fortran IV -- Good examples from programming, bad one from physics. The gravitational attraction from outside any object, regardless of its shape, is toward its centre of mass.  On that disk, you&#39;ll only be able to stand upright at the &quot;poles&quot; (the axis of the disk); anywhere else, the pull is straight back toward the center, and you&#39;ll feel you&#39;re on the sheer vertical face of a very tall, thin mountain. (Mr Pratchett&#39;s works are fantasy, not science fiction. ;-) )]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>131</wp:comment_id>
        <wp:comment_author>Sp3w » Blog Archive » Linkage 2008.03.24</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.earthvssoup.com/sp3w/2008/03/24/linkage-20080324/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 18:33:31</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 18:33:31</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] The P.G. Wodehouse Method Of Refactoring [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>133</wp:comment_id>
        <wp:comment_author>Fortran IV</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 21:04:56</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 21:04:56</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Mr. Wizard: Actually my disk example was based on my dim recollection of Larry Niven&#39;s description of an Alderson disk (http://en.wikipedia.org/wiki/Alderson_disk).  The claim (which I am not mathematician enough to evaluate) is that if 1) the disk is wide enough in proportion to its thickness and 2) you are small enough in relation to the disk and 3) far enough from any edge, that the gravitational effect is roughly as though the disk has no edges at all.  But it&#39;s nothing I&#39;m an authority on, and nothing to do with cleaning up legacy code anyway. :)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>134</wp:comment_id>
        <wp:comment_author>Will Bickford</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://hewo.xedoloh.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-25 23:51:35</wp:comment_date>
        <wp:comment_date_gmt>2008-03-25 23:51:35</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[30,000 lines of code doesn&#39;t qualify as large IMHO.<br /><br />The source tree I primarily work on at work at the moment is roughly 150,000 lines of code - although metrics like that tend to de-value the actual content of the code.  In our case, we&#39;re dealing with a CMS written primarily in PHP and regular expressions with a lot of compacting done (read: each line is fairly complex).<br /><br />I&#39;ve done a similar comparison in the past where I took screen shots of code at an un-readable level.  I took two screen shots: 1) before and 2) after.  Sometimes a bird&#39;s eye view is just what the doctor ordered.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>135</wp:comment_id>
        <wp:comment_author>Duncan Lock</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.dflock.co.uk/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-26 03:04:21</wp:comment_date>
        <wp:comment_date_gmt>2008-03-26 03:04:21</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[How about a text editor that has 50,000 feet view built in, all the time? Would that help?<br /><br />It&#39;s still in development, but it&#39;s coming along quickly:<br /><br />http://www.sublimetext.com/<br /><br />Dunc]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>137</wp:comment_id>
        <wp:comment_author>VB6 rulez</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-26 19:44:42</wp:comment_date>
        <wp:comment_date_gmt>2008-03-26 19:44:42</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Get a decent code analyzer and cut out the unused parts. That&#39;s the best refactoring one can do to old code.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>138</wp:comment_id>
        <wp:comment_author>sheyll</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://sheyll.blogspot.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-27 07:23:30</wp:comment_date>
        <wp:comment_date_gmt>2008-03-27 07:23:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi<br /><br />rewrites can be of great benefit, if the relevant sections of the legacy code are recognized, documented and isolated.<br /><br />Rewrites are necessary if the underlying technology changes significantly. Like porting an application from java to erlang(like we do right now).<br /><br />Also, on an abtract level rewrite != rewrite, distinguishing different classes of &quot;rewrites&quot; is wortwhile.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>139</wp:comment_id>
        <wp:comment_author>Michael Elliot</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-27 16:57:28</wp:comment_date>
        <wp:comment_date_gmt>2008-03-27 16:57:28</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[If we all could agree that domain specific knowledge and particulars of actual applications greatly dictate the manners by which code refactoring should be done, that would be great.<br /><br />In general what&#39;s typically missing in code is why certain code exists.  This is very hard to capture without reasonably accurate coding standards and designs.  Keeping roles and responsibilities highly consistent helps to keep the code in this state and doing this requires constant refactoring of even more recently written code. (Of course this is for projects whose lifeline is in the 5 - 10 year arena, which is crazy, but true for certain machine control applications)<br /><br />And yes, I agree a big picture certainly does help see where code and complexity reign.  If done correctly, this would happen when multiple interfaces must be integrated within a single class/entry point.<br /><br />I&#39;ve spent my entire career refactoring code that functions at ~75% case, but fails in a large set of other cases.  Typically it is because these junction points are either poorly designed, written, or missing altogether.  Not to belittle the idea of looking at something from 10,000 feet, but isn&#39;t that what UML is all about?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>140</wp:comment_id>
        <wp:comment_author>Hanging your code out to dry - AgileJoe</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.lostechies.com/blogs/joe_ocampo/archive/2008/03/27/hanging-your-code-out-to-dry.aspx</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-27 23:29:22</wp:comment_date>
        <wp:comment_date_gmt>2008-03-27 23:29:22</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] less an exercise. So we have lots of HiFi options but what LoFi options do we have. Well one that I read about recently peeked my interest. As you can see this low friction high value approach is well within anyone's [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>143</wp:comment_id>
        <wp:comment_author>Basildon Coder » Blog Archive » The P.G. Wodehouse Method Of Refactoring | TechnoPrimitive</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.technoprimitive.org/wordpress/archives/2008/04/06/basildon-coder-%c2%bb-blog-archive-%c2%bb-the-pg-wodehouse-method-of-refactoring/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-06 23:25:59</wp:comment_date>
        <wp:comment_date_gmt>2008-04-06 23:25:59</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Basildon Coder » Blog Archive » The P.G. Wodehouse Method Of Refactoring I am much given to ruminating on refactoring at the moment, as one of my current projects is a major overhaul of a fairly large (>31,000 lines) application which has exactly the kind of dotted history any experienced developer has learned to fear - written by many different people, including short-term contractors, at a time in the company's life when first-mover advantage was significantly more important than coding best-practice, and without any consistent steer on the subjects of structure, coding conventions, unit tests, and so on. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>158</wp:comment_id>
        <wp:comment_author>Beauty of Code » Blog Archive » Ideas for analysing legacy code</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.beauty-of-code.de/?p=10</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-05-31 10:14:03</wp:comment_date>
        <wp:comment_date_gmt>2008-05-31 10:14:03</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Code wrote about the P.G.Wodehouse method of Refactoring, which reminded me of a graphic I have seen at the Museum of Modern Art in ‘Design and the [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>160</wp:comment_id>
        <wp:comment_author>The P.G. Wodehouse Method Of Refactoring</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.sheebz.net/post/2008/06/The-PG-Wodehouse-Method-Of-Refactoring.aspx</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-06-28 06:00:13</wp:comment_date>
        <wp:comment_date_gmt>2008-06-28 06:00:13</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] came accross a pretty good post on refactoring today on Basildon Coder.  The post offers some sound advice on when and how to refactor code.  I found the [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>170</wp:comment_id>
        <wp:comment_author>Bookmarks about Wodehouse</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.remmrit.com/wodehouse</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-20 19:01:25</wp:comment_date>
        <wp:comment_date_gmt>2008-08-20 19:01:25</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] - bookmarked by 3 members originally found by pramodc84 on 2008-07-28  The PG Wodehouse Method Of Refactoring  http://basildoncoder.com/blog/2008/03/21/the-pg-wodehouse-method-of-refactoring/ - bookmarked by 4 [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>186</wp:comment_id>
        <wp:comment_author>-= Linkage 2008.03.24 =-</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blog.fogus.me/2008/03/24/linkage-20080324/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-01-26 15:36:34</wp:comment_date>
        <wp:comment_date_gmt>2009-01-26 15:36:34</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] The P.G. Wodehouse Method Of Refactoring [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>193</wp:comment_id>
        <wp:comment_author>Vince Delmonte</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.linkedin.com/in/vincedelmonte</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-04-14 21:58:27</wp:comment_date>
        <wp:comment_date_gmt>2009-04-14 21:58:27</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I read your blog for quite a long time and must tell   that your articles always prove to be of a high value and quality for readers.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>216</wp:comment_id>
        <wp:comment_author>Mental Trackmarks » Just ask jeeves</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mentaltrackmarks.com/2008/03/23/just-ask-jeeves/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-05-31 23:43:39</wp:comment_date>
        <wp:comment_date_gmt>2010-05-31 23:43:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] is all a lead-up to the fact that I recently read an article on code refactoring using the P. G. Wodehouse method. This would be yet-another-over-simplified-response-to-a-complex-problem article if it were not for [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>248</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries - Smashing Magazine</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.smashingmagazine.com/2011/06/20/working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-20 15:35:16</wp:comment_date>
        <wp:comment_date_gmt>2011-06-20 15:35:16</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>249</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | Joomla Showcase : CSS Showcase</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://cssplatform.com/?p=191</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-20 17:57:56</wp:comment_date>
        <wp:comment_date_gmt>2011-06-20 17:57:56</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>250</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | Blogs - NG Outsourcing</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blogs.ng-outsourcing.com/2011/06/20/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-20 22:48:50</wp:comment_date>
        <wp:comment_date_gmt>2011-06-20 22:48:50</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>251</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | CS5 Design</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.cs5design.com/blog/2011/06/20/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-20 23:24:01</wp:comment_date>
        <wp:comment_date_gmt>2011-06-20 23:24:01</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>252</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | IdentityNepal.com</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blog.identitynepal.com/2011/06/20/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-21 00:37:53</wp:comment_date>
        <wp:comment_date_gmt>2011-06-21 00:37:53</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>253</wp:comment_id>
        <wp:comment_author>wp-coder.net » Guidelines For Working With External Code Libraries</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.wp-coder.net/2011/06/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-21 04:05:20</wp:comment_date>
        <wp:comment_date_gmt>2011-06-21 04:05:20</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] â??The P.G. Wodehouse Method of Refactoring,â? Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>254</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | Ruturaj Pradeep Kohok | Your Web Advisor</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.ruturaj.in/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-21 12:29:39</wp:comment_date>
        <wp:comment_date_gmt>2011-06-21 12:29:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>255</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | OT Jobs</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.otjobs.net/06/22/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-22 21:25:56</wp:comment_date>
        <wp:comment_date_gmt>2011-06-22 21:25:56</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>256</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries | Web Information Share</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.webinfoshare.com/2011/06/23/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-23 15:03:29</wp:comment_date>
        <wp:comment_date_gmt>2011-06-23 15:03:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>257</wp:comment_id>
        <wp:comment_author>Guidelines For Working With External Code Libraries « Your Web Design Studio</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://yourwebdesignstudio.com/blog/guidelines-for-working-with-external-code-libraries/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-06-29 10:36:19</wp:comment_date>
        <wp:comment_date_gmt>2011-06-29 10:36:19</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] “The P.G. Wodehouse Method of Refactoring,” Basildon Coder Exploring the trials and tribulations of working with legacy code. [...]]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Arthur C. Clarke, 16/12/1917 - 18/03/2008: Indistinguishable From Magic</title>
      <link>http://blog.basildoncoder.com/2008/03/arthur-c-clarke-16121917-18032008.html</link>
      <pubDate>Tue, 18 Mar 2008 23:51:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>29</wp:post_id>
      <wp:post_date>2008-03-18 23:51:00</wp:post_date>
      <wp:post_date_gmt>2008-03-18 23:51:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Arthur-C.-Clarke-Indistinguishable-From-Magic</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Sad news - <a href="http://news.bbc.co.uk/1/hi/uk/7304004.stm">the legendary Arthur C. Clarke has died</a>. He'll be greatly missed; Clarke novels occupy a full shelf of my floor-to-ceiling bookcase, and <em><a href="http://en.wikipedia.org/wiki/Rendezvous_with_rama">Rendezvous With Rama</a></em> stands proud as the finest sci-fi it has ever been my pleasure to read.<br /><br />Aside from his very visible mastery of sci-fi, however, there is much to remember Clarke for. He is responsible for popularising the concept of <a href="http://en.wikipedia.org/wiki/Geostationary_orbit">geostationary orbit</a>, which is very important for practical global telecommunications. When you watch the Olympics on TV this summer, you can thank Clarke for the fact that you haven't had to go to China to see it.<br /><br />Perhaps best of all, though, is his now-infamous <a href="http://en.wikipedia.org/wiki/Clarke's_three_laws">Third Law</a>:<br /><blockquote>Any sufficiently advanced technology is indistinguishable from magic.</blockquote><br />Clarke's Third Law has been quoted, referenced, and paraphrased copiously since he coined it, and it is almost axiomatic for many technologists. As a software engineer, I get a wry enjoyment from Gehm's Corollary, i.e. "any technology distinguishable from magic is insufficiently advanced" - a sobering thought when confidently hacking away on the next big thing!<br /><br />If your users don't think your software is magic, then you have room for improvement. I believe Clarke would have approved of that sentiment. R.I.P.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/03/arthur-c-clarke-16121917-18032008.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>76</wp:comment_id>
        <wp:comment_author>Landon Dyer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.dadhacker.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-22 13:35:08</wp:comment_date>
        <wp:comment_date_gmt>2008-03-22 13:35:08</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;Any sufficiently advanced technology is insufficiently documented.&quot;<br /><br />True, as far as I&#39;ve experienced.  &quot;What does this register bit do?&quot;  /  &quot;Uh, I&#39;ll have to look at the Verilog for it...&quot;<br /><br />[I must have read the book 2001 twenty times when I was young.  Clarke&#39;s later works weren&#39;t as compelling, and I kind of wish they&#39;d left Rama alone, but he&#39;ll be remembered for a long, long time.]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>89</wp:comment_id>
        <wp:comment_author>dan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 12:31:51</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 12:31:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Let&#39;s not forget the other two.<br /><br />http://en.wikipedia.org/wiki/Clarke&#39;s_three_laws<br /><br />1: When a distinguished but elderly scientist states that something is possible, he is almost certainly right. When he states that something is impossible, he is very probably wrong.<br />2: The only way of discovering the limits of the possible is to venture a little way past them into the impossible.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>214</wp:comment_id>
        <wp:comment_author>bass guitar dvd</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://bassguitardvd.info</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-05-01 17:48:55</wp:comment_date>
        <wp:comment_date_gmt>2010-05-01 17:48:55</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Many thanks and keep post this particular type of informative sites.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>234</wp:comment_id>
        <wp:comment_author>Augustine Hasselvander</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.freecellphoneunlocking.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-12-19 15:09:39</wp:comment_date>
        <wp:comment_date_gmt>2010-12-19 15:09:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Cool article it is without doubt. We have been looking for this info.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>C# 3.0, Parallel LINQ, And The Betfair API - An Introduction</title>
      <link>http://blog.basildoncoder.com/2008/02/c-30-parallel-linq-and-betfair-api.html</link>
      <pubDate>Sat, 23 Feb 2008 21:33:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>30</wp:post_id>
      <wp:post_date>2008-02-23 21:33:00</wp:post_date>
      <wp:post_date_gmt>2008-02-23 21:33:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>C#-3.0,-Parallel-LINQ,-And-The-Betfair-API---An-Introduction</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[My pal <a href="http://londoncoder.wordpress.com/">Jan</a> has a habit of waxing lyrical about the wonders of <a href="http://blogs.msdn.com/pfxteam/default.aspx">Parallel LINQ</a> (PLINQ) as soon as you make the mistake of mentioning multithreading within earshot. I've been playing around with <a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=333325FD-AE52-4E35-B531-508D977D32A6&amp;displaylang=en">.Net 3.5</a> recently, and I write a lot of async code day-to-day when struggling to keep desktop webservice clients responsive when making lots of webservice calls, so I thought it high time I took a closer look.<br /><br /><em><strong>The Problem</strong></em><br /><br />A key goal for the kind of async work I do is to batch multiple calls up, so that I get all the responses at once. This is important for keeping the rest of the code clean. To illustrate, imagine you are writing an application against the <a href="http://bdp.betfair.com/">Betfair API</a>, and you have a screen that displays a market, your current profit and loss on that market, and your unmatched bets on that market. To populate this screen will require four API calls - getMarket(), getMarketPrices(), getMarketProfitAndLoss(), and getCurrentBets().<br /><br />Now, the worst (though easiest) thing to do is make the four calls sequentially on the UI thread. The problem with this is it's slow, and the UI freezes during the process (since you're blocking on the UI thread), which is a lousy user experience.<br /><br />A slightly better approach is to spin off a thread, and make the four calls there, raising an event on completion. This gets all the work off the UI thread and therefore keeps the application responsive, but it's still slow as the calls are still sequential.<br /><br />To speed it up, you can create a thread per call (so four threads in this case). There's a whole lot of complexity around working out the optimum number of threads to use (depending on how many processors you have, how many simultaneous connections you are allowed to open, etc) but that's a bit beyond the scope of this post, so for now we'll go with the one-thread-per-task approach and assume it's optimal.<br /><br />So, each thread makes one webservice call, and raises an event to signify that it's finished. Simple, right? Unfortunately, this can lead to some real headaches in collating the data.<br /><br />Imagine a user has hundreds of bets on the market, and therefore the getCurrentBets() call takes a bit longer to execute than the other three. The user clicks on a market, and the threads responsible for getting market data and P&L; raise their events quickly, so you display the screen with the data you have and plan to display the bets as and when they arrive.<br /><br />Before the bets are received, however, the user clicks on another market. Again, the market data and P&L; come back quickly and you display them. Then, finally, the original getCurrentBets() call completes. But wait! You've moved onto another market now, so you don't care about those bets any more! So you have to write some code to make sure that each piece of data received is still relevant. This can become very onerous very quickly, as you struggle to determine your UI state and work out what data you want and what should be discarded.<br /><br />Now imagine that your application has timers firing all over the place to update prices and P&L; on the market every second or two, so you have events being raised all the time.<br /><br />I've worked with code that ventured down this path, and believe me, you don't want to go there.<br /><br /><em><strong>The Solution </strong></em><br /><br />The best approach is to batch these calls up, so that each happens on a separate thread, but only one event is raised - when all of the data has been received. That way, you can be sure that when you handle the event, all the data is consistent.<br /><br />Since this is one of the things that PLINQ does for you, it seems like a good candidate for kicking the tyres, so to speak. First, though, I'll do a quick run through of how to do this without PLINQ, for comparison's sake. The task will be to display a list of all the Premiership matches available on Betfair at the time the code runs.<br /><br /><em><strong>Take Out The Old </strong></em><br /><br />Betfair list Premiership matches grouped by fixture date, under the Barclays Premiership node in the event tree. It looks something like this:<br /><pre>Soccer<br />    English Soccer<br />        Barclays Premiership<br />            Fixtures 23 February<br />                Fulham v West Ham<br />                Liverpool v Middlesbrough<br />                ...<br />            Fixtures 24 February<br />                Blackburn v Bolton<br />                Reading v Aston Villa<br />            Fixtures 25 February<br />                Man City v Everton</pre><br />The Barclays Premiership event node has an ID that doesn't change (2022802), so I can jump straight to that node and save myself the bother of having to navigate the Soccer and English Soccer parent nodes.<br /><br />I'll assume you already know how to create Service References for Betfair's global WSDL, and skip straight on to creating some useful helper methods. I need to be able to call getEvents(), obviously:<br /><pre><span class="Type">private</span> GetEventsResp GetEvents(<span class="Type">int</span> parentEventID)<br />{<br /> <span class="Statement">return</span> m_global.getEvents(<br />            MakeEventRequest(parentEventID)).Result;<br />}<br /><br /><span class="Type">private</span> getEventsIn MakeEventRequest(<span class="Type">int</span> parentEventID)<br />{<br /> <span class="Statement">return</span> <span class="Statement">new</span> getEventsIn(<span class="Statement">new</span> GetEventsReq()<br />        {<br />            header = <span class="Statement">new</span> APIRequestHeader()<br />            {<br />                sessionToken = m_sessionToken<br />            },<br />            eventParentId = parentEventID<br />        });<br />}</pre><br />If you're not used to C# 3.0, this is taking advantage of type initialisation to create nested objects without having to create a bunch of extra local variables. You can write the exact same method without type initialisation like this:<br /><pre><span class="Type">private</span> getEventsIn MakeEventRequest(<span class="Type">int</span> parentEventID)<br />{<br />    APIRequestHeader header = <span class="Statement">new</span> APIRequestHeader();<br />    header.sessionToken = m_sessionToken;<br />    GetEventsReq req = <span class="Statement">new</span> GetEventsReq();<br />    req.header = header;<br />    req.eventParentId = parentEventID;<br /> <span class="Statement">return</span> <span class="Statement">new</span> getEventsIn(req);<br />}</pre><br />The first thing I need to do is get a list of fixture nodes. I can do this by asking for child events of the Premiership node, and filtering for the events that start with the word 'Fixture'. This can be achieved with a simple regex and a bit of normal LINQ:<br /><pre><span class="Type">private</span> List<bfevent> GetPremiershipFixtureEvents()<br />{<br /> <span class="Statement">return</span> GetEvents(PREMIERSHIP).eventItems.Where(<br />        (ev, idx) => Regex.IsMatch(ev.eventName, <span class="Constant">"^Fixtures.*"</span>)<br />        ).ToList();<br />}</bfevent></pre><br />Assume PREMIERSHIP is a const int with the value 2022802. The Where() method works as a filter - you pass it a delegate, and it executes that delegate against each member of the list and returns a new list containing only the elements for which the delegate returned true.<br /><br />In this case, I'm creating the delegate with a lambda expression, which returns true for elements with an event name that is matched by the regex.<br /><br />Now I've got the fixture events, I need to get the child events of each, which correspond to the actual matches. I want each call to be asynchronous so that they happen in parallel, rather than sequentially. I also want to wait for all calls to complete before continuing, so I use the WaitHandle.WaitAll() method:<br /><pre><span class="Type">private</span> List<bfevent> GetMatchEvents(<br /><span class="Type"></span>    List</bfevent><bfevent> fixtureDateEvents)<br />{<br />    List</bfevent><bfevent> matchEvents = <span class="Statement">new</span> List</bfevent><bfevent>();<br /> <span class="Type">var</span> callbacks = (<br /> <span class="Statement">from</span> ev <span class="Statement">in</span> fixtureDateEvents<br /> <span class="Statement">select</span> StartGetEvents(ev.eventId, matchEvents)<br />        ).ToList();<br />    WaitHandle.WaitAll(callbacks.ConvertAll(<br />                ar => ar.AsyncWaitHandle).ToArray());<br /> <span class="Statement">return</span> matchEvents;<br />}</bfevent></pre><br />Here, the LINQ expression and the ConvertAll() method call are doing similar things - converting all elements of a list into another type. In the case of the LINQ expression, I am effectively obtaining a list of IAsyncResult objects by calling StartGetEvents() on each event in my list and storing the return value of each call. In the case of the ConvertAll() call, I am obtaining a list of WaitHandle objects by accessing the AsyncWaitHandle property of each IAsyncResult object in the list.<br /><br />It is perfectly possible to replace the LINQ expression with a call to ConvertAll(), or the ConvertAll() call with another LINQ expression. Which one you use in cases like this is largely a matter of preference.<br /><br />The StartGetEvents() method needs to make an asynchronous webservice call and append the results to the provided list. Since multiple threads are accessing the list, the write must be protected with a lock:<br /><pre><span class="Type">private</span> IAsyncResult StartGetEvents(<span class="Type">int</span> parentEventID,<br />    List<bfevent> matchEvents)<br />{<br /> <span class="Statement">return</span> m_global.BegingetEvents(MakeEventRequest(parentEventID),<br /> <span class="Type">delegate</span>(IAsyncResult ar)<br />        {<br /> <span class="Statement">lock</span> (matchEvents)<br />            {<br />                matchEvents.AddRange(<br />                    m_global.EndgetEvents(ar).Result.eventItems);<br />            }<br />        },<br />        m_global);<br />}</bfevent></pre><br />I am using an anonymous delegate for the callback here. All it does is lock the list and add the events contained in the response. Note that in production code you might want to be a bit more diligent about locking strategies and so on - I've written the code like this for conciseness, not necessarily for production-grade correctness.<br /><br />Now the whole shebang can be invoked very simply:<br /><pre><span class="Type">var</span> fixtures = GetPremiershipFixtureEvents();<br />GetMatchEvents(fixtures).ForEach(<br />        e => Console.WriteLine(e.eventName));</pre><br />Note that the calling code is very clean and simple, and doesn't care about threads or anything like that - all that async plumbing is nicely contained in the GetMatchEvents() and StartGetEvents() methods.<br /><br /><em><strong>Bring In The New</strong></em><br /><br />So how can PLINQ help with this? Well, it lets me get rid of those GetMatchEvents() and StartGetEvents() methods, which contain all the fiddly async code and are easily the most complex methods in the code above.<br /><br />First, I'll create a simple task class which represents the task of getting events for a particular ID:<br /><pre><span class="Type">public</span> <span class="Type">class</span> GetEventsTask<br />{<br /> <span class="Type">private</span> <span class="Type">int</span> m_parentEventID;<br /> <span class="Type">private</span> <span class="Type">string</span> m_sessionToken;<br /><br /> <span class="Type">public</span> GetEventsTask(<span class="Type">string</span> sessionToken,<br /> <span class="Type">int</span> parentEventID)<br />    {<br />        m_sessionToken = sessionToken;<br />        m_parentEventID = parentEventID;<br />    }<br /><br /> <span class="Type">public</span> List<bfevent> GetEvents()<br />    {<br />        BFGlobalService svc = <span class="Statement">new</span> BFGlobalServiceClient();<br />        APIRequestHeader header = <span class="Statement">new</span> APIRequestHeader()<br />            { sessionToken = m_sessionToken };<br /> <span class="Statement">return</span> <span class="Statement">new</span> List</bfevent><bfevent>(svc.getEvents(<br /> <span class="Statement">new</span> getEventsIn(<span class="Statement">new</span> GetEventsReq()<br />            {<br />                eventParentId = m_parentEventID,<br />                header = header<br />            })).Result.eventItems);<br />    }<br />}</bfevent></pre><br />Once I've instantiated an instance of this class, a call to GetEvents() will get me all the child events for the specified parent node.<br /><br />To use PLINQ, all I have to do is create an array of these task objects - one per fixture date - and use the AsParallel() extension method to specify that I want the task processing done in parallel:<br /><pre><br />    GetEventsTask[] tasks = (<br /> <span class="Statement">from</span> ev <span class="Statement">in</span> fixtureDateEvents<br /> <span class="Statement">select</span> <span class="Statement">new</span> GetEventsTask(m_sessionToken, ev.eventId)<br />            ).ToArray();<br /> <span class="Type">var</span> taskResults = (<br /> <span class="Statement">from</span> t <span class="Statement">in</span> tasks.AsParallel()<br /> <span class="Statement">select</span> t.GetEvents()<br />            ).ToList();</pre><br />Neat, eh? Note that PLINQ will also take care of deciding the optimal number of threads, neatly sidestepping the work I alluded to earlier.<br /><br />One wrinkle is that my PLINQ statement results in a list of lists, so I need to flatten it out before returning.<br /><pre>List<bfevent> matchEvents = <span class="Statement">new</span> List</bfevent><bfevent>();<br />taskResults.ForEach(results => matchEvents.AddRange(results));</bfevent></pre><br />Obviously this is only scratching the surface, not only of PLINQ but of LINQ itself. Much more powerful expressions can be created with a little tweaking of the objects generated from the Betfair WSDL - but that's a topic for another article.]]></content:encoded>
      <category domain="tag">Patterns</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/02/c-30-parallel-linq-and-betfair-api.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>168</wp:comment_id>
        <wp:comment_author>green</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-13 21:33:30</wp:comment_date>
        <wp:comment_date_gmt>2008-08-13 21:33:30</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[http://www.linqhelp.com has a bunch of these 101&#39;s at their site. Nice read very lengthy=)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>179</wp:comment_id>
        <wp:comment_author>Matt</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-10-15 08:04:44</wp:comment_date>
        <wp:comment_date_gmt>2008-10-15 08:04:44</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi,<br /><br />Your application of PLINQ to this scenario is good, however I&#39;m a little confused how the session with the BF API is maintained.<br /><br />My understanding is that the Session Token from each Response needs to be passed in to each subsequent Request to ensure the session is maintained with the API.<br /><br />How would this be achieved when multiple calls are made to the API concurrently? (I realize that you can spin up multiple sessions but there is a maximum limit imposed per user account so I wouldn&#39;t think that to be a viable solution). Am eager to hear your response.<br /><br />Thanks,<br />Matt]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>180</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-10-15 17:12:48</wp:comment_date>
        <wp:comment_date_gmt>2008-10-15 17:12:48</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Matt,<br /><br />The requirement that a unique session token be used for every single request was removed from the Betfair API some time ago. It is now possible to make many requests using a single token, and the temporal lifetime of a token is now quite long (not sure exactly how long, but I&#39;m pretty sure it&#39;s at least 24 hours). If you try the code above, you&#39;ll find it works fine.<br /><br />For long-running bots, however, it would certainly be the case that you&#39;d periodically need to overwrite the session token with a new one. I normally declare the session token variable to be volatile, share it between threads, update it with every response, and think no more about it. It is fine for multiple threads to use the same token, or for some threads to use an old token and others to use a new one, as long as any given thread doesn&#39;t try to use a token that has expired.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>181</wp:comment_id>
        <wp:comment_author>Matt</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-10-16 01:38:10</wp:comment_date>
        <wp:comment_date_gmt>2008-10-16 01:38:10</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Wow. Thanks. I just went back to the API documentation and found that it pays to re-read each section even if they appear to be unchanged from one release to the next. This is good news. Bring on PLINQ!]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Code CAN Be Beautiful</title>
      <link>http://blog.basildoncoder.com/2008/02/code-can-be-beautiful.html</link>
      <pubDate>Fri, 22 Feb 2008 17:57:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>31</wp:post_id>
      <wp:post_date>2008-02-22 17:57:00</wp:post_date>
      <wp:post_date_gmt>2008-02-22 17:57:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Code-CAN-Be-Beautiful</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[In his <a href="http://www.codinghorror.com/blog/archives/001062.html">review</a> of <em><a href="http://www.amazon.com/gp/product/0596510047/">Code Is Beautiful</a></em>, Jeff Atwood decides that no, actually it isn't. He's fairly adamant about it too:<br /><blockquote>Ideas are beautiful. Algorithms are beautiful. Well executed ideas and algorithms are even more beautiful. But the code itself is not beautiful. The beauty of code lies in the architecture, the ideas, the grander algorithms and strategies that code represents.</blockquote><br />I just can't agree with this. It's effectively saying that a representation cannot be beautiful; only the underlying thing that's <em>being represented</em> can be beautiful. Worse, this argument is extended to literature and art as well, and quotes a reader review from Amazon that quotes a little Russian poetry and rhetorically asks whether any non-Russian-speaking reader can see beauty in it.<br /><br />This drives me nuts, it really does. <strong>Of course</strong> the representation can be beautiful, and it can also be ugly. And the beauty of the representation can have an amplifying effect on the subject of the representation. Form and content are related. A non-Russian-speaker may not appreciate Russian poetry, but that doesn't mean that form itself has no value - it means that, in this case at least, the value of form is dependent on the content. If you don't understand the content, you don't appreciate the form.<br /><br />This isn't an absolute, though. In literature, there are many techniques for adding value to form. Alliteration, assonance, metre, and many more techniques are all structural techniques for beautifying form. I'd argue that pretty much anyone can appreciate the compact and succinct beauty of the phrase <em>veni, vidi, vici</em> without understanding what it means ("I came, I saw, I conquered").<br /><br />There are countless other examples.  You don't need to understand Italian to enjoy opera, for instance. In fact, I've even heard it argued that understanding the content of an opera can diminish the experience, since the actual meaning is often fairly bland and distracts from the simple appreciation of the complex sounds and interplay of the language in the hands (or lungs) of a world-class performer.<br /><br />So what's the equivalent in software? I think expressiveness and elegance are key. In particular, code that is able to express ideas without adding a lot of noise. I'm very partial to Haskell for this sort of thing - for instance the canonical quicksort implementation is wonderfully precise:<br /><pre>quicksort []        <span class="Statement">=</span> []<br />quicksort (x<span class="Statement">:</span>xs)    <span class="Statement">=</span> quicksort less <span class="Statement">++</span> [x] <span class="Statement">++</span> quicksort greater<br /> <span class="Type">where</span> less      <span class="Statement">=</span> [ y <span class="Statement">|</span> y <span class="Statement"><-</span> xs, y <span class="Statement"><</span> x ]<br />          greater   <span class="Statement">=</span> [ y <span class="Statement">|</span> y <span class="Statement"><-</span> xs, y <span class="Statement">>=</span> x ]</pre><br />If you know the quicksort algorithm, then the 2nd line of code there is about as precise an expression of the underlying concept as you could hope for. If you write the same algorithm in C or Visual Basic, I believe that you can objectively distinguish the 'beauty' of these representations of the same underlying concept. This is only possible if the representations do indeed have the quality of beauty.<br /><br />Another, perhaps even better, example is the naive-recursive Fibonacci generator in the same language, which is remarkably close to the mathematical definition:<br /><br /><img src="http://en.literateprograms.org/images/math/4/c/4/4c42de46d22d22305c59b9ba88e387e9.png" height="87" width="342" /><br /><br />(from <a href="http://en.literateprograms.org/Fibonacci_numbers_(Haskell)">literateprograms.org</a>)<br /><pre>fib n<br /> <span class="Statement">|</span> n <span class="Statement">==</span> <span class="Constant">0</span> <span class="Statement">=</span> <span class="Constant">0</span><br /> <span class="Statement">|</span> n <span class="Statement">==</span> <span class="Constant">1</span> <span class="Statement">=</span> <span class="Constant">1</span><br /> <span class="Statement">|</span> n <span class="Statement">></span> <span class="Constant">1</span> <span class="Statement">=</span> fib(n<span class="Statement">-</span><span class="Constant">1</span>) <span class="Statement">+</span> fib(n<span class="Statement">-</span><span class="Constant">2</span>)</pre><br />Note I haven't read the actual book under review here, and I have no reason to doubt the assertions that the book doesn't deliver. I do, however, take umbrage at the statement that code (or language) cannot be beautiful.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Literature amp; Language</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/02/code-can-be-beautiful.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>54</wp:comment_id>
        <wp:comment_author>gwenhwyfaer</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.isle-of-avalon.co.uk</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 19:40:54</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 19:40:54</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;If you know the quicksort algorithm, then the 2nd line of code there is about as precise an expression of the underlying concept as you could hope for.&quot;<br /><br />Unfortunately, handing it a pre-sorted list will demonstrate the gulf between beauty and practicality.<br /><br />In any case, since Haskell&#39;s data structures are immutable, mergesort is a much better match for it; the only advantage of qsort is that it can execute in-place - which...]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>55</wp:comment_id>
        <wp:comment_author>Jonathan Ville</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 19:45:23</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 19:45:23</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Firstly, if you think code is beautiful, then:<br /><br />qsort [] = []<br />qsort (x:xs) = qsort (filter (= x) xs)<br /><br />is a far more elegant implementation of quicksort, which essentially does the same things as your list comprehensions, but in a more succinct way (list comprehensions are implemented using filter and map anyway).<br /><br />Secondly, the reason this is &#39;beautiful&#39; has nothing to do with the elegant syntax and much more to do with the fundamental ideas behind functional programming, and the maths used to show that the lower assymptotic bound of the running time is n log n (which is analysis of algorithms - a beautiful subject). And of course, there&#39;s always the fantastic proofs by induction you can do in functional programming.<br /><br />And I bet you can&#39;t write a functional program that finds fibonacci numbers much faster using matrix multiplication (and diagonalisation of matrices to make this fast). The maths behind that is truly beautiful.<br /><br />There is good syntax and bad syntax, but at the end of the day syntax is transient and a bad way to judge a language.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>56</wp:comment_id>
        <wp:comment_author>Brantley</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 19:45:23</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 19:45:23</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[No, it really just depends on the font.  :)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>57</wp:comment_id>
        <wp:comment_author>she</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 20:10:25</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 20:10:25</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;A non-Russian-speaker may not appreciate Russian poetry, but that doesn't mean that form itself has no value - it means that, in this case at least, the value of form is dependent on the content.&quot;<br /><br />That is true, but of course one also has to understand the language in question. And when one does, even speaks and writes multiple questions, there are two points:<br />- how easy is the given language (write, speak, think)<br />- how beautiful is it<br /><br />An algorithm will ultimately stay the same, but it does matter how it will look in different languages. And there we are at languages which are just plain ugly.<br /><br />By the way, algorithm&#39;s are in itself quite beautiful but let&#39;s look at reallife examples of code at work, like a somewhat-complicated task that is done by code. To me, languages such as C or Java simply have less appeal than say python.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>58</wp:comment_id>
        <wp:comment_author>Aaron</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 20:52:31</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 20:52:31</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Unfortunately, that&#39;s _not_ quicksort, but an out-of-order lazily evaluated mergesort equivalent.  Quicksort is in-place.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>59</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 21:11:21</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 21:11:21</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[>Firstly, if you think code is beautiful, then:<br />><br />>qsort [] = []<br />>qsort (x:xs) = qsort (filter (= x) xs)<br />><br />>is a far more elegant implementation of quicksort, which <br />>essentially does the same things as your list comprehensions, <br />>but in a more succinct way (list comprehensions are implemented <br />>using filter and map anyway).<br /><br />Actually, I prefer the one I posted. Probably a subjective thing, but I find mine maps more directly onto how I conceptualise the algorithm in my head. But hey, as so many people have already said, beauty is in the eye of the beholder, right? Also, I agree with you that syntax is a bad way to judge a language, but that&#39;s not really what I&#39;m trying to do here. Haskell&#39;s qualities as a language don&#39;t really influence my perception of certain Haskell snippets as &#39;beautiful&#39;.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>60</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 21:13:18</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 21:13:18</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[>Unfortunately, handing it a pre-sorted list will demonstrate <br />>the gulf between beauty and practicality.<br /><br />Yes indeed, but isn&#39;t that the case in so many other disciplines? I don&#39;t write emails to my boss in iambic pentameter, after all.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>61</wp:comment_id>
        <wp:comment_author>Alan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 23:18:29</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 23:18:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[>Firstly, if you think code is beautiful, then:<br />><br />>qsort [] = []<br />>qsort (x:xs) = qsort (filter (= x) xs)<br />><br />>is a far more elegant implementation of quicksort, which essentially does the >same things as your list comprehensions, but in a more succinct way (list >comprehensions are implemented using filter and map anyway).<br /><br />I don&#39;t see how this will return anything except an empty list.  Is there something missing?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>62</wp:comment_id>
        <wp:comment_author>Weave Jester</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://weavejester.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 23:39:45</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 23:39:45</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[> qsort [] = []<br />> qsort (x:xs) = qsort (filter (= x) xs)<br />><br />> is a far more elegant implementation of quicksort<br /><br />The comment system ate everything between the less-than and greater-than operators. Hopefully this will come out right:<br /><br />qsort [] = []<br />qsort (x:xs) = qsort (filter (< x) xs) ++ [x] ++ qsort (filter (>= x) xs)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>63</wp:comment_id>
        <wp:comment_author>Georgi Y. Dimitrov</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 23:50:58</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 23:50:58</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[How beautiful is the code is important, because it makes the difference between programming languages. If the code is beautiful, it is readable and maintainable and vice versa. Lisp and Smalltalk have many virtues but ugly looking code and are unsuccessful and always will be. C, C++ and Perl have a bit less, but still ugly code and their popularity goes down. Java, C#, Ruby and Python have more beautiful code and their popularity is on the increase.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>64</wp:comment_id>
        <wp:comment_author>yaxu</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://yaxu.org/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-22 23:55:38</wp:comment_date>
        <wp:comment_date_gmt>2008-02-22 23:55:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Well said, of course representation can be beautiful!<br /><br />It&#39;s a chain of representation -- e.g. some code represents an algorithm, which in turn represents the tenets of some mathematical model, which in turn represents some aspect of the physical world.  Each step can be beautiful and/or ugly.<br /><br />It&#39;s not as if a piece of code was ever a perfect representation of an algorithm.  There are always interesting details of implementation which may have profound aesthetic effects on the results.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>65</wp:comment_id>
        <wp:comment_author>Jonathan Ville</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-23 01:30:36</wp:comment_date>
        <wp:comment_date_gmt>2008-02-23 01:30:36</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[> Unfortunately, that's _not_ quicksort, but an out-of-order lazily evaluated <br />> mergesort equivalent. Quicksort is in-place.<br /><br />This is actually correct, and I think quite important to note. The function should be re-named &#39;msort&#39;.<br /><br />However, merge sort has an average and worse case time complexity of O(n log n). Quicksort has a lower bound of O(n log n) and upper bound of O(n^2), but in practice is very fast, if you have a randomized, fat pivot, and an un-sorted list.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>66</wp:comment_id>
        <wp:comment_author>beza1e1</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://beza1e1.tuxen.de</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-23 11:36:39</wp:comment_date>
        <wp:comment_date_gmt>2008-02-23 11:36:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Mergesort is more stable than Quicksort, though. This is why GHC now uses Mergesort for List.sort and dropped it&#39;s old Quicksort.<br /><br />Neither of them looks beautiful in the real world by the way.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>67</wp:comment_id>
        <wp:comment_author>Pete</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-23 18:09:51</wp:comment_date>
        <wp:comment_date_gmt>2008-02-23 18:09:51</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[You must see the point about the Russian poetry though.  I agree that code can be beautiful, but not knowing anything about Haskel, I found your examples to be ugly and mostly unreadable (even the second, which I wouldn&#39;t have connected to the maths without the diagram right above it).]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>68</wp:comment_id>
        <wp:comment_author>anonymous</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-23 20:00:15</wp:comment_date>
        <wp:comment_date_gmt>2008-02-23 20:00:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[> Unfortunately, that's _not_ quicksort, but an out-of-order lazily evaluated<br />> mergesort equivalent. Quicksort is in-place.<br /><br />Quicksort: divide is interesting, conquer is trivial.<br />Mergesort: divide is trivial, conquer is interesting.<br /><br />In other words, the algorithm presented in the post is not mergesort or an equivalent of it. It&#39;s entirely fine to call it quicksort even though it&#39;s not in-place.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>69</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-23 21:39:32</wp:comment_date>
        <wp:comment_date_gmt>2008-02-23 21:39:32</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[>You must see the point about the Russian poetry though.<br /><br />I do indeed see the point about the Russian poetry - I didn&#39;t see much that was beautiful about it either. I just believe that this isn&#39;t always the case. Some representations may lack beauty, but it doesn&#39;t follow that ALL representations lack beauty. The point of this post was simply to refute that statement by providing counterexamples.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>70</wp:comment_id>
        <wp:comment_author>Daily Links - February 24, 2008 | Alvin Ashcraft's Daily Geek Bits</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.alvinashcraft.com/2008/02/24/daily-links-february-24-2008/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-24 13:01:12</wp:comment_date>
        <wp:comment_date_gmt>2008-02-24 13:01:12</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Code CAN Be Beautiful (Russ Gray) [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>73</wp:comment_id>
        <wp:comment_author>Programming expert</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-28 08:28:17</wp:comment_date>
        <wp:comment_date_gmt>2008-02-28 08:28:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[1) Quicksort (and mergsort) have nothing to do with being &quot;in-place&quot; or not.  There are in-place versions of both (though in place merge sort is usually called heap sort) and.... functional-friendly versions of both. :)<br /><br />2) Understanding is very much bound with beuty.  When I used to read Smalltalk code I thought it was awful because I didn&#39;t understand it (the same problem Georgi has above).  After I learned the syntax and saw the elegance of what it was doing it quickly became the most beutiful language I have ever seen.  Lisp is high on that list as well, based on it&#39;s simplicity and elegance.<br /><br />Things we don&#39;t understand we tend to see as *ugly*.  Especially when the thing in question is from a domain we expect to understand.<br /><br />You point about Italian opera misses the mark because for many who enjoy opera they content is the sounds and visuals.  We understand very well what sites and sounds are pleasing to us (though we probably wont know why).  Probably a similar percentage of people watch opera for the plot as do for a porno.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>91</wp:comment_id>
        <wp:comment_author>anonymous</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 14:10:05</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 14:10:05</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[> I am partial to c++ in this case,<br />> See the inplace quicksort in c++ compared to haskell's not-inplace one.<br />> taken from: http://erikhaugen.blogspot.com/<br /><br />Nice all right.  I&#39;m not too sure about the entirely in-place bit though.  When I looked up stable_partition to see what it did,  it seems that most implementation partition through allocating a temporary buffer...]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>106</wp:comment_id>
        <wp:comment_author>Michael Trick's Operations Research Blog » P.G. Wodehouse approach to Modeling?</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://mat.tepper.cmu.edu/blog/?p=243</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 18:44:15</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 18:44:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Unfortunately, not, but close. Refactoring in this context is “any change to a computer program's code that improves its readability or simplifies its structure without changing its results”, according to wikipedia. So when a computer program is built on over the years, at some point there is a wish to rewrite or otherwise consolidate the code so it is back looking new, ideally with the effects of all the changes intact. Of course, this is relevant to OR also. We often put together models that have been added on to, changed, and modified to within an inch of their lives. And at some point we would like to have the model “we should have written” in the first place. So there is a temptation to toss everything out and start again. In fact, I often recommend doing so in my classes. But that isn't very good practice, according to contemporary work in refactorization: Now, the first mistake to avoid here is the compulsion to throw it away and rewrite from scratch. So often when confronted with a vast seething moiling spiritless mass of code a developer throws his hands into the air and declares it a lost cause. How seductive is the thought that 31,000 lines of code could be thrown away and replaced with ~15,000 lines of clean, well-designed, beautiful code? [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>111</wp:comment_id>
        <wp:comment_author>Thomas</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://snodsbury.blogspot.com/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 23:15:15</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 23:15:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Not only can code be beautiful, but programming itself should be counted among the &#39;fine arts&#39;. Or so argued Pierre Lévy in his 1992 book <i>De la programmation considérée comme un des beaux arts</i> (On computer programming as a fine art):<br />http://www.amazon.fr/dp/2707121541/]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>136</wp:comment_id>
        <wp:comment_author>-jn-</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://joelneely.wordpress.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-26 17:33:29</wp:comment_date>
        <wp:comment_date_gmt>2008-03-26 17:33:29</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Ah, how we programmers LOVE to refuse to separate our concerns!  ;-)<br /><br />All the quibbling about programming language preferences and &quot;I can write that function in fewer characters&quot; puts me in mind of the book <i>Strictly Speaking</i> by Edwin Newman. Written in the immediately-post-Watergate era, the book is a wonderful extended lament on the difference between elegant ideas expressed in homely fashion (with examples from Yogi Berra, Casey Stengel, etc. IIRC) vs empty ideas expressed in flowery language (most of the politicians and advertisers of the day).<br /><br />I&#39;d also recommend <i>The Crystal Goblet</i> by Beatrice Warde for the same principles applied to typography. (See http://gmunch.home.pipeline.com/typo-L/misc/clar.htm for discussion.)]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>141</wp:comment_id>
        <wp:comment_author>vFiles</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://none</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-01 07:32:36</wp:comment_date>
        <wp:comment_date_gmt>2008-04-01 07:32:36</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[-regards to all<br /><br />,what is important is that your code flows smoothly and it is according to your algorithm and most especially you can predict wether  you can maximize its capability and upgrade its limitation. Thats how beautiful your work is, your programme!<br /><br />,other than that, can someone analyze the program that i developed it is a sorting algorithm. I made this program not to surpass the quicksort but since im in the process i used to attempt surpassing the fastest quicksort. Now i already finished it and based from the demonstrations and observation it is many times faster than the quicksort. I still want somebody who really knows how to evaluate so that i am confident that my algorithm was beautiful. <br /><br />, thanks]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>145</wp:comment_id>
        <wp:comment_author>Max</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-04-11 07:02:27</wp:comment_date>
        <wp:comment_date_gmt>2008-04-11 07:02:27</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[This blog is simply smashing. In my humble opinion of course. As this post is rather debatable I don&#39;t think all your blog visitors are going to agree with it.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>187</wp:comment_id>
        <wp:comment_author>-= Linkage 2007.02.25 =-</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://blog.fogus.me/2008/02/25/linkage-20070225/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-01-26 15:38:32</wp:comment_date>
        <wp:comment_date_gmt>2009-01-26 15:38:32</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] Beautiful Code? Yes!<br /> This drives me nuts, it really does. Of course the representation can be beautiful, and it can also be ugly. And the beauty of the representation can have an amplifying effect on the subject of the representation. Form and content are related. [...]]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Extending the Technical Debt Metaphor</title>
      <link>http://blog.basildoncoder.com/2008/02/extending-technical-debt-metaphor.html</link>
      <pubDate>Thu, 21 Feb 2008 16:07:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>32</wp:post_id>
      <wp:post_date>2008-02-21 16:07:00</wp:post_date>
      <wp:post_date_gmt>2008-02-21 16:07:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Extending-the-Technical-Debt-Metaphor</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[A few months ago, the inestimable Steve McConnell (he of <em><a href="http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/">Code Complete</a></em> fame) <a href="http://blogs.construx.com/blogs/stevemcc/archive/2007/11/01/technical-debt-2.aspx">wrote</a> about <a href="http://www.martinfowler.com/bliki/TechnicalDebt.html">technical debt</a>. McConnell looks to extend the metaphor beyond the simple idea of 'code that is going to be a liability in the future', identifying two main types of technical debt (deliberate and accidental), and identifying further correlations between the worlds of financial debt and technical debt.<br /><br />For instance, based on the technical debt already accumulated, one team may have a worse 'credit rating' than another:<br /><blockquote>Different teams will have different technical debt credit ratings. The credit rating reflects a team's ability to pay off technical debt after it has been incurred.<br /><p align="right">(McConnell, 2007)</p><br /></blockquote><br />There is a lot of insight in McConnell's article, and I recommend you nip over and read it right now if you haven't already. Technical debt is indeed a useful and rich analogy for communicating a particular class of technical problem to non-technical users.<br /><br />I wonder, however, if McConnell hasn't extended the metaphor in slightly the wrong direction. When considering technical debt, I like to think of the product managers as the debtors, and the development team as the creditors. The actual underlying concept remains the same, it's just a shift in responsibilities.<br /><br />Why?<br /><br />As a developer, I don't always get to make the decisions about whether something should be done in a quick 'n' dirty hack, or a properly-architected solution. Of course, I'm likely to recommend the latter where I can, but it's a fact of life that I will often be overruled, and rightly so. There are occasions when incurring technical debt is the right thing to do. McConnell lists a few examples, e.g:<br /><blockquote><em>Time to Market</em>. When time to market is critical, incurring an extra $1 in development might equate to a loss of $10 in revenue. Even if the development cost for the same work rises to $5 later, incurring the $1 debt now is a good business decision.<br /><p align="right">(McConnell, 2007)</p><br /></blockquote><br />This is a key issue. Software development considerations are not the be-all and end-all, no matter how much I (or any other developer) would like them to be. It's the <em>product teams</em> that make these business decisions, however, and therefore <strong>it should be the product teams that incur the debt</strong>.<br /><br />As developers, <strong>we are the ones who give the product guys what they want, and we take on the risk of that debt not being repaid</strong>, and that's why we are the creditors.<br /><br />So what does this mean? It means that, when considering whether to create some additional technical debt, it's the product team that should have a credit rating. Have they been making quick-win decisions excessively over the last six months? Well then, maybe they're at their <em>credit limit</em>, and cannot incur any more debt until they have used some of their budget on a project that reduces debt.<br /><br />How about if a product manager hasn't incurred any debt recently, but made a load of bandito decisions on a major project a year ago, and now the codebase is starting to feel the impact? Charge them <em>interest</em> on the debt, so that now it will cost more of their budget to pay off their debt. This is entirely fair, since with a longstanding debt it is often the case that more code has been built on top of it in the interim, which may have been written well but is inherently unstable due to the shaky foundations. Paying off the debt in full will involve refactoring this new code, too.<br /><br />Of course, you need a fairly enlightened product team if this metaphor is to be accepted, not to mention significant buy-in from senior management if you are seriously at risk of jeopardising the product roadmap by sticking to your guns. However, since the technical debt metaphor is something of a meme at the moment, why not suggest it? If the technical debt metaphor really does improve understanding on the part of non-technical stakeholders, maybe it isn't a hopeless daydream that they'll also accept the logical extensions of the idea.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/02/extending-technical-debt-metaphor.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>53</wp:comment_id>
        <wp:comment_author>RyanG</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.nslms.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-21 19:28:38</wp:comment_date>
        <wp:comment_date_gmt>2008-02-21 19:28:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Excellent metaphor, and I like the finer point you&#39;ve put on it.<br /><br />Having been the lone, inexperienced engineer on a project that&#39;s nearing 4 years old I incurred some heavy technical debt.  Our (still small) group is putting the finishing touches on the first release of a total rewrite of this product, hopefully significantly reducing our principle.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>100</wp:comment_id>
        <wp:comment_author>hans</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 17:40:36</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 17:40:36</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[While I like idea of the product team owning the debt, unfortunately all to often they don&#39;t pay the price for debt overload, at least not directly in a way they understand. Frequently the development team pays the price through things like late night support or pager duty due to low-quality rushed into production code.<br /><br />Like any metaphor, technical debt has its limits.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>191</wp:comment_id>
        <wp:comment_author>Freud</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2009-02-20 23:22:26</wp:comment_date>
        <wp:comment_date_gmt>2009-02-20 23:22:26</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[There is obviously a lot to know about this.  I think you made some good points in Features also.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>217</wp:comment_id>
        <wp:comment_author>Siobhan Brauner</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://watchrepomenonlinefree.wetpaint.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2010-06-14 10:39:40</wp:comment_date>
        <wp:comment_date_gmt>2010-06-14 10:39:40</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[A Fantastic blog post, I will be sure to save this in my Reddit account. Have a awesome day.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Reporting on NCover Exclusions</title>
      <link>http://blog.basildoncoder.com/2008/02/reporting-on-ncover-exclusions.html</link>
      <pubDate>Wed, 20 Feb 2008 19:54:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>33</wp:post_id>
      <wp:post_date>2008-02-20 19:54:00</wp:post_date>
      <wp:post_date_gmt>2008-02-20 19:54:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Reporting-on-NCover-Exclusions</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[On a recent project, my team was set the task of achieving 100% unit test pass-rate and code coverage. If you've ever been in this position, you'll know it's a double-edged sword - whilst it's great when the Powers That Be embrace quality instead of fixating, limpet-like, on the next deadline, it can be a nightmare when that percentage figure on the weekly summary becomes the new focus for managerial concentration, especially given <a href="http://www.ericsink.com/articles/Code_Coverage.html">how difficult it can be</a> to hit 100%.<br /><br />The problem is that achieving the magical 100% is, in many cases, neither practical nor particularly useful. It can even be a problem, if the warm fuzzy feeling you get when you see "Coverage: 100%" leads to complacency. Even with 100% coverage and pass-rate, <a href="http://www-128.ibm.com/developerworks/java/library/j-cq01316/">you don't necessarily have quality software</a>.<br /><br />Our high-level project architecture involved a .Net client talking to a suite of web services written in Java. The .Net client, as an application with a GUI and a web service proxy, contained a great deal of generated code and was my main concern when the targets were set.<br /><br />Now, it's my belief that in most cases there's no benefit to writing tests for generated code (unless you also wrote the generator). Unless you have a very, very good reason not to, you should trust that the tools are doing their job and generating sane code. That's what they're there for. If the tools are flaky, you probably shouldn't use them at all - though I suppose that if you sometimes fell foul of a particular bug you could write a test to detect it<sup>[1]</sup>.<br /><br />The cause of my concern was that the UI and web reference code accounted for about 30-35% of the <a href="http://en.wikipedia.org/wiki/Source_lines_of_code">SLOC</a> in the application, and so any coverage report that covered the whole app would be way short of the targets we were set. There are a number of ways to deal with this:<br /><ol><br /> <li>Bite the bullet and write tests for <em>everything</em>. That includes InitializeComponent(), drag 'n' drop handlers, and the sync and async versions of every web service stub. Best of luck, and see you in 2017<sup>[2]</sup>.</li><br /> <li>Explain patiently that some code does not need testing (or at least, is on the wrong side of the productivity bell curve and subject to massively diminishing returns in terms of effort/value). Of course, then you'll be asked to prove that you're not pulling a fast one and that the delta of your target and actual coverage percentage can be accounted for entirely by generated code. This will be tricky if you count SLOC for the generated code and use decision points for your test coverage, and maintaining this is another administrative task that you probably don't want to do.</li><br /> <li>Separate your code such that some assemblies contain <em>only</em> generated code, and the rest contain <em>only</em> business logic. Then exclude the former from your test suite so they don't show on the coverage report. This is probably achievable, though it can lead to some fairly hideous contortions to maintain the boundary, and can even result in sensible design decisions being discarded in favour of wacky ones that have no redeeming feature other than supporting your arbitrary separation rules.</li><br /> <li>Swear indiscriminately and refuse. Then clear your desk, probably.</li><br /></ol><br />None of those appealed, so we set out to find another approach. What we wanted was a more flexible variant of option 3, where we could exclude methods or classes without having to exclude the whole assembly. If we could exclude code at a fairly granular level, then it became both more realistic and useful to aim for 100% coverage of our actual business code, using all the <a href="http://homepage.mac.com/hey.you/lessons.html">normal techniques</a>.<br /><br />It turns out that code exclusion isn't so tough - <a href="http://www.ncover.com/">NCover</a> will ignore methods and classes tagged with an <a href="http://www.ericsink.com/articles/Code_Coverage.html">attribute named CoverageExclude in the global namespace</a><sup>[3]</sup>.<br /><br />This still requires a little discipline - for example making sure that if Joe marks a class as excluded, Jim doesn't add some business logic to that class a week later without removing the attribute - but nothing that can't easily be dealt with in regular code reviews.<br /><br />The Powers That Be are wily, alas, and when we pitched the idea to them they approved in principle but were wary of allowing bits of code to be arbitrarily dropped off the coverage reports. If a class was excluded, who excluded it and why?<br /><br />This seemed reasonable for accountability - the information would be available in the source check-in notes, but that's a bit fiddly since you don't know <em>when</em> the attribute was added; our source control system doesn't have anything analogous to subversion's 'blame' so you have to go rummaging through a potentially very long version history. A better solution would be to find a way to add the information directly to the coverage report, so that it's right there for all to see. So, how?<br /><br />The first step was to get the appropriate metadata into the code. The <a href="http://weblogs.asp.net/nunitaddin/archive/2006/10/04/CoverageExclude.aspx">reference implementation</a> for the CoverageExclude attribute is as follows:<br /><pre><span class="Type">public</span> <span class="Type">class</span> CoverageExcludeAttribute : Attribute { }</pre><br />We wanted to capture additional information when the attribute was used, however, so we added a couple of read-only properties and did away with the default constructor.<br /><pre><span class="Type">public</span> <span class="Type">class</span> CoverageExcludeAttribute : Attribute<br />{<br /> <span class="Type">private</span> <span class="Type">string</span> m_author;<br /> <span class="Type">private</span> <span class="Type">string</span> m_reason;<br /><br /> <span class="Type">public</span> CoverageExcludeAttribute(<span class="Type">string</span> reason,<br /> <span class="Type">string</span> author)<br />    {<br /> <span class="Statement">this</span>.m_reason = reason;<br /> <span class="Statement">this</span>.m_author = author;<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">string</span> Author<br />    {<br /> <span class="Statement">get</span> { <span class="Statement">return</span> <span class="Statement">this</span>.m_author; }<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">string</span> Reason<br />    {<br /> <span class="Statement">get</span> { <span class="Statement">return</span> <span class="Statement">this</span>.m_reason; }<br />    }<br />}</pre><br />Now, when anyone uses the attribute, the compiler forces them to add some additional data.<br /><pre>[CoverageExclude(<span class="Constant">"John Q Dev"</span>, <span class="Constant">"No testable code here, buster"</span>)]<br /><span class="Type">public</span> <span class="Type">void</span> MethodToBeExcluded(<span class="Type">int</span> x, <span class="Type">int</span> y)<br />{<br /> <span class="Comment">// ...</span><br />}</pre><br />NCover can be told to pay attention to this attribute with the excludeAttributes parameter, as explained <a href="http://www.kiwidude.com/blog/2006/07/nant-and-msbuild-tasks-for-ncover.html">here</a>.<br /><br />With the easy bit out of the way, the next task was to report on these exclusions.  Our build system, after running the test suite, used NCoverExplorer to generate a summary report. You can tell NCoverExplorer to list exclusions in reports, so we figured that would be a good place to start. The appropriate NAnt incantation is:<br /><pre><span class="Identifier"><</span><span class="Identifier">ncoverexplorer</span><span class="Identifier"> </span><span class="Type">failonerror</span>=<span class="Constant">"false"</span><span class="Constant"></span><br /><span class="Identifier"> </span><span class="Type">program</span>=<span class="Constant">"C:\NCoverExplorer\NCoverExplorer.Console.exe"</span><br /><span class="Identifier"> </span><span class="Type">projectName</span>=<span class="Constant">"Atmosphere Processor::LV426"</span><br /><span class="Identifier"> </span><span class="Type">reportType</span>=<span class="Constant">"4"</span><br /><span class="Identifier"> </span><span class="Type">xmlReportName</span>=<span class="Constant">"Report.xml"</span><br /><span class="Identifier"> </span><span class="Type">mergeFileName</span>=<span class="Constant">"CoverageMerge.xml"</span><br /><span class="Identifier"> </span><span class="Type">showExcluded</span>=<span class="Constant">"True"</span><br /><span class="Identifier"> </span><span class="Type">satisfactoryCoverage</span>=<span class="Constant">"80"</span><span class="Identifier"> ></span><br /><span class="Identifier"></span><br /> <span class="Identifier"><</span><span class="Identifier">fileset</span><span class="Identifier">></span><br /> <span class="Identifier"> </span><span class="Identifier"><</span><span class="Identifier">include</span><span class="Identifier"> </span><span class="Type">name</span>=<span class="Constant">"Coverage.xml"</span><span class="Identifier">/></span><br /> <span class="Identifier"></span><br /> <span class="Identifier"><</span><span class="Identifier">exclusions</span><span class="Identifier">></span><br /> <span class="Identifier"> </span><span class="Identifier"><</span><span class="Identifier">exclusion</span><span class="Identifier"> </span><span class="Type">type</span>=<span class="Constant">"Assembly"</span><span class="Identifier"> </span><span class="Type">pattern</span>=<span class="Constant">"*Tests"</span><span class="Identifier"> /></span><br /> <span class="Identifier"><</span><span class="Identifier">exclusion</span><span class="Identifier"> </span><span class="Type">type</span>=<span class="Constant">"Assembly"</span><span class="Identifier"> </span><span class="Type">pattern</span>=<span class="Constant">"*Fixtures*"</span><span class="Identifier"> /></span><br /> <span class="Identifier"></span><br /><span class="Identifier"></span></pre><br />Note the reportType and showExcluded attributes, which specify the summary report we want, with details of excluded code appended to the report. Note also the exclusion nodes, which specify that we want our test assemblies excluded from coverage metrics. The report will include a table like this:<br /><p style="text-align: center"><img src="http://basildoncoder.com/images/ncoverexplorer-report-unmodified.png" /></p><br />Our goal was to somehow get our custom properties (Author and Reason) into this report. To do so, firstly we needed to modify the above table with two extra columns to hold this custom data. NCoverExplorer ships with stylesheet called CoverageReport.xsl; the table modification was achieved by tweaking the 'exclusions summary' section as follows:<br /><pre><span class="Comment"><!</span><span class="Comment">-- Exclusions Summary --</span><span class="Comment">></span><br /><span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:<span class="Statement">template</span><span class="Identifier"> </span><span class="Type">name</span>=<span class="Constant">"exclusionsSummary"</span><span class="Identifier">></span><br />  <span class="Identifier"><</span><span class="Identifier">tr</span><span class="Identifier">></span><br />    <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">colspan</span>=<span class="Constant">"5"</span><span class="Identifier">></span><span class="Type">&</span><span class="Statement">#160</span><span class="Type">;</span><span class="Identifier"></td></span><br />  <span class="Identifier"></tr></span><br />  <span class="Identifier"><</span><span class="Identifier">tr</span><span class="Identifier">></span><br />    <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"exclusionTable mainTableHeaderLeft"</span><br />      <span class="Identifier"></span><span class="Type">colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />      Excluded From Coverage Results<span class="Identifier"></td></span><br />    <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"exclusionTable mainTableGraphHeader"</span><br />      <span class="Identifier"></span><span class="Type">colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />      All Code Within<span class="Identifier"></td></span><br />    <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"exclusionTable mainTableGraphHeader"</span><br />      <span class="Identifier"></span><span class="Type">colspan</span>=<span class="Constant">"2"</span><span class="Identifier">></span><br />      Reason For Exclusion<span class="Identifier"></td></span><br />  <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"exclusionTable mainTableGraphHeader"</span><br />    <span class="Identifier"></span><span class="Type">  colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />      Developer<span class="Identifier"></td></span><br />  <span class="Identifier"></tr></span><br />  <span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">for-each</span><span class="Identifier"> </span><span class="Type">select</span>=<span class="Constant">"./exclusions/exclusion"</span><span class="Identifier">></span><br />    <span class="Identifier"><</span><span class="Identifier">tr</span><span class="Identifier">></span><br />      <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"mainTableCellBottom exclusionTableCellItem"</span><br />         <span class="Identifier"> </span><span class="Type">colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />        <span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">value-of</span><span class="Identifier"> </span><span class="Type">select</span>=<span class="Constant">"@name"</span><span class="Identifier"> /></span><span class="Identifier"></td></span><br />      <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"mainTableCellBottom mainTableCellGraph"</span><br />         <span class="Identifier"> </span><span class="Type">colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />        <span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">value-of</span><span class="Identifier"> </span><span class="Type">select</span>=<span class="Constant">"@category"</span><span class="Identifier"> /></span><span class="Identifier"></td></span><br />      <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"mainTableCellBottom mainTableCellGraph"</span><br />          <span class="Type">colspan</span>=<span class="Constant">"2"</span><span class="Identifier">></span><br />        <span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">value-of</span><span class="Identifier"> </span><span class="Type">select</span>=<span class="Constant">"@reason"</span><span class="Identifier"> /></span><span class="Identifier"></td></span><br />      <span class="Identifier"><</span><span class="Identifier">td</span><span class="Identifier"> </span><span class="Type">class</span>=<span class="Constant">"mainTableCellBottom mainTableCellGraph"</span><br />          <span class="Identifier"></span><span class="Type">colspan</span>=<span class="Constant">"1"</span><span class="Identifier">></span><br />        <span class="Identifier"><</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">value-of</span><span class="Identifier"> </span><span class="Type">select</span>=<span class="Constant">"@author"</span><span class="Identifier"> /></span><span class="Identifier"></td></span><br />    <span class="Identifier"></tr></span><br />  <span class="Identifier"></</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">for-each</span><span class="Identifier">></span><br /><span class="Identifier"></</span><span class="Special">xsl</span><span class="Comment">:</span><span class="Statement">template</span><span class="Identifier">></span></span></pre><br />The next step was to actually inject our custom data into the report. This was a two-stage process:<br /><ol><br />	<li>Use reflection to iterate through the application assemblies, looking for anything tagged with our attribute</li><br />	<li>Open the report data file generated by NCoverExplorer and shoehorn our new data into it.</li><br /></ol><br />We created a simple little post-processor application to perform this work. To complete stage 1, we needed to iterate through a directory of assemblies, loading each one in turn. In each assembly, we iterated through the types contained therein, and looked for our custom attribute on each one. Then, we iterated through the methods on each type, and looked for the custom attribute there too. This is actually very simple - the code skeleton looks like this:<br /><pre><span class="Statement">foreach</span> (FileInfo assemblyFile <span class="Statement">in</span> assemblies)<br />{<br />    <span class="Statement">try</span><br />    {<br />        <span class="Comment">// Attempt to load the file as an assembly, and grab  </span><br />        <span class="Comment">// all the types defined therein</span><br />        Assembly assembly = Assembly.LoadFrom(<br />            assemblyFile.FullName);<br />        Type[] types = assembly.GetTypes();<br /><br />        <span class="Comment">// Spin through the types, looking for classes and </span><br />        <span class="Comment">// methods tagged with CoverageExclude</span><br />        <span class="Statement">foreach</span> (Type type <span class="Statement">in</span> types)<br />        {<br />            <span class="Type">object</span>[] classAttributes = type.GetCustomAttributes(<br />                <span class="Statement">typeof</span>(CoverageExcludeAttribute), <span class="Constant">false</span>);<br />            <span class="Statement">foreach</span> (CoverageExcludeAttribute classAttribute<br />                    <span class="Statement">in</span> classAttributes)<br />            {<br />                <span class="Comment">// ...</span><br />            }<br /><br />            MethodInfo[] methods = type.GetMethods(<br />                BindingFlags.Public |<br />                BindingFlags.NonPublic |<br />                BindingFlags.Instance |<br />                BindingFlags.Static);<br />            <span class="Statement">foreach</span> (MethodInfo method <span class="Statement">in</span> methods)<br />            {<br />                <span class="Type">object</span>[] methodAttributes =<br />                    method.GetCustomAttributes(<br />                    <span class="Statement">typeof</span>(CoverageExcludeAttribute), <span class="Constant">false</span>);<br />                <span class="Statement">foreach</span> (CoverageExcludeAttribute methodAttribute<br />                    <span class="Statement">in</span> methodAttributes)<br />                {<br />                    <span class="Comment">// ...</span><br />                }<br />            }<br />        }<br />    }<br />    <span class="Statement">catch</span> (Exception ex)<br />    {<br />        <span class="Comment">// Probably not a .Net assembly, do some appropriate </span><br />        <span class="Comment">// complaining to the user</span><br />    }<br />}</pre><br />In the loops, we cached the fully-qualified names of the types and methods tagged with the attribute.<br /><br />Stage 2 was implemented by tweaking the XML data file NCoverExplorer generates for the report. This is straightforward too - suck the report into an XmlDocument, grab the exclusion nodes, and add a couple of attributes to each one. All the types and methods were already listed since we'd set the excludeAttributes parameter in the NAnt configuration (see above).<br /><br />Therefore, all we needed to do was match up the FQNs we cached in stage 1 with the nodes already in the report:<br /><pre>XmlDocument doc = <span class="Statement">new</span> XmlDocument();<br />doc.Load(coverageFile.FullName);<br /><br /><span class="Comment">// Go through all the exclusion nodes and try to match </span><br /><span class="Comment">// them up against the exclusion data we have sucked </span><br /><span class="Comment">// out of the assemblies</span><br /><span class="Statement">foreach</span> (XmlNode node <span class="Statement">in</span> doc.SelectNodes(<span class="Constant">"//exclusion"</span>))<br />{<br />    <span class="Statement">switch</span> (node.Attributes[<span class="Constant">"category"</span>].Value)<br />    {<br />        <span class="Statement">case</span> <span class="Constant">"Class"</span>:<br />            <span class="Comment">// Find and remove the first exclusion reason for </span><br />            // <span class="Comment">this class</span><br />            FindExclusionAndModifyNode(exclusions.ClassExclusions,<br />                node);<br />            <span class="Statement">break</span>;<br />        <span class="Statement">case</span> <span class="Constant">"Method"</span>:<br />            <span class="Comment">// Find and remove the first exclusion reason for</span><br />            //<span class="Comment"> this method</span><br />            FindExclusionAndModifyNode(exclusions.MethodExclusions,<br />                node);<br />            <span class="Statement">break</span>;<br />        <span class="Statement">default</span>:<br />            <span class="Comment">// Exclusion at either assembly or namespace level</span><br />            <span class="Statement">break</span>;<br />    }<br />}</pre><br />The implementation of FindExclusionAndModifyNode simply loops through the cached FQNs to see if we have data that corresponds to the current node, and if so it creates two new attributes - one containing the name of the developer that added the CoverageExcludeAttribute to the code, and another containing their justification for doing so. Then the modified XmlDocument is written out to disk, overriding the original.<br /><br />The end result is a report that looks something like <a href="/TweakedCoverage.xml" target="_blank">this</a>, with all the excluded code neatly documented to keep suspicious managers happy.<br /><br />Since the post-processor was written as a simple command-line application, we could create a custom NAnt task for it and integrate the whole process seamlessly with our continuous integration setup.<br /><br />[1] I've seen it happen a few times before, for example an XML generator (which shall remain nameless) that occasionally 'forgot' our custom namespace and used a default, which caused parsers of that XML to scream in agony. It's rare though, unless you regularly dig up tools from CodeProject and use them in your production code, in which case you deserve everything you get ;-)<br /><br />[2] Written in 2008. So if you're reading this on December 31st 2016, adjust accordingly and don't come crying to me.<br /><br />[3] Yes, I know that NCover 2.x has built-in regex-based exclusions that do all this, but a) not everyone has an NCover 2.x pro licence, and b) we weren't using NCover 2.x as it hadn't been released at the time.</span></pre>]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/02/reporting-on-ncover-exclusions.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>245</wp:comment_id>
        <wp:comment_author>Envelopes Online</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.envelopeshop.com.au/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2011-04-20 11:11:06</wp:comment_date>
        <wp:comment_date_gmt>2011-04-20 11:11:06</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I will be working at the NCover booth. Finally, I got a lot information with your posting.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>246</wp:comment_id>
        <wp:comment_author>venki</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-04-27 11:25:28</wp:comment_date>
        <wp:comment_date_gmt>2011-04-27 11:25:28</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[hey, i m using Ncover 1.5.8 version. can u please tell me where to excude the code coverage at namespace level  and assembly level. <br />clearly, where to exclude the asembly name.. pls give the path! Thanks in advance]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Descent Into Incompetence</title>
      <link>http://blog.basildoncoder.com/2008/02/descent-into-incompetence.html</link>
      <pubDate>Sat, 02 Feb 2008 16:10:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>34</wp:post_id>
      <wp:post_date>2008-02-02 16:10:00</wp:post_date>
      <wp:post_date_gmt>2008-02-02 16:10:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Descent-Into-Incompetence</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I am fairly heavily involved with recruitment where I work, being the author of the technical test and phone screen questions we use for evaluating candidates, and conducting face-to-face interviews with many of the hopefuls that get over these early hurdles.<br /><br />Naturally, in order to gain these responsibilities I have gone through a number of required HR ass-covering exercises in which it was drilled into me that I am legally forbidden from asking questions about sexuality, marital status, family-planning, and anything else which might lead me into rejecting a candidate on grounds our beloved government considers discriminatory.<br /><br />Never mind that I have never shown the least inclination to discriminate against someone because they might want to possibly think about maybe taking some [mp]aternity leave in the next 30 years, or (gasp) prefer the company of their own gender, or whatever;  I have to go through all this training so that the company can throw me to the wolves if a candidate claims to have been discriminated against. "Not our fault, guvnor; we explained the rules".<br /><br />Still, fair enough I suppose; we live in litigious times, and not being a bigot I have no particular fears of transgressing.<br /><br />But what if the rules are changed? And what if they're changed in horribly unexpected ways? A <a href="http://news.bbc.co.uk/1/hi/business/7187032.stm">recent article</a> on the BBC News site contained, quite without fanfare, some shocking intelligence.<br /><blockquote>Previously standard questions about age, length of experience and religious views are now illegal, [Which?] points out.</blockquote><br />Wait, what? Length of experience is now a forbidden topic? So if I'm recruiting a senior developer or team lead, I now have to waste valuable time interviewing fresh-out-of-college tyros who haven't written a single line of commercial code or spent a single day working in a professional team?<br /><br />I can kind of see what is trying to be achieved here, but it is an unavoidable fact that experience is a <em>vital</em> attribute for many senior roles, and needs to be taken into consideration when trying to fill those roles. It's not just me either - a quick trawl through the endless agency emails I seem to get every day (despite telling them I'm not on the market) reveals that most tech jobs are still specifying <em>n</em> years of experience; this seems somewhat pointless now that candidates can't be asked about it. I wonder if they know?<br /><br />Even more interesting is the fact that many contract positions are still paid at 'rates negotiable on experience'. Hah, how does that work when experience is a forbidden subject? If I were graduating from university this year I'd be whoring myself around the City applying for £500-per-day contracting gigs and suing any bank that dared ask me to justify my rate.<br /><br />Rob Grant's novel <em><a href="http://www.amazon.co.uk/Incompetence-Gollancz-Rob-Grant/dp/0575074493/">Incompetence</a></em> just became slightly less hysterical.<br /><blockquote>Article 13199 of the Pan-European Constitution: "No person shall be prejudiced from employment in any capacity, at any level, by reason of age, race, creed or incompitence (<em>sic</em>).</blockquote>]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/02/descent-into-incompetence.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Freedom Zero: The All-Or-Nothing Fallacy</title>
      <link>http://blog.basildoncoder.com/2008/01/freedom-zero-all-or-nothing-fallacy.html</link>
      <pubDate>Tue, 29 Jan 2008 13:10:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>35</wp:post_id>
      <wp:post_date>2008-01-29 13:10:00</wp:post_date>
      <wp:post_date_gmt>2008-01-29 13:10:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Freedom-Zero:-The-All-Or-Nothing-Fallacy</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<a href="http://www.codinghorror.com/blog/">Jeff Atwood</a> has an <a href="http://www.codinghorror.com/blog/archives/001044.html">article</a> up today bemoaning the fact that seemingly nobody "gives a crap about freedom zero". Well, my initial reaction was that surely nobody could care about something with such a thoroughly ridiculous name. Freedom Zero? Really? I know this is the <a href="http://www.gnu.org/philosophy/free-sw.html">FSF</a>'s first freedom, and programmers <a href="http://en.wikipedia.org/wiki/0_(number)#Numbering_from_1_or_0.3F...">count from 0</a> don'tcha know, but it's still rubbish.<br /><br />But the real reason is that it simply isn't important enough to override everything else.<br /><br />Certainly, for some things you want the freedom and reliability of open source. I write my essays in OpenOffice, I use Vim as my text editor for all programming languages other than C#, and I write maths papers with LaTeX. I want my personal output to remain usable and not at the whim of some company somewhere, I agree with all that.<br /><br />But do I need my MP3 player to be open? No. My videogame console? No. My phone? No. My movie editor? No (though only because I always archive the source material). The irony is that people do indeed care about freedom - the freedom to <em>choose</em>, and the sad fact is that there is a certain type of zealot who only espouses freedom as long as it's <em>their type of freedom</em>. And that isn't freedom at all.<br /><br />Now, as it happens, Linux is my operating system of choice. I don't own any Apple computers, though I do have a first-gen iPod Mini, which is distinctly showing its age. I use Vista for .Net development, but I don't think anyone could reasonably call me an Apple zealot or an anti-freedom capitalist whatever.<br /><br />But you won't catch me criticising Apple for their closed platform. If it results in a decent product, I'm all for it. I used to have a G4 iBook and liked it a lot. When I'm in the market for an ultraportable later this year, I will give due consideration to the Mac Air.<br /><br />A Mac is a product - calling the hardware nothing more than a dongle is a ridiculous argument. You can run Linux on Mac hardware, and OSX on non-Mac hardware (suboptimally, granted). Would you call a Ferrari Enzo a dongle because you need one in order to run the Enzo engine management software?<br /><br />And it should be said that Apple isn't <em>quite</em> as closed as some people suggest - I can still install Firefox, Thunderbird, and other open source tools if I want to tackle the hostile internet with a trusted armoury. And OSX comes with things like Apache and SSH installed out of the box.<br /><br />So do I give a crap about freedom zero? Only in as far as it suits my needs. If a piece of closed software does a better job, <em>and the risk of losing data forever is within my tolerances</em>, then sure I'll use it and I won't let ideology get in my way.<br /><br />On the flip side, I care about interoperability, and I contribute or donate to a few open source projects, and will strongly oppose anything - legal or technological - that attempts to muscle open source out of existence. An open source tool deserves the right to compete. I use <a href="http://amarok.kde.org/">Amarok</a> not because it's open, but because I like it more than <a href="http://www.apple.com/itunes/">iTunes</a>. Conversely, I use <a href="http://msdn.microsoft.com/vstudio/">Visual Studio</a> not because it's proprietary, but because I prefer it to <a href="http://www.icsharpcode.net/OpenSource/SD/">SharpDevelop</a>.<br /><br />Use the best tool for the job.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/01/freedom-zero-all-or-nothing-fallacy.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Technical Book Club: Object Oriented Analysis &amp; Design, Chapter 1</title>
      <link>http://blog.basildoncoder.com/2008/01/technical-book-club-object-oriented.html</link>
      <pubDate>Sun, 27 Jan 2008 23:31:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>36</wp:post_id>
      <wp:post_date>2008-01-27 23:31:00</wp:post_date>
      <wp:post_date_gmt>2008-01-27 23:31:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Technical-Book-Club:-Object-Oriented-Analysis-&amp;-Design,-Chapter-1</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<a target="_blank" href="http://www.amazon.co.uk/Oriented-Analysis-Applications-Addison-Wesley-Technology/dp/020189551X/ref=ed_oe_h"></a><img border="0" align="left" width="240" src="http://ecx.images-amazon.com/images/I/51-uo4HUPCL._AA240_.jpg" height="240" />So, as <a href="http://basildoncoder.com/blog/2007/12/05/technical-book-club/">previously mentioned</a>, we'll start with the basics. This material is probably very familiar to most coders with even a small amount of experience, but it never hurts to refresh the fundamentals. You may even find that there's some material that seems so obvious you don't even actively think about it any more - which is good if it has become habit, but may be bad if you've grown complacent in certain areas.<br /><br />The overarching theme of the first chapter is <strong>complexity</strong>. Complexity is the enemy of the software developer, and it is vital to understand this fact. If you don't identify complexity as the enemy, you will find it harder to remain vigilant against it. <br /><br />Anyone who has worked as a developer for more than a year or two will almost certainly have exposure to the problems caused by complexity, but quite often complexity itself will not be pinpointed as the root cause. It may be a case of not seeing the wood for the trees - when trying to understand a system it's very easy to get bogged down wondering why some particular section of code does things a certain way, and not see the problems with the big picture. Of course, since complexity obscures the big picture, this is common and self-perpetuating.<br /><br />Object-oriented design, then, is a tool for managing complexity. Of course, it is many other things too, but this is one of the fundamentals. In particular, OOD is a natural way to represent <strong>hierarchies</strong>, and hierarchies are the primary tool Booch presents for making complexity manageable. A number of examples from nature are provided; for example, you can view a plant simply as a plant, or as a collection of structures (leaves, stem, roots).<br /><br /><img border="0" vspace="10" align="right" width="169" src="http://basildoncoder.com/images/flower.jpg" hspace="10" height="225" />Importantly, the overall hierarchical view of a plant can be broken down into many interacting sub-hierarchies, each of which may be considered in terms of its own structure and its <strong>interactions</strong>. This is an example of <strong>decomposition</strong>. If you want to study roots in detail, you can study the branch roots, the root apex, and the root cap - and break that down further if you like to consider roots as a collection of cells. To study roots in this sort of detail, however, you do not have to go to the same lengths with leaves and stems - it is enough to understand the interactions between the higher-level components.<br /><br />Complexity, therefore, is more manageable if it is divided into interacting components, each of which can be further divided into interacting subcomponents. At different levels of abstraction there are clear boundaries - it shouldn't be necessary to understand the epidermis of a leaf to examine a root, and likewise the study of a leaf should not need to consider the role of the root apex. This is known as <strong>separation of concerns</strong>, and allows you to ignore the parts of the system that you are not interested in at the time.<br /><br />In software, these principles are captured by OOD. Broadly, hierarchies can be modelled with inheritance, components can be modelled with modules, intercomponent interactions can be modelled with interfaces and method calls, and intracomponent interactions can be modelled with aggregation. These interactions are key, as they form part of the 'value' of a system - in layman's terms, the whole is greater than the sum of its parts.<br /><br /><img border="0" vspace="10" align="left" width="240" src="http://basildoncoder.com/images/jetengine.jpg" hspace="10" height="180" />Inheritance and aggregation are, respectively, 'is-a' and 'part-of' relationships. In both cases, these represent separate but overlapping hierarchies. Booch's example is that of an aeroplane. An aeroplane can be thought of as an aggregation of systems - propulsion, flight control, etc. Each of those can potentially be modelled as specilaised types too - for instance a jet engine is a particular type of propulsion, and a turbofan engine is a particular type of jet engine.<br /><br />In OO terms, the 'is-a' relationships are expressed as <strong>class structures</strong> utilising inheritance, and 'part-of' relationships are expressed as <strong>object structures</strong> utilising aggregation.<br /><br /><strong>Relative primitives</strong> are an interesting concept, and refer as much as anything to the benefit of having a sensible and appropriate vocabulary at each level of abstraction. With plants, for instance, if you are working at the cellular level your primitives are nuclei, chloroplasts etc. If, however, you are at the top level your primitives should be leaves and stems - something is wrong if you are concerning yourself with the nucleus of a cell at this level of abstraction. Relative primitives are a natural consequence of hierarchies and decomposition, if your hierarchies are sane.<br /><br />Even with all these tools for managing complexity at our disposal, it is still extraordinarily hard - if not nigh-on impossible - to construct a large complex system in one fell swoop. Booch identifies that a key characteristic of successful complex systems is that they evolve from simpler systems, whilst always being useful during that evolution - they have <strong>stable intermediate forms</strong>.<br /><br />Contemporary development processes, such as agile development, explicitly recognise this with the mantra of 'deliver early, deliver often'. The idea is that functionality should be delivered iteratively, with each iteration being functional and testable. This is in contrast to more traditional waterfall methodologies, which are notoriously associated with failed projects, often due to attempting to design a large complex system up-front and develop it all at once.<br /><br />In summary, then, Booch argues that the characteristics of a manageable complex system are as follows:<br /><ul><br /> <li>Hierarchic</li><br /> <li>Uses relative primitives</li><br /> <li>Has robust separation of concerns</li><br /> <li>Has stable intermediate forms</li><br /></ul><br />It is important to note in passing that, since OOA&D; is an unashamed champion of object-orientation as a mechanism for managing complexity, OO is by no means the only approach - functional and procedural languages have their own techniques, and in some cases may be more suitable, depending on the problem to be solved. Even so, many of these principles are common and are useful things to bear in mind when designing a system.<br /><br />Next week we look at chapter 2, which covers the object model in greater detail.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Book Club</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/01/technical-book-club-object-oriented.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>82</wp:comment_id>
        <wp:comment_author>name</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 10:25:39</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 10:25:39</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The benefits of OOAD are greatly exaggerated.  Structured programming techniques from 20 years ago are more practical:  http://www.amazon.com/Practical-Structured-Systems-Yourdon-Computing/dp/0136907695/ref=sr_1_1?ie=UTF8&s;=books&qid;=1206267309&sr;=8-1<br /><br />If you still want to drink the OO kool-aid for applications, this is a very good book based on (gasp!) real-world experiences: http://www.amazon.com/Use-Case-Driven-Object-Modeling/dp/1590597745/ref=sr_1_1?ie=UTF8&s;=books&qid;=1206267393&sr;=1-1<br /><br />For large-scale systems forget about OOAD literature, read some books on proper Systems Engineering: http://www.sstc-online.org/Proceedings/2005/PDFFiles/JOC846.pdf]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Fab Fib</title>
      <link>http://blog.basildoncoder.com/2008/01/fab-fib.html</link>
      <pubDate>Sat, 26 Jan 2008 15:49:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>37</wp:post_id>
      <wp:post_date>2008-01-26 15:49:00</wp:post_date>
      <wp:post_date_gmt>2008-01-26 15:49:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Fab-Fib</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[<a href="http://www.hanselman.com/blog/">Scott Hanselman</a> continues his <a href="http://www.hanselman.com/blog/CategoryView.aspx?category=Source+Code">Weekly Source Code</a> series with a look at algorithms for generating the <a href="http://en.wikipedia.org/wiki/Fibonacci_number">Fibonacci sequence</a> in a <a href="http://www.hanselman.com/blog/TheWeeklySourceCode13FibonacciEdition.aspx">variety of different languages</a>. He misses my favourite implementation, though fortunately a wise commenter has already sought to correct such an egregious error. As is so often the case, it is Haskell that provides the most elegant yet mind-bending alternative:<br /><pre>fibonacci n <span class="Statement">=</span> fib<span class="Statement">!!</span>n <br /> <span class="Type">where</span> fib <span class="Statement">=</span> <span class="Constant">0</span> <span class="Statement">:</span> <span class="Constant">1</span> <span class="Statement">:</span> zipWith (<span class="Statement">+</span>) fib (tail fib)</pre><br />This little beauty appends a list with its own tail <em>while it's still being generated</em> and lazily sums the elements. On top of that, it's <em>fast</em>, since unlike most naive recursive Fibonacci generators it doesn't waste time recalculating previous values. In fact, it runs in linear time, that is <em>O(n)</em>, and on a fairly modest 2GHz Athlon XP will calculate the 50,000th Fibonacci number in around 600 milliseconds. By contrast, the naive recursive implementation in C# (see below, adapted and corrected from the code Scott posted) takes 28 seconds to calculate the 45th number, on a much more powerful Core Duo machine.<br /><pre>$ time ./Fibs.exe <br />1134903170 <br />Execution time: 00:00:28.2930000      <br /><br />real    0m28.382s <br />user    0m0.000s <br />sys     0m0.031s</pre><br />As implemented, you can't go much higher than this since the 47th number in the sequence (2971215073) is too big to store in a 32-bit signed int. Asking for the 50,000th number results in an immediate stack overflow, which is the runtime's way of saying "don't be ridiculous, mate".<br /><br />Of course, the C# version could be made many times faster and more efficient by implementing it iteratively (i.e. with a for loop), but this is less natural since the Fibonacci sequence is a recurrence relation and therefore best expressed recursively. The beauty of the Haskell version is that it combines expressiveness with performance, always a happy combination.<br /><pre><span class="Statement">using</span> System; <br /><br /><span class="Type">namespace</span> Fibs <br />{ <br /> <span class="Type">class</span> Program <br />    { <br /> <span class="Type">static</span> <span class="Type">void</span> Main(<span class="Type">string</span>[] args) <br />        { <br />            DateTime start = DateTime.Now; <br />            Console.WriteLine(Fibonacci(<span class="Constant">45</span>)); <br />            Console.WriteLine(<span class="Constant">"Execution time: {0}"</span>, <br />                DateTime.Now.Subtract(start)); <br />        } <br /><span class="Type"> <br />        static</span> <span class="Type">int</span> Fibonacci(<span class="Type">int</span> n) <br />        { <br /> <span class="Statement">if</span> (n == <span class="Constant">0</span> || n == <span class="Constant">1</span>) <br /> <span class="Statement">return</span> n; <br /> <span class="Statement">return</span> Fibonacci(n - <span class="Constant">1</span>) + Fibonacci(n - <span class="Constant">2</span>); <br />        } <br />    } <br />}</pre>]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2008/01/fab-fib.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>50</wp:comment_id>
        <wp:comment_author>Don Stewart</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.cse.unsw.edu.au/~dons</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-01-26 18:19:53</wp:comment_date>
        <wp:comment_date_gmt>2008-01-26 18:19:53</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[You might be interested in the collected Haskell fibonacci<br />implementations here: http://haskell.org/haskellwiki/The_Fibonacci_sequence<br />which includes neat, concise ones, and parallel ones that will use all<br />your cores.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>51</wp:comment_id>
        <wp:comment_author>Scott Hanselman</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.hanselman.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-01-26 18:43:17</wp:comment_date>
        <wp:comment_date_gmt>2008-01-26 18:43:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[It&#39;s funny, I did a Haskell one in college and considered it for this post, but it was getting pretty long (the post) so I didn&#39;t. Thanks for fixing my error and for a great writeup!]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>52</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-01-27 17:04:54</wp:comment_date>
        <wp:comment_date_gmt>2008-01-27 17:04:54</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Don, thanks for the link! The parallel implementations are interesting, though they seem to me to be more an exercise in demonstrating Haskell&#39;s parallel capabilities since they stick to the naive recursive approach. What I love about the zipWith solution is how it performs so well whilst retaining most of the elegance of the naive recursive solution.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>127</wp:comment_id>
        <wp:comment_author>Trevor Bernard</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.chalk.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-24 16:28:38</wp:comment_date>
        <wp:comment_date_gmt>2008-03-24 16:28:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[The Haskell implementation is just a little dynamic programming. It can easily but not quite as elegantly be done in any procedural language.<br /> <br />int fib[50];<br />fib[0] = 0;<br />fib[1] = 1;<br />for(int i=2; i<50; i++) {<br />    fib[i] = fib[i-2] + fib[i-1];<br />}]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>192</wp:comment_id>
        <wp:comment_author>Eli</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://lowmag.net/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-03-11 02:35:38</wp:comment_date>
        <wp:comment_date_gmt>2009-03-11 02:35:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Trevor,<br /><br />While that function works and is O(n), the Haskell example can generate all Integer (bignum) values in the fibonacci sequence, limited only by system RAM.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>206</wp:comment_id>
        <wp:comment_author>the-free-energy</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://hubpages.com/hub/Why-Invest-in-Solar-Energy</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-12-01 12:15:10</wp:comment_date>
        <wp:comment_date_gmt>2009-12-01 12:15:10</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Omg, I must say this is truly owning... Thanks for giving such a nice read, you made my day.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Turbocharging .Net Webservice Clients</title>
      <link>http://blog.basildoncoder.com/2007/12/turbocharging-net-webservice-clients.html</link>
      <pubDate>Sat, 15 Dec 2007 19:51:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>38</wp:post_id>
      <wp:post_date>2007-12-15 19:51:00</wp:post_date>
      <wp:post_date_gmt>2007-12-15 19:51:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Turbocharging-.Net-Webservice-Clients</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Since the first version of .Net and its associated toolset, Microsoft have sought to make it easy to write <a href="http://en.wikipedia.org/wiki/SOAP">SOAP</a> services and SOAP clients. And, generally, they have succeeded quite well. Whilst the open-source world has tended to prefer the simpler <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a> approach, MS (and Sun, and Apache) have done an admirable job of taking the large, complex SOAP protocol and making it reasonably straightforward to work with most of the time.<br /><br />One of the areas in which things get somewhat less straightforward is high performance. Granted, most web services don't have particularly eye-popping requirements in terms of hits or transactions, but occasionally you find an exception. <a href="http://www.betfair.com">Betfair</a>, for instance, have an <a href="http://bdp.betfair.com">API</a> that has peak rates in excess of 13,000 requests <em>per second</em>, many of which hit the database, with individual users making tens or even hundreds of requests per second. Betfair's data changes at a breathtaking rate and there is a perceived advantage to getting hold of up-to-the-millisecond information.<br /><br />To put that in context, the <a href="http://en.wikipedia.org/wiki/Digg_effect">Digg Effect</a> is estimated to peak at around <a href="http://www.ndesign-studio.com/blog/updates/the-digg-effect/">6K-8K hits</a> <a href="http://linuxbraindump.org/2007/08/21/the-digg-effect-a-deconstruction/">per hour</a> as I write in December 2007, which translates to a piffling couple of hits per second (8000 / 60 / 60 = 2.2). Even a more extreme prediction of <a href="http://creativebits.org/webdev/surviving_the_digg_effect">50K hits per hour</a> is only around 14 hits per second, so we're talking about handling three orders of magnitude more requests than Digg generates.<br /><br />If you are writing a .Net client and want to get the best out of this sort of situation, you are hamstrung unless you learn a few tricks. Read on to learn five of the best. I'll be using the Betfair API as an example throughout, but the techniques apply to any high-performance web service where the usage profile involves frequent small (<1KB) SOAP requests.<br /><br />For those who normally turn to the back of the book for answers and don't really care about the whys and wherefores, here's the executive summary:<br /><ol><br /> <li><strong>Switch off Expect 100 Continue</strong>. This should be done in your App.config file (see below).</li><br /> <li><strong>Switch off Nagle's Algorithm</strong>. This should be done in your App.config file (see below).</li><br /> <li><strong>Use multithreading</strong>. Unfortunately this is not a simple configuration file setting, it is a fundamental part of your application design.</li><br /> <li><strong>Remove the maximum connection bottleneck</strong>. This should be done in your App.config file (see below). This is <em>vital</em> if your application is multithreaded.</li><br /> <li><strong>Use gzip compression</strong>. .Net 2 has this built-in if you switch it on; .Net 1.1 needs a helping hand.</li><br /></ol><br />The XML snippet that configures these settings is shown below, and should be added to your App.config file:<br /><pre><span class="Identifier"><</span><span class="Identifier">system</span><span class="Comment">.</span><span class="Identifier">net</span><span class="Identifier">></span><br /> <span class="Identifier"><</span><span class="Identifier">connectionManagement</span><span class="Identifier">></span><br /> <span class="Identifier"><</span><span class="Identifier">add</span><span class="Identifier"> <!--         span--><span class="Type">address</span>=<span class="Constant">"*"</span><span class="Identifier"> <!--      span--><span class="Type">maxconnection</span>=<span class="Constant">"20"</span><span class="Identifier"> /></span><br /> <span class="Identifier"></span><br /> <span class="Identifier"><</span><span class="Identifier">settings</span><span class="Identifier">></span><br /> <span class="Identifier"><</span><span class="Identifier">servicePointManager</span><br /><span class="Identifier"> </span><span class="Type">expect100Continue</span>=<span class="Constant">"false"</span><span class="Identifier">/></span><br /> <span class="Identifier"><</span><span class="Identifier">servicePointManager</span><br /><span class="Identifier"> </span><span class="Type">useNagleAlgorithm</span>=<span class="Constant">"false"</span><span class="Identifier">/></span><br /> <span class="Identifier"></span><br /><span class="Identifier"></span><span class="Comment">.</span><span class="Identifier">net></span><br /></span></span></pre><br />For those who share my distrust of <a href="http://basildoncoder.com/blog/2007/12/09/coding-by-convention/">unexplained sorcery</a>, here's the gory details.<br /><br /><em><strong>Expect-100 the Unexpected</strong></em> <a href="http://www.ietf.org/rfc/rfc2616.txt"></a><br /><br /><a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a> (the specification for HTTP 1.1) includes a request header and response code that together are known as 'Expect 100 Continue'. When using the Expect header, the client will send the request headers and wait for the server to respond with a response code of 100 <em>before</em> sending the request body, i.e. splitting the request into two parts with a whole round-trip in-between.<br /><br />Why would you ever want to do this? Well, imagine you are trying to upload a 101MB file to a web server with a 100MB file size limit. If you just submit the whole thing as one request, you'll sit there for ages waiting for the upload to complete, only to have it fail right at the last minute when you hit the 100MB limit. Using Expect 100 Continue, you submit just the headers initially, and wait for the server's permission to continue; in our example, this gives the server a chance to look at the Content-Length parameter and identify that your file is too big, and return an error code instead of permission to continue. This way you know the upload will fail, without needlessly transmitting a single byte of the large file.<br /><br />By default, the .Net Framework uses the Expect 100 Continue approach. Most SOAP requests are not, however, anywhere near 101MB in size, and a server designed to deal with thousands of requests per second is not likely to be returning anything other than 100 Continue if the Expect header is sent. Depending on latency, the round-trip penalty may be unacceptable.<br /><br />For example, Betfair's Australian exchange (physically located in Australia) contains all their Australian markets, so if you're in the UK and want to trade on the Australian Open tennis you're subject to a round-trip time of about 350ms. If you allow your requests to be split into two, then you have two round-trips, so your request will take 700ms plus processing time.<br /><br /><img src="http://basildoncoder.com/images/expect100_on.png" align="middle" height="414" width="452" /><br /><br />You don't want that, so switch it off. Note that the request headers and body are still sent separately, but the latter is no longer dependent on the response to the former (so they are shown as sent together in this diagram).<br /><br /><img src="http://basildoncoder.com/images/expect100_off.png" align="middle" height="313" width="450" /><br /><br />The setting corresponding to this in the XML snippet above is:<br /><pre><span class="Identifier"><</span><span class="Identifier">servicePointManager</span><br /><span class="Identifier"> </span><span class="Type">expect100Continue</span>=<span class="Constant">"false"</span><span class="Identifier">/></span></pre><br /><em><strong>Nagle's Algorithm</strong></em><br /><br /><a href="http://en.wikipedia.org/wiki/Nagle%27s_algorithm">Nagle's algorithm</a> is a low-level algorithm that tries to minimise the number of TCP packets on the network, by trying to fill a TCP packet before sending it. TCP packets have a 40-byte header, so if you try to send a single byte you incur a lot of overhead as you are sending 41 bytes to represent 1 byte of information. This 4000% overhead causes chaos on congested networks. A TCP packet size is configurable, but is often set to 1500 bytes, and so Nagle's algorithm will buffer outgoing data in an attempt to send a small number of full packets rather than a huge amount of mostly empty packets.<br /><br />Nagle's algorithm can be paraphrased in English like this:<br /><br /><span style="font-style: italic">If I have less than a full packet's worth of data, and I have not yet received an acknowledgement from the server for the last data I sent, I will buffer new outbound data. When I get a server acknowledgement or have enough data to fill a whole packet, I will send the data across the network.</span><br /><br />Now, with our use case (frequent SOAP requests, each <1KB) a request doesn't fill a packet, so requests are subject to buffering. Furthermore, as explained above, even with Expect 100 Continue switched off the request headers are still sent separately from the request body, so the body of the first request is buffered until the request headers reach their destination and the server sends back a TCP ACK.<br /><br />Let us again consider a UK client communicating with Betfair's Australian API. Your application issues two requests one for current prices and one for your current market position (Req1 and Req2 in the diagram below). Together, both these requests are less than 1500 bytes. The headers for the first request are transmitted, but Nagle's algorithm buffers the request body, plus the whole second request, since they don't fill a TCP packet.<br /><br />Due to the round trip latency, the acknowledgment of the first request's headers is not received for 350ms, so that is how long the requests are buffered for. When the requests do get sent, they too are subject to 350ms latency around the world, so again you end up with around 700ms added to each of your Australian API calls.<br /><br /><img src="http://basildoncoder.com/images/nagle_on.png" align="middle" /><br /><br />Without Nagle, we dispense with the buffering and send out our smaller packets immediately, saving a round-trip.<br /><br /><img src="http://basildoncoder.com/images/nagle_off.png" align="middle" />  One word of warning - disabling Nagle can cause problems if you are on a highly-congested network or have overworked routers and switches, since it increases the number of network packets flying around. If you don't own your network, or are deploying your web service client to a large number of users, you might want to think about this carefully as you won't be popular if your software saturates the network.  The setting corresponding to this in the XML snippet above is:<br /><pre><span class="Identifier">servicePointManager</span><br /><span class="Identifier"> </span><span class="Type">useNagleAlgorithm</span>=<span class="Constant">"false"</span><span class="Identifier">/></span></pre><br /><em><strong>Happenin' Threads</strong></em><br /><br />This one should be pretty obvious. A single-threaded application can only do one thing at a time. A multi-threaded application can do multiple things at a time. So if, for example, you want to display some information and need to collate the results from four web service requests to build your view, calling them one after another is going to be slower than calling them all simultaneously (not to mention freezing your UI if you're writing a WinForms application and making calls on the UI thread).<br /><br />Explaining how to design and write multi-threaded .Net applications is way out of scope for this blog post, but any time you spend reading and learning about it either online or in books is going to be time well-spent. Go on, do it now. <strong>Also read the next section</strong>, otherwise your application will not get as much benefit as you expect.<br /><br /><em><strong>Walk and Chew Gum</strong></em><br /><br />.Net, by default, has a bottleneck on simultaneous web service calls against the same host. This one catches loads of people out - they write clever multi-threaded applications that issue many, many requests, and never realise that beneath the application layer a lot of their requests are called in sequence rather than in parallel.<br /><br />Tsk, damn Microsoft for unnecessarily crippling their framework, right? Well no, actually, since this is an example of Microsoft following standards and recommendations and is to be applauded, lest they go back to their old ways of "embrace and extend". The recommendation in question is from <a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a> again, and states:<br /><blockquote>A single-user client SHOULD NOT maintain more than 2 connections with any server or proxy.<br /><p align="right">(<em>RFC 2616</em>, section 8.1.4)</p><br /></blockquote><br />.Net uses HTTP 1.1 persistent connections by default (this is a good thing - you don't want to incur the cost of establishing a TCP connection with every request,<em> especially</em> if you have long round-trip times as well since it involves multiple round-trips), so MS have done the right thing and restricted processes to two simultaneous connections by default.<br /><br />What does this mean for your application? It means that if you want to make 20 requests, and do so on 20 threads as recommended above, under the hood .Net only makes two at a time and queues the rest up. Therefore your 20 threads are wasted, as your throughput is no better than if you'd only created two threads, and innocent web servers are protected from overzealous clients.<br /><br />When we know that we're talking to an insane city-flattening Godzilla-on-steroids of a server, however, the two-connection limit is unreasonable and we can ramp-up safely. The corresponding setting in the XML snippet above is:<br /><pre><span class="Identifier"><</span><span class="Identifier">connectionManagement</span><span class="Identifier">></span><br /> <span class="Identifier"><</span><span class="Identifier">add</span><span class="Identifier"> <!--         span--><span class="Type">address</span>=<span class="Constant">"*"</span><span class="Identifier"> <!--      span--><span class="Type">maxconnection</span>=<span class="Constant">"20"</span><span class="Identifier"> /></span><br /></span></span></pre><br />Sorted. You can, of course, change the number 20 to whatever is appropriate for your application.<br /><br /><strong>Warning:</strong> Do not, under any circumstances, get into the habit of configuring this for all your web service applications. With all 20 threads issuing one request per second, you are exceeding the 14-request-per-second Digg Effect example I used above; with this technique and enough bandwidth your application will be quite capable of taking a lot of websites down, and those that manage to weather the storm will probably blacklist your IP address and/or close your account. <em>Only use this if you are absolutely sure the server is up to it and such aggressive behaviour is permitted by the owners</em>.<br /><br /><em><strong>Small is Beautiful</strong></em><br /><br />The last step is to enable compression on your responses. Depending on the nature of the service you are using, the value of this tip may vary, but it's likely to be of some benefit given the number of requests per second we are issuing. Of course, it is dependent on the web service actually supporting compression, but it's been a standard feature of just about every web server for years, so this shouldn't be a problem.<br /><br />Lets look at a worked example. The getMarketPrices response from the Betfair API is about 30KB of XML. If, as above, we have 20 threads issuing one request per second, and each thread is interested in prices from a different market, that's about 600KB of data per second, which will quite easily saturate a lot of home broadband connections.<br /><br />With gzip compression, however, each response comes down to about 5KB (XML compresses very well, generally, since it is just text with a lot of repetition and whitespace), so the 20 threads now demand a more manageable 100KB per second.<br /><br />Great. So how do we use it? In .Net 2.0 and above it's very easy - just set the EnableDecompression property of your web service proxy object (ignore IntelliSense, which incorrectly claims the value is true by default; it's actually false by default, <a href="http://msdn2.microsoft.com/en-us/library/system.web.services.protocols.httpwebclientprotocol.enabledecompression.aspx">as stated on MSDN</a>). For example, to get compressed responses from Betfair's <a href="https://api.betfair.com/global/v3/BFGlobalService.wsdl">global server</a>:<br /><pre>BFGlobalService service = <span class="Statement">new</span> BFGlobalService();<br />service.EnableDecompression = <span class="Constant">true</span>;</pre><br />If you're still using .Net 1.1, you have a bit more work to do, since support for gzip was inexplicably left out of the framework. First, you need to subclass the generated BFGlobalService proxy class, and override some key methods so you can a) include the Accept-Encoding header to tell the server that you understand gzip, and b) decompress the gzipped response before the XML deserializer sees it, otherwise it'll choke.<br /><pre><span class="Type"></span><span class="Type">public</span> <span class="Type">class</span> BFGlobalWithGzip : BFGlobalService<br />{<br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"><</span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Comment">///</span><span class="Comment"> Adds compression header to request header</span><br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"></span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Type">protected</span> <span class="Type">override</span> System.Net.WebRequest<span class="Identifier"></span><br /> <span class="Comment"></span> GetWebRequest(Uri uri)<br />    {<br />         HttpWebRequest request = <span class="Comment"></span><br />             (HttpWebRequest)<span class="Statement">base</span>.GetWebRequest(uri);<br /><br /> <span class="Comment">// Turn on compression</span><br />         request.Headers.Add(<span class="Constant">"Accept-Encoding"</span>,<span class="Identifier"></span><br /> <span class="Comment"></span><span class="Constant">"gzip, deflate"</span>);<br /> <span class="Statement">return</span> request;<br />    }<br /><br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"><</span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Comment">///</span><span class="Comment"> Decompress response before the Xml serializer gets</span><span class="Identifier"></span><br /> <span class="Comment">/// </span><span class="Comment">its hands on it</span><br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"></span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Type">protected</span> <span class="Type">override</span> WebResponse GetWebResponse(<span class="Identifier"></span><br /> <span class="Comment"></span>WebRequest request)<br />    {<br /> <span class="Statement">return</span> <span class="Statement">new</span> HttpWebResponseDecompressed(request);<br />    }<br /><br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"><</span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Comment">///</span><span class="Comment"> Need to override this method if performing</span><span class="Identifier"></span><br /> <span class="Comment">/// </span><span class="Comment">asynchronous calls, </span><span class="Comment">otherwise</span><span class="Comment"> </span><span class="Comment">de-compression</span><span class="Comment"></span><span class="Identifier"></span><br />    /// <span class="Comment">will not be performed </span><span class="Comment">and will throw </span><span class="Comment">an error</span><br /> <span class="Comment">///</span><span class="Comment"> </span><span class="Identifier"></span><span class="Statement">summary</span><span class="Identifier">></span><br /> <span class="Type">protected</span> <span class="Type">override</span> WebResponse GetWebResponse(<span class="Identifier"></span><br />        WebRequest request, IAsyncResult result)<br />    {<br /> <span class="Statement">return</span> <span class="Statement">new</span> HttpWebResponseDecompressed(<span class="Identifier"></span><br />            request, result);<br />    }<br />}</pre><br />Next, implement the HttpWebResponseDecompressed class. This subclasses .Net's WebResponse class and knows how to decompress a response if it has ContentEncoding 'gzip':<br /><pre><span class="Type">public</span> <span class="Type">class</span> HttpWebResponseDecompressed : WebResponse<br />{<br /> <span class="Type">private</span> HttpWebResponse m_response;<br /> <span class="Type">private</span> MemoryStream m_decompressedStream;<br /><br /> <span class="Type">public</span> HttpWebResponseDecompressed(WebRequest request)<br />    {<br />        m_response = (HttpWebResponse)request.GetResponse();<br />    }<br /><br /> <span class="Type">public</span> HttpWebResponseDecompressed(WebRequest request,<br /> <span class="Type"></span>IAsyncResult result)<br />    {<br />        m_response = (HttpWebResponse)<br /> <span class="Type"></span>request.EndGetResponse(result);<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">override</span> <span class="Type">long</span> ContentLength<br />    {<br /> <span class="Statement">get</span><br />        {<br /> <span class="Statement">if</span> (m_decompressedStream == <span class="Constant">null</span><br /> <span class="Type"></span>|| m_decompressedStream.Length == <span class="Constant">0</span>)<br /> <span class="Statement">return</span> m_response.ContentLength;<br /> <span class="Statement">else </span><span class="Statement">return</span> m_decompressedStream.Length;<br />        }<br /> <span class="Statement">set </span>{ m_response.ContentLength = <span class="Statement">value</span>; }<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">override</span> <span class="Type">string</span> ContentType<br />    {<br /> <span class="Statement">get </span>{ <span class="Statement">return</span> m_response.ContentType; }<br /> <span class="Statement">set </span>{ m_response.ContentType = <span class="Statement">value</span>; }<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">override</span> Uri ResponseUri<br />    {<br /> <span class="Statement">get </span>{ <span class="Statement">return</span> m_response.ResponseUri; }<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">override</span> WebHeaderCollection Headers<br />    {<br /> <span class="Statement">get </span>{ <span class="Statement">return</span> m_response.Headers; }<br />    }<br /><br /> <span class="Type">public</span> <span class="Type">override</span> System.IO.Stream GetResponseStream()<br />    {<br />        Stream compressedStream = <span class="Constant">null</span>;<br /><br /> <span class="Statement">if</span> (m_response.ContentEncoding == <span class="Constant">"gzip"</span>)<br />            compressedStream = <span class="Statement">new</span> GZipInputStream(<br /> <span class="Type"></span>m_response.GetResponseStream());<br /> <span class="Statement">else</span> <span class="Statement">if</span> (m_response.ContentEncoding == <span class="Constant">"deflate"</span>)<br />            compressedStream = <span class="Statement">new</span> InflaterInputStream(<br /> <span class="Type"></span>m_response.GetResponseStream());<br /><br /> <span class="Statement">if</span> (compressedStream != <span class="Constant">null</span>)<br />        {<br />            m_decompressedStream = <span class="Statement">new</span> MemoryStream();<br /> <span class="Type">int</span> size = <span class="Constant">4096</span>;<br /> <span class="Type">byte</span>[] buffer = <span class="Statement">new</span> <span class="Type">byte</span>[size];<br /> <span class="Statement">while</span> (<span class="Constant">true</span>)<br />            {<br />                size = compressedStream.Read(<br /> <span class="Type"></span>buffer, <span class="Constant">0</span>, size);<br /><br /> <span class="Statement">if</span> (size > <span class="Constant">0</span>)<br />                    m_decompressedStream.Write(<br /> <span class="Type"></span>buffer, <span class="Constant">0</span>, size);<br /> <span class="Statement">else</span><br /> <span class="Statement">break</span>;<br />            }<br /><br />            m_decompressedStream.Seek(<span class="Constant">0</span>, SeekOrigin.Begin);<br />            compressedStream.Close();<br /> <span class="Statement">return</span> m_decompressedStream;<br />        }<br /> <span class="Statement">else </span><span class="Statement">return</span> m_response.GetResponseStream();<br />    }<br />}</pre><br />To decompress the data, we need a decompression library since .Net 1.1 doesn't provide one. In most cases, <a href="http://www.icsharpcode.net/OpenSource/SharpZipLib/">SharpZipLib</a> will do the business:<br /><pre><span class="Statement">using</span> ICSharpCode.SharpZipLib.GZip;<br /><span class="Statement">using</span> ICSharpCode.SharpZipLib.Zip.Compression.Streams;</pre><br />Now, when creating an instance of BFGlobalService you can use the gzip-supporting subclass and everything else happens automatically.<br /><pre>BFGlobalService service = <span class="Statement">new</span> BFGlobalServiceWithGzip();</pre><br /><em><strong>Fin</strong></em><br /><br />Jebus, that went on for a bit. Now, go forth and write high-performance clients at will - but heed the warnings about only doing this when you know the server is on-the-ball, because these tips really can cause havoc if used irresponsibly.]]></content:encoded>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">.Net</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/turbocharging-net-webservice-clients.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>71</wp:comment_id>
        <wp:comment_author>Joann everman</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-24 19:00:54</wp:comment_date>
        <wp:comment_date_gmt>2008-02-24 19:00:54</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi,<br /><br />Excellent tips. Thank you for this.<br />I wonder why Web Services are selected to implemented such a high performance solution. Twitter has the same problem with the REST based API and thus they provide an XMPP backend for high polling applications.<br /><br />Joann.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>72</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-02-24 19:48:17</wp:comment_date>
        <wp:comment_date_gmt>2008-02-24 19:48:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hi Joann, thanks for the comment. Hope the tips come in useful!<br /><br />It is an interesting point about the use of web services for such a high performance application. However, I happen to know that XML serialisation/deserialisation is the largest bottleneck in the system from Betfair&#39;s perspective, so I&#39;m not sure XMPP would help much. <br /><br />For pure performance, a custom binary protocol would be superior, but then you have the additional burden of writing and maintaining the protocol, and can run into all sorts of interesting problems with byte ordering and encoding across different platforms and processor architectures. Interoperability is the trump card here.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>157</wp:comment_id>
        <wp:comment_author>David</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-05-19 20:56:11</wp:comment_date>
        <wp:comment_date_gmt>2008-05-19 20:56:11</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Everything works great except when the web service throws an Exception the client receives &quot;The remote server returned an error: (500) Internal Server Error.&quot;  With decompression turned off the client receives our normal customized application exceptions and we can trap them appropriately.  Is there something else we need to implement when overriding WebResponse so the client receives our custom exceptions?  The 500 error is thrown at request.GetResponse() in the HttpWebResponseDecompressed constructor.<br /><br />Great article btw.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>159</wp:comment_id>
        <wp:comment_author>John Wiess</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-06-03 23:22:04</wp:comment_date>
        <wp:comment_date_gmt>2008-06-03 23:22:04</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hello,<br /><br />A very informative, and enjoyable read, and although I understand the  articles aims,I cannot figure where to actually put the code that ups the maxconnection, I have tried pasting the following code into an app.config file as per your instructions with no luck. is there anything else i need to do?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>167</wp:comment_id>
        <wp:comment_author>feed</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://feedthenetwork.com</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-11 07:16:06</wp:comment_date>
        <wp:comment_date_gmt>2008-08-11 07:16:06</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Easy and simple information to follow. Great share, thanks]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>172</wp:comment_id>
        <wp:comment_author>Glyn</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-08-29 22:42:08</wp:comment_date>
        <wp:comment_date_gmt>2008-08-29 22:42:08</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Hmmm, looks like tags in the xml request haven&#39;t posted correctly (not surprisingly), but please take my work for it that the body of the request and the response is not encoded.<br />Cheers,<br />Glyn.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>174</wp:comment_id>
        <wp:comment_author>elmariachi</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-09-11 09:24:15</wp:comment_date>
        <wp:comment_date_gmt>2008-09-11 09:24:15</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[its seems that in .NET 3.5 the lines:<br /><br />BFGlobalService service = new BFGlobalService();<br />service.EnableDecompression = true;<br /><br />dont work, since there is no EnableDecompression Property anymore.<br />Im using the VS2008.<br /><br />What would be the proper way todo this in .NET 3.5]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>175</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-09-11 17:22:27</wp:comment_date>
        <wp:comment_date_gmt>2008-09-11 17:22:27</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Glyn,<br /><br />I&#39;m actually not sure what&#39;s going on there - the same thing is now happening to me, but I can&#39;t figure out why. I think it&#39;s something at Betfair&#39;s end - if I use the little python lib I cooked up, and switch on detailed tracing, I see this (headers only):<br /><br />POST /global/v3/BFGlobalService HTTP/1.1<br />Host: api.betfair.com:443<br />Content-Length: 960<br />SOAPAction: urn:getEvents<br />Content-Type: text/xml<br />Accept-Encoding: gzip<br />User-Agent: pybetfair/0.4alpha<br /><br />HTTP/1.1 200 OK<br />header: Server: Apache-Coyote/1.1<br />header: Date: Thu, 11 Sep 2008 16:12:56 GMT<br />header: Server: TME-GLUE/5.0.2<br />header: Content-Type: text/xml;charset=UTF-8<br />header: ntCoent-Length: 19715<br />header: Cache-Control: private<br />header: Content-Encoding: gzip<br />header: Content-Length:       1498<br /><br />So Betfair&#39;s servers definitely have compression switched on. It looks like it&#39;s doing something weird with the headers (the jumbled ntCoent-Length header contains the uncompressed size of the response), but the data is undoubtedly compressed, and correctly represented in the Content-Length header. Weird. I&#39;ll see if I can find out what&#39;s going on.<br /><br />BTW, when using gzip, I believe only the response is compressed, not the request.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>176</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-09-11 17:27:09</wp:comment_date>
        <wp:comment_date_gmt>2008-09-11 17:27:09</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[elmariachi,<br /><br />The new .Net 3.5 Add Service wizard (using WCF) seems to have gone out of its way to make this difficult. When I use 3.5, I always create 2.0-style web references. There are two ways to do this:<br /><br />1) Use wsdl.exe directly (e.g. from the command line or a build script<br /><br />2) In VS2008, in the Add Service Reference dialog, click Advanced... (bottom left corner), then click Add Web Reference... in the Service Reference Settings dialog that pops up. You should then be able to use EnableDecompression as usual.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>194</wp:comment_id>
        <wp:comment_author>Depois eu leio » Parallel, F# e no fim, de volta ao básico</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://depoiseuleio.com/2009/04/14/parallel-f-e-no-fim-de-volta-ao-bsico/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2009-04-15 19:56:38</wp:comment_date>
        <wp:comment_date_gmt>2009-04-15 19:56:38</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[[...] de perder um tempo no MSDN, o Google me fez parar neste e neste post. Ambos têm a resposta que eu procurava, mas no primeiro ainda têm uma mega aula de debug e o [...]]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>218</wp:comment_id>
        <wp:comment_author>Madan</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-06-19 06:58:54</wp:comment_date>
        <wp:comment_date_gmt>2010-06-19 06:58:54</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Excellent tips]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>219</wp:comment_id>
        <wp:comment_author>TheBotanist</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2010-06-28 11:54:06</wp:comment_date>
        <wp:comment_date_gmt>2010-06-28 11:54:06</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[i have been caught out by this, my thread pool (10 threads) has been beavering away placing bets, on the surface it looks ok. The reality is only 2 threads have ever been calling the api concurrently. <br /><br />This was highlighted when I was making lots of bets on an in play match - the 5 second delay highlighted the fact that calls were being serialized ie they were backing up. As a result I got timout exceptions which caused me to research and ended up here.. I will implement all these suggestions - these are excellent easy wins for a performace boost coding againt the betfair API.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>242</wp:comment_id>
        <wp:comment_author>Storm</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2011-03-21 21:25:48</wp:comment_date>
        <wp:comment_date_gmt>2011-03-21 21:25:48</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Thanks for this. It boosted my call rate from 3 per second to 40 per second, however I cannot get past 40 per second. Even if I open a new instance of my app the calls per second equals around 20 per app, so I still have the max of 40 per second. Any thoughts or is that about as much as I could expect?<br /><br />Thanks again for the great info.]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Legacy Code, Refactoring, and Ownership</title>
      <link>http://blog.basildoncoder.com/2007/12/legacy-code-refactoring-and-ownership.html</link>
      <pubDate>Thu, 13 Dec 2007 17:26:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>39</wp:post_id>
      <wp:post_date>2007-12-13 17:26:00</wp:post_date>
      <wp:post_date_gmt>2007-12-13 17:26:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Legacy-Code,-Refactoring,-and-Ownership</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Refactoring is good. Everyone knows that. Since Fowler popularised the concept with the seminal <a href="http://www.amazon.co.uk/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/"><em>Refactoring: Improving the Design of Existing Code</em></a> it's become a staple of the industry, and has pride of place on many a bookshelf. In the many, many articles and discussions of the subject, the key goals and benefits of refactoring are generally taken to be the improvement of readability, testability, decoupling, and other similar worthy ideals. For me, however, there is another very distinct benefit, often overlooked. Fowler touches upon it, but doesn't really develop it, early on in <em>Refactoring</em>:<br /><blockquote><br /><p align="left">I use refactoring to help me understand unfamiliar code. When I look at unfamiliar code, I have to try to understand what it does. I look at a couple of lines and say to myself, oh yes, that's what this bit of code is doing. With refactoring I don't stop at the mental note. I actually change the code to better reflect my understanding, and then I test that understanding by rerunning the code to see if it still works.</p><br /><p align="right">(Fowler, <em>Refactoring</em>, 1999)</p><br /></blockquote><br />By investigating a piece of code thoroughly enough to understand how it works, refactoring it to map directly on to your understanding, and reinforcing everything with good unit tests, you take <em>ownership</em> of the code. It's yours now.<br /><br />This is very important, psychologically. Almost every developer feels more at home with their own code than somebody else's. That's why you feel uncomfortable and deflated when, 20 minutes into deciphering a nasty bit of opaque gibberish, you realise it was something you yourself wrote a year earlier and subsequently forgot about.<br /><br />When you refactor, you rewrite code to a greater or lesser extent. Having done so, the resulting feeling of ownership (alongside increased understanding, of course) makes the code much less scary. The benefit of this is less marked in agile methodologies or TDD, of course, since in those cases quite often the code you are refactoring was written by you anyway. Working with legacy code, though, it's a big deal.<br /><br />In the preface to <a href="http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052/"><em>Working Effectively With Legacy Code</em></a>, Feathers asks "what do you think about when you hear the term <em>legacy code</em>?" (Feathers, 2004). He answers by stating that the standard definition is "difficult-to-change code that we don't understand" and adds his own preferred definition which is, in essence, "code without tests".<br /><br />My own definition of legacy code would include, in many cases, code that <em>isn't mine</em>. By 'mine' I don't exclusively mean code I wrote personally; I also mean code written by my team, or even code written by people who sit a couple of desks down who I can go and pester about it (which is stretching the definition a bit, admittedly).<br /><br />In short, legacy code for me is code that no longer has any accessible owner. Like a stray cat or dog, code without an owner goes feral. Refactoring is the process of taming feral code, but as with stray cats much of the benefit comes from re-homing. This is a vital process, even if a fairly unconscious one. When you first come face to face with some hideous 5000-line spaghetti monster of a function your heart sinks - how can anyone ever hope to understand that, let alone modify it safely? Especially if the only people that ever worked with it left the company 3 years ago?<br /><br />Refactoring allows you to split this code up, create classes to better represent the problem domain, improve abstraction, add tests, and all that other good stuff; at the same time, the process of doing so makes the code yours. You make the decisions about the classes to create and the abstractions to introduce. You write the tests that ferret out all the little idiosyncrasies, and uncover the unwritten assumptions. By the end of the process, the code feels like yours. And that means that the next time you have to make a change there, you benefit from the double whammy of code that is not only well-written and tested, but recognisably <em>yours</em>; and that's the kind of code that you won't mind working with.]]></content:encoded>
      <category domain="tag">Refactoring</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/legacy-code-refactoring-and-ownership.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>46</wp:comment_id>
        <wp:comment_author>Tony Morris</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://tmorris.net/</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2007-12-13 22:42:13</wp:comment_date>
        <wp:comment_date_gmt>2007-12-13 22:42:13</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[> Refactoring is good. Everyone knows that.<br /><br />This is called an argumentum ad populum logical fallacy. Logical fallacies are very prolific in hyperbolic material such that which purports refactoring as anything but a perversion of science.<br /><br />There exists one person who doesn&#39;t &quot;know that Refactoring is good&quot; and actively refutes the truth value of this statement (it is so false that the inverse is true). I wrote an article titled Refunctoring quite some time ago; I&#39;ll happily support my position with evidence and reason upon request.<br /><br />I bring this to your attention so as not to continue the proliferation of mythology and mislead potentially innocent bystanders into a similar state of delusion.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>47</wp:comment_id>
        <wp:comment_author>JS</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2007-12-14 07:05:41</wp:comment_date>
        <wp:comment_date_gmt>2007-12-14 07:05:41</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[After all, &#39;terrible code&#39; is by definition any software code you yourself didn&#39;t write.  Right?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>48</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2007-12-15 21:28:02</wp:comment_date>
        <wp:comment_date_gmt>2007-12-15 21:28:02</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;I bring this to your attention so as not to continue the proliferation of mythology and mislead potentially innocent bystanders into a similar state of delusion.&quot;<br /><br />The phrase &quot;everyone knows that&quot; was intended to be slightly tongue-in-cheek, which I had hoped would be picked up by being unnecessarily sweeping and all-encompassing. Generally speaking I think it&#39;s a good thing, but I also think Steve Yegge hit the nail on the head when he said that refactoring had become the <a href="http://steve.yegge.googlepages.com/transformation" rel="nofollow">goal rather than the cure</a>.<br /><br />I read your <a href="http://blog.tmorris.net/refunctoring/" rel="nofollow">Refunctoring</a> article and largely agree with it; I code C# for a living and often find myself edging towards a functional style for certain problems. However, I think you&#39;re a bit strident; not all refactoring is simply a progression towards using map, foldr, and filter; similarly, I think you&#39;re overly harsh on Java and C#. C# at least is moving in interesting directions - LINQ is providing something very similar to (if more verbose than) Haskell&#39;s list comprehensions, and also now supports lambdas and a form of type inference. Whilst it&#39;s never going to be as much fun writing C# as it is to write Haskell or Ruby (which are my preferred languages outside the office, along with Ocaml), it&#39;s encouraging that such a mainstream language is starting to &quot;get it&quot;. <br /><br />I hold my hand up and concede that my phrasing didn&#39;t really communicate any of this. Sorry. I&#39;m just getting used to blogging and realise I need to be careful about how people interpret my writing.]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>49</wp:comment_id>
        <wp:comment_author>russ</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2007-12-15 21:43:07</wp:comment_date>
        <wp:comment_date_gmt>2007-12-15 21:43:07</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[&quot;After all, ‘terrible code' is by definition any software code you yourself didn't write. Right?&quot;<br /><br />Oh give it a rest, that&#39;s not what I said. Why have you put &#39;terrible code&#39; in quote marks as if you&#39;re quoting me, when that phrase appears nowhere in the article? In fact, the whole point of the post is that there are benefits to refactoring beyond simply trying to improve code. You understood that, though. Right?]]></wp:comment_content>
        </wp:comment>
      <wp:comment>
        <wp:comment_id>86</wp:comment_id>
        <wp:comment_author>CD</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url />
        <wp:comment_author_IP />
        <wp:comment_date>2008-03-23 11:25:17</wp:comment_date>
        <wp:comment_date_gmt>2008-03-23 11:25:17</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[Refactoring isn&#39;t a pain in the boss?<br />i&#39;ve  refactored terrible code from prolog to msx basic, then to msx basic II turbo, then to quick basic and to pascal.<br />I think i have enough bacground to discuss refactoring with my boss who actually fired me for trying to explain him what refactoring means.<br />Now i am a jobless .net programmer. wanna work with me? i take some time to refactor. when you work on legacy code your own brain refactors.!]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Coding by Convention</title>
      <link>http://blog.basildoncoder.com/2007/12/coding-by-convention.html</link>
      <pubDate>Sun, 09 Dec 2007 20:00:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>40</wp:post_id>
      <wp:post_date>2007-12-09 20:00:00</wp:post_date>
      <wp:post_date_gmt>2007-12-09 20:00:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Coding-by-Convention</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I've been meaning for a while to  have a play around with <a href="http://www.rubyonrails.org/">Ruby on Rails</a>, on the basis that anything generating so much hype over the last year or two deserves some level of investigation, if only to see whether the hype is justified. So, I spent a couple of days working through <a href="http://www.amazon.co.uk/Agile-Development-Rails-Pragmatic-Programmers/dp/0977616630/"><em>Agile Web Development with Rails</em></a> and, well, it's pretty nice. I can certainly appreciate a development environment that goes to such endearing effort to do work for you without getting in the way - a fairly tricky balancing act. I came to the book with a working knowledge of Ruby but zero practical exposure to Rails, and on top of that I'm not a web developer so could not bring much contextual experience to the table. Despite this, I worked through the book and ended up with a functional book-store application in about 15 hours. Not too shabby.<br /><br />So how does Rails achieve such power and productivity? The answer is largely that Rails, more so than pretty much any other development environment I've used, leverages the power of convention. That is, if you stay 'on rails' and behave the way Rails wants you to, then in return you get a great deal of functionality for free. A kind of technological "you scratch my back, and I'll scratch yours". If you structure your application as Rails expects, then Rails will automatically hook everything up for you. If you name your database tables as Rails wants you to, and create the primary/foreign key id columns that Rails expects, then Rails will take care of all your object-relational-mapping needs for you. Sounds like a good deal, yes?<br /><br />Rails doesn't expect you to jump through all these hoops yourself though. It provides a number of useful scripts that you can use to perform the common tasks you want to do, in the way that Rails wants you to do them. Probably the best example of this is when you first start a new project. You ask Rails to create an application for you, with the name you specify, then off it goes - and creates 45 files in 37 directories, without you having to lift a finger.<br /><pre>$ rails dummy<br />      create<br />      create  app/controllers<br />      ...<br /> <snip><br />      ...<br />      create  log/development.log<br />      create  log/test.log<br />$ find dummy/ -type f |wc -l<br />45<br />$ find dummy/ -type d |wc -l<br />37</snip></pre><br />Compare this to a newborn ASP.Net application created using the Web Site wizard in Visual Studio 2005:<br /><pre>$ find WebSite1/ -type f |wc -l<br />2<br />$ find WebSite1/ -type d |wc -l<br />2</pre><br />A pretty substantial difference. And if you stay within the confines of Rails' expectations when adding to the project - which is very easy to do since you are provided with more generators for creating models, controllers, and migrations (basically incremental DB deployment scripts) - then you end up with a nicely structured application in accordance with the hallowed principles of MVC design, and everything is glued together automatically. Create a new data model, and your controller is immediately able to load it from the database along with all its relational buddies in a nice aggregated object structure with just one line of code (as long as you remembered to add all the has_many and belongs_to calls, of course). Store that data object in a controller member variable, and your views can access it for display. Use one of the magical rake incantations and get a DB-backed session management system which will horizontally scale in a load-balanced environment. Run the script/console script and you are dropped into a fully interactive command-line environment similar to irb, where you can instantiate and interact with all your objects dynamically. Tail the development log and you can see all the generated SQL as it is executed, and even get indicated performance in terms of theoretical request-per-second capacity. It's all just fab. Nothing spectacularly new, of course; each individual feature has been done before, but Rails pulls them all together very nicely indeed.<br /><br />As I worked through the aforementioned book, however, it was very clear that without the guiding instruction of the esteemed Dave Thomas and DHH I'd be up the creek without a paddle, and that got me thinking. Programming by convention is all great and frictionless and wonderful <em>as long as you know the conventions</em>. Imagine, if you will, the sheer blank incomprehension of a maintenance programmer who's never heard of Rails, sitting down to tweak a Rails application.<br /><br />Wait, what? How can this happen? Surely everyone has heard of Rails by now? Nope, sorry, but the truth is that the <a href="http://www.codinghorror.com/blog/archives/001002.html">majority of programmers</a> are clock-punchers living in a single-language world who don't read blogs, or play around with tech in their own time, and haven't even heard of Linux, let alone Rails. Their single language will likely be an everyday static language like Java or C#, which will leave them ill-prepared for many of the dynamic tricks in idiomatic Ruby.<br /><br />Ah, but surely the kind of forward-thinking proto-company that builds its product on RoR would never hire non-Ruby-savvy developers anyway? That might be the case if you drink the <a href="http://www.37signals.com/">37signals</a> Kool-Aid and think that any RoR company is by default über-smart and infallible, but in the real world it doesn't work like that; there are countless tiny non-technical companies out there with just one or two developers - I know, because I spent a few years working at one - and maybe their current developers are cool enough to use RoR, but when they inevitably leave and the tech-illiterate management hire a replacement, you can guarantee that the job spec will not include minor details like "must have at least heard of Ruby on Rails".<br /><br />So, our imaginary maintenance guy - let's call him Ted - hired by a non-technical company to look after a web application, peers for the first time into the 37 directories (assuming no new ones have been added) and >45 files (since new ones will most certainly have been added), and nothing makes any sense. Even assuming Ted is smart enough to make reasonable guesses about Ruby syntax, and knows what MVC is, there's no visible link between the different layers of the application. It isn't clear how data is shuttled to and from the database. It isn't clear why things don't always work as expected when Ted tries to manually add new things, rather than using the Rails scripts (which he doesn't know about), even when diligently trying to emulate the structure and layout of existing code. It all seems like sorcery. What is Ted to do?<br /><br />The correct answer is to go and by a Rails book of course, or at least try and pick out the decent tutorials on the web (unfortunately, there's a lot more chaff than wheat in this area, maybe a sign that Rails is becoming a bit more mainstream?). A few days of getting up-to-speed, and Ted achieves enlightenment and becomes mega-productive, and lives happily ever after. So coding by convention is a good thing, right?<br /><br />Maybe.<br /><br />I'm still uneasy about sorcery, and Rails is some of the most effective sorcery I've seen. The main problem is that, well, it's sorcery. A couple of times in the 15 hours I spent going through <a href="http://www.amazon.co.uk/Agile-Development-Rails-Pragmatic-Programmers/dp/0977616630/"><em>Agile Web Development with Rails</em></a> I hit problems. Not major ones, and always of my own making - some silly typo, or mistake coming from only having a working knowledge of Ruby rather than cosy familiarity. As is my wont, failure to spot the error after a cursory glance through the code led to a quick google search to see if I've hit a common problem, before resigning myself to going through the code in detail to sort it out (like all good programmers I'm a lazy devil).<br /><br />On these periodic google jaunts I found lots and lots of forum posts and blog entries from people who, and let's not mince words here, hadn't the first clue what they were doing. People that had heard the Rails hype, bought the book (and probably the t-shirt), hit problems, and were now running around like a cargo cult expecting magic spells to solve all their problems. Restart WEBrick. rake db:sessions:clear. Roll the most recent migration back then forward again. None of these work? Sorry, can't help. It reminds me of <a href="http://en.wikipedia.org/wiki/The_IT_Crowd">The IT Crowd</a>'s "have you tried turning it off and on again?".<br /><br />I shouldn't be harsh on these folks; at least they're getting excited by Rails and are rolling up their sleeves and having a go, and no doubt some of them will succeed wildly and become far better, richer, more attractive programmers than I can ever hope to be. Also let me be clear that I think the productivity gains of software like Rails is a good thing, and Rails is certain to account for a good chunk of my tinkering time for the next few months. It worries me, however, when people try to run before they can walk, and the magic of coding by convention tends to encourage it.<br /><br />I'll leave it as an exercise for the reader to consider the implications of the fact that the sample application being conjured here by all these sorcerers' apprentices is an e-commerce site, at a time when online fraud is <a href="http://news.bbc.co.uk/1/hi/business/6298641.stm">skyrocketing</a>.<br /><br />I don't mean to single out Ruby on Rails specifically, by the way, it's just handy as an example due to its profile. Coding by convention is not new; if you want an older example of what happens when people are given programming tools that allow them to get something working - for fairly loose definitions of 'working' - without knowing much about what's happening under the hood, then look at the atrocities committed with VB and databinding over the years.<br /><br />Steve Yegge has a characteristically long and insightful <a href="http://steve.yegge.googlepages.com/practical-magic">rant</a> on this subject, and is troubled by the difficulty of working out where to draw the line. The line, in this case, being the level of abstraction at which a programmer should understand a system - high enough not to be bogged down in insane detail (e.g. knowing how semiconductors work) but not so high that the role of programmer is reduced to that of sideshow conjurer, waving a cheap trick-shop wand and trusting to a higher power that everything will work out OK.<br /><br />Maybe it's just a generational disease. Maybe in ten years' time all the apprentices who have graduated to fully-fledged sorcerers will be looking on in dismay at the young scamps creating Web 5.0 applications using Ruby on MagLev simply by burping commands into their Skype headsets, and writing cautionary blogs about the dangers of not knowing how to write a partial web template.<br /><br />Theoretically, a perfect system - perhaps a descendant of Rails in the dim and distant future - would contain such exquisitely crafted assumptions and such frictionless conventions that it would never go wrong and always do the right thing. Thus, the need to understand anything at the lower level of abstraction required to sort out any problems is obviated, unless you are one of the very few Grand High Wizards who keep everything running smoothly. I don't know whether it's fortunate or unfortunate that such a system is unlikely to appear within my lifetime.]]></content:encoded>
      <category domain="tag">Ruby</category>
      <category domain="tag">Patterns</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/coding-by-convention.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      <wp:comment>
        <wp:comment_id>259</wp:comment_id>
        <wp:comment_author>Ross</wp:comment_author>
        <wp:comment_author_email>noreply@blogger.com</wp:comment_author_email>
        <wp:comment_author_url>http://www.blogger.com/profile/12320656484763920117</wp:comment_author_url>
        <wp:comment_author_IP />
        <wp:comment_date>2012-12-26 18:41:52</wp:comment_date>
        <wp:comment_date_gmt>2012-12-26 18:41:52</wp:comment_date_gmt>
        <wp:comment_approved>1</wp:comment_approved>
        <wp:comment_type />
        <wp:comment_parent>0</wp:comment_parent>
        <wp:user_id />
        <wp:comment_content><![CDATA[I think the article you wrote 5 years ago is still very relevant.  I am new to Ruby on Rails and have been trying to learn this on my own searching for best resources.  So many times I have been sure that I have followed along exactly with the instructions only to be thwarted with an error that I do not understand nor how to resolve it.  I have made some of them go away for stopping and restarting the server and while that sometimes works it doesn&#39;t always  and then I am off to search on Stack Overflow through a maze of confusing questions and answers that still leave me not really understanding.  Time now to get back to my sorcery and hope someday that I will truly understand the magic of Rails.  ]]></wp:comment_content>
        </wp:comment>
      </item>
    <item>
      <title>Reindenting a File in Vim</title>
      <link>http://blog.basildoncoder.com/2007/12/reindenting-file-in-vim.html</link>
      <pubDate>Fri, 07 Dec 2007 18:19:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>41</wp:post_id>
      <wp:post_date>2007-12-07 18:19:00</wp:post_date>
      <wp:post_date_gmt>2007-12-07 18:19:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Reindenting-a-File-in-Vim</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[I'm going to post a series of helpful Vim snippets here, particularly for features that I don't necessarily use every day and hence forget about after a while. By posting them here, I've got a nice easy one-stop-shop for finding them.<br /><br />The first tip is reindenting source code. Hitting '<code>=</code>' will reindent visually-selected code , or you can also use a motion to constrain the affected area. '<code>gg=G</code>' will reindent the entire file:<br /><pre><br /><span class="Statement">using</span> System;<br /><br /><span class="Type">namespace</span> IndentExample<br />{<br /><span class="Type">public</span> <span class="Type">class</span> Indent<br />{<br /><span class="Type">public</span> <span class="Type">static</span> <span class="Type">void</span> Main(<span class="Type">string</span>[] args)<br />{<br />Console.WriteLine(<span class="Constant">&quot;badgerbadgerbadger&quot;</span>);<br />}<br />}<br />}<br /></pre><br />to<br /><pre><br /><span class="Statement">using</span> System;<br /><br /><span class="Type">namespace</span> IndentExample<br />{<br /> <span class="Type">public</span> <span class="Type">class</span> Indent<br />    {<br /> <span class="Type">public</span> <span class="Type">static</span> <span class="Type">void</span> Main(<span class="Type">string</span>[] args)<br />        {<br />            Console.WriteLine(<span class="Constant">&quot;badgerbadgerbadger&quot;</span>);<br />        }<br />    }<br />}<br /></pre><br />More info: <a href="http://www.vim.org/tips/tip.php?tip_id=83">http://www.vim.org/tips/tip.php?tip_id=83</a>]]></content:encoded>
      <category domain="tag">Vim</category>
      <category domain="tag">Software Engineering</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/reindenting-file-in-vim.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Technical Book Club</title>
      <link>http://blog.basildoncoder.com/2007/12/technical-book-club.html</link>
      <pubDate>Wed, 05 Dec 2007 18:27:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>42</wp:post_id>
      <wp:post_date>2007-12-05 18:27:00</wp:post_date>
      <wp:post_date_gmt>2007-12-05 18:27:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Technical-Book-Club</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Back in October, personal finance blogger Trent at <a href="http://www.thesimpledollar.com/" title="The Simple Dollar">The Simple Dollar</a> started an <a href="http://www.thesimpledollar.com/2007/10/30/your-money-or-your-life-final-reflections/" title="Your Money Or Your Life Book Club">online book club</a> for one of his favourite finance books. Good idea, I thought, so I'm nicking it. Starting in January, I'm running a technical book club at work with a few .Net devs, and I'll write everything up and post it here, so if you're so inclined you can follow along at home.<br /><br />To start with, we'll be reading language-agnostic books covering the fundamentals of software development in the real world, since it's always valuable to refresh knowledge on the cornerstones of modern professional coding; later on this can diversify into specific technologies and subjects with more arcane, academic, or abstract overtones. Another benefit of starting with the basics is that we can concentrate on getting the format right without feeling overwhelmed by unfamiliar material.<br /><br />So, the initial batch of texts will cover object-oriented design, design patterns, refactoring, code quality, and so on. Later, the idea is to study less immediate (but still vital) subjects like functional programming, compiler design, operating systems, etc.; and also to gain deeper knowledge of common specific technologies, e.g. the inner workings of the <a href="http://en.wikipedia.org/wiki/Common_Language_Runtime" title="Common Language Runtime">CLR</a> or a <a href="http://en.wikipedia.org/wiki/Jvm" title="Java Virtual Machine">JVM</a>. I suspect people like <a href="http://steve-yegge.blogspot.com/" title="Drunken Blog Rants">stevey</a> will <a href="http://steve.yegge.googlepages.com/blog-rants" title="Drunken Blog Rants 2004/5">argue</a> that these latter subjects are more important than the others and should be done first, and they might even be right, but I've picked my approach and I'm sticking with it, so nuts to you stevey.<br /><br />So, here's the early schedule and probable books. The order we do these books might change - in fact the books themselves might change if, for example, we decide that Fowler's <a href="http://www.amazon.co.uk/Enterprise-Application-Architecture-Addison-Wesley-Signature/dp/0321127420/ref=pd_sim_b_njs_title_4"><em>Enterprise Patterns</em></a> is more appropriate than the GoF's <a href="http://www.amazon.co.uk/Design-patterns-elements-reusable-object-oriented/dp/0201633612/ref=pd_sim_b_njs_title_1"><em>Design Patterns</em></a>. Each book will be agreed for certain in good time for it to be ordered and delivered before the scheduled start date, obviously.<br /><table border="0" cellpadding="3" cellspacing="0"><br /><tr><br /><td><strong><em>Topic</em></strong></td><br /><td><strong><em>Book </em></strong></td><br /><td><strong><em>Start Date</em></strong></td><br /></tr><br /><tr><br /><td><strong><em>OO Design</em></strong></td><br /><td><em><a href="http://www.amazon.co.uk/Oriented-Analysis-Applications-Addison-Wesley-Technology/dp/020189551X/ref=ed_oe_h"><br />Object-Oriented Analysis and Design with Applications</a></em></td><br /><td>14/01/2008</td><br /></tr><br /><tr><br /><td><strong><em>Design Patterns</em></strong></td><br /><td><em><a href="http://www.amazon.co.uk/Design-patterns-elements-reusable-object-oriented/dp/0201633612/ref=pd_sim_b_njs_title_1"><br />Design Patterns: Elements of Reusable Object-Oriented Software</a></em></td><br /><td>03/03/2008</td><br /></tr><br /><tr><br /><td><strong><em>Refactoring</em></strong></td><br /><td><em><a href="http://www.amazon.co.uk/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/ref=pd_bxgy_b_text_b"><br />Refactoring: Improving the Design of Existing Code</a></em></td><br /><td>05/05/2008</td><br /></tr><br /><tr><br /><td><strong><em>Code Quality</em></strong></td><br /><td><em><a href="http://www.amazon.co.uk/Pragmatic-Programmer-Andrew-Hunt/dp/020161622X/ref=cm_lmf_tit_3_rlrsrs2">Pragmatic Programmer</a></em></td><br /><td>07/07/2008</td><br /></tr><br /><tr><br /><td><strong><em>Legacy Code</em></strong></td><br /><td><em><a href="http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1196701867&amp;sr=1-1">Working Effectively With Legacy Code</a></em></td><br /><td>01/09/2008</td><br /></tr><br /></table><br />In addition to these, we'll also cover one chapter of <em><a href="http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1196701436&amp;sr=1-1">Code Complete</a></em> per week. So, there it is. If you want to tag along, get yourself a copy of Booch's <em><a href="http://www.amazon.co.uk/Oriented-Analysis-Applications-Addison-Wesley-Technology/dp/020189551X/ref=ed_oe_h">Object-Oriented Analysis and Design with Applications</a></em> and McConnell's seminal <em><a href="http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1196701436&amp;sr=1-1">Code Complete</a></em>, and tune in next month.]]></content:encoded>
      <category domain="tag">Patterns</category>
      <category domain="tag">Software Engineering</category>
      <category domain="tag">Coding</category>
      <category domain="tag">Book Club</category>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/technical-book-club.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>Hello World</title>
      <link>http://blog.basildoncoder.com/2007/12/hello-world.html</link>
      <pubDate>Wed, 05 Dec 2007 11:37:00 +0000</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>43</wp:post_id>
      <wp:post_date>2007-12-05 11:37:00</wp:post_date>
      <wp:post_date_gmt>2007-12-05 11:37:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>Hello-World</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>post</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[Woohoo, frist psot. This is my whole-sort-of-general-mishmash blog, in which I will be irregularly posting coding insights, recording handy bits of obscure info I want to be able to easily find in the future, writing the odd essay, musing on literature and mathematics (and occasionally considering how they are linked to programming), riffing on other blog posts, bemoaning the sorry state of the film industry, raving about how great films are, and generally whatever the hell else I feel like doing.]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_blog</wp:meta_key>
        <wp:meta_value>blog.basildoncoder.com</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_permalink</wp:meta_key>
        <wp:meta_value>/2007/12/hello-world.html</wp:meta_value>
        </wp:postmeta>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>About</title>
      <link>http://www.blogger.com/</link>
      <pubDate>Mon, 03 Oct 2011 10:09:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>44</wp:post_id>
      <wp:post_date>2011-10-03 10:09:00</wp:post_date>
      <wp:post_date_gmt>2011-10-03 10:09:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>About</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>page</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[[linkedinsc profile="russgray" lang="en"]<br /><h2 style="text-align: center;">[linkedinsc_headline]</h2><br /><h3>Experiences</h3><br />[linkedinsc_positions]<br /><div style="float: left; width: 150px;">[linkedinsc_position_start_date] - [linkedinsc_position_end_date]</div><br /><div style="margin-left: 150px;"><br /><b>[linkedinsc_position_title]</b>, [linkedinsc_position_company_name]<br /><em>[linkedinsc_position_company_industry]</em><br />[linkedinsc_position_summary]<br /><br /></div><br />[/linkedinsc_positions]<br /><h3>Education</h3><br />[linkedinsc_educations]<br /><div style="float: left; width: 150px;">[linkedinsc_education_start_date] - [linkedinsc_education_end_date]</div><br /><div style="margin-left: 150px;"><br /><b>[linkedinsc_education_school_name]</b><br /><em>[linkedinsc_education_degree] in [linkedinsc_education_field_of_study]</em><br />[linkedinsc_education_notes]<br /><br /></div><br />[/linkedinsc_educations]<br /><br /><br />[/linkedinsc]]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    <item>
      <title>About</title>
      <link>http://www.blogger.com/</link>
      <pubDate>Mon, 11 Jul 2011 11:27:00 +0100</pubDate>
      <dc:creator>Russ Gray</dc:creator>
      <guid isPermaLink="false" />
      <description />
      <wp:post_id>45</wp:post_id>
      <wp:post_date>2011-07-11 11:27:00</wp:post_date>
      <wp:post_date_gmt>2011-07-11 11:27:00</wp:post_date_gmt>
      <wp:comment_status>open</wp:comment_status>
      <wp:ping_status>open</wp:ping_status>
      <wp:post_name>About</wp:post_name>
      <wp:status>publish</wp:status>
      <wp:post_parent>0</wp:post_parent>
      <wp:menu_order>0</wp:menu_order>
      <wp:post_type>page</wp:post_type>
      <wp:post_password />
      <content:encoded><![CDATA[[linkedinsc profile="russgray" lang="en"]<br /><h2 style="text-align: center;">[linkedinsc_headline]</h2><br /><h3>Experiences</h3><br />[linkedinsc_positions]<br /><div style="float: left; width: 150px;">[linkedinsc_position_start_date] - [linkedinsc_position_end_date]</div><br /><div style="margin-left: 150px;"><br /><b>[linkedinsc_position_title]</b>, [linkedinsc_position_company_name]<br /><em>[linkedinsc_position_company_industry]</em><br />[linkedinsc_position_summary]<br /><br /></div><br />[/linkedinsc_positions]<br /><h3>Education</h3><br />[linkedinsc_educations]<br /><div style="float: left; width: 150px;">[linkedinsc_education_start_date] - [linkedinsc_education_end_date]</div><br /><div style="margin-left: 150px;"><br /><b>[linkedinsc_education_school_name]</b><br /><em>[linkedinsc_education_degree] in [linkedinsc_education_field_of_study]</em><br />[linkedinsc_education_notes]<br /><br /></div><br />[/linkedinsc_educations]<br /><br /><br />[/linkedinsc]]]></content:encoded>
      <wp:postmeta>
        <wp:meta_key>blogger_author</wp:meta_key>
        <wp:meta_value>Russ Gray</wp:meta_value>
        </wp:postmeta>
      </item>
    </channel>
  </rss>
